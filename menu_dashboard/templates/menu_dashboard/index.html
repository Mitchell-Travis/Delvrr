{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Essential Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Delvrr">
    <meta name="theme-color" content="#FFC107">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Scan the QR code to access the digital menu of your favorite restaurant. Browse dishes, place orders, and enjoy a seamless dining experience with Delvrr.">
    <meta name="keywords" content="QR code menu, digital menu, restaurant ordering, contactless dining, online food menu, mobile ordering, food delivery">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Delvrr">
    <meta property="og:title" content="Delvrr - QR Code Digital Menu">
    <meta property="og:description" content="Scan and browse the restaurant's digital menu instantly. A seamless way to order your favorite dishes.">
    <meta property="og:image" content="https://delvrr.com/media/preview.jpg">
    <meta property="og:image:alt" content="Delvrr Digital Menu">

<!-- Dynamically set the correct URL -->
<meta property="og:url" content="{{ request.build_absolute_uri }}">
    
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@delvrrapp">
    <meta name="twitter:creator" content="@delvrrapp">
    <meta name="twitter:title" content="Delvrr - QR Code Digital Menu">
    <meta name="twitter:description" content="Scan and browse the restaurant's digital menu instantly. A seamless way to order your favorite dishes.">
    <meta name="twitter:image" content="https://delvrr.com/media/preview.jpg">
    <meta name="twitter:image:alt" content="Delvrr Digital Menu Preview">
    
    <!-- Pinterest -->
    <meta name="pinterest-rich-pin" content="true">
    
    <!-- LinkedIn -->
    <meta property="linkedin:owner" content="Delvrr">
    
    <!-- WhatsApp / SMS Preview -->
    <meta property="og:site_name" content="Delvrr">
    
    <title>Delvrr - QR Code Digital Menu</title>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://delvrr.com/menu">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="../../../static/menu_dashboard/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../static/menu_dashboard/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../static/menu_dashboard/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../static/menu_dashboard/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="../../../static/menu_dashboard/images/favicon/site.webmanifest">
    
    <!-- CSS Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/libs/bootstrap-icons/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/libs/feather-webfont/dist/feather-icons.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/libs/simplebar/dist/simplebar.min.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/css/style.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/css/theme.min.css">
    <link rel="stylesheet" href="{% static 'menu_dashboard/css/menu.css' %}">
    <style>
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(88, 88, 88, 0.7)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
        }
    </style>
    
    <!-- Preconnect to CDNs for performance -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <!-- Structured Data (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Restaurant",
      "name": "Delvrr Digital Menu",
      "description": "Scan the QR code to view the restaurant's menu and place orders easily.",
      "url": "https://delvrr.com/",
      "image": "https://delvrr.com/media/preview.jpg",
      "logo": "https://delvrr.com/media/Delvrr-logo.JPG",
      "servesCuisine": "Multiple Cuisines",
      "telephone": "0881163840",
      "hasMenu": {
        "@type": "Menu",
        "name": "Digital Menu",
        "url": "https://delvrr.com/"
      },
      "sameAs": [
        "https://web.facebook.com/profile.php?id=61566341983829",
      ]
    }
    </script>


    <style type="text/css">
:root {
    /* Color Palette */
    --brand: #f7c028;
    --brand-dark: #d6a021; /* Slightly darker than #f7c028 */
    --brand-light: rgba(247, 192, 40, 0.1);
    --background: #ffffff;
    --surface: #f8f9fa;
    --text-primary: #1a1a1a;
    --text-secondary: #6c757d;
    --border: #e9ecef;
    --primary-color: #f7c028;
    
    /* New Transition Variable for Smooth Animations */
    --transition: all 0.3s ease-out;

    /* Typography */
    --font-family: 'Poppins', sans-serif;

    /* Sizing and Spacing */
    --radius-lg: 20px;
    --radius-md: 12px;
    --radius-sm: 8px;
    --border-radius: 12px;
    
    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    /* Make the background solid white (instead of a gradient) */
    background: #ffffff;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    padding-bottom: 84px;
}

/* Modal Styles */
.modal-content {
    border-radius: var(--radius-lg);
    border: none;
    background-image: url('../../../static/menu_dashboard/images/');
    background-size: cover;
    background-position: center;
    position: relative;
    box-shadow: var(--shadow-md);
    transition: var(--transition);
}

.modal-overlay {
    background: var(--background);
    padding: 20px;
    border-radius: var(--radius-md);
    position: relative;
    z-index: 2;
}

.modal-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.modal-dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.modal-backdrop {
    background-color: rgba(0, 0, 0, 0.8);
}

/* Button Styles */
.btn-outline-secondary {
    border-radius: 20px;
}

.btn-primary {
    border-radius: 10px;
}

.btn-close-custom {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
}

.btn-close-custom:hover {
    background: #fff;
    transform: scale(1.1);
}

.btn-close-custom i {
    font-size: 14px;
    color: #666;
}

/* Typography and Branding */
.delvrr-logo {
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
    text-transform: uppercase;
    letter-spacing: 2px;
    font-family: 'Arial', sans-serif;
}

.payment-text {
    font-size: 18px;
    display: inline-block;
    width: 90px;
    text-align: center;
    letter-spacing: 0.1em;
}

/* Notification Styles */
.toast-container {
    z-index: 1055;
}

.toast.text-bg-warning {
    background-color: var(--brand);
    color: var(--background);
}

.toast .btn-close-white {
    filter: invert(1);
}

/* App Container */
.menu-app-container {
    max-width: 480px;
    margin: 0 auto;
    background: var(--background);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Modern App Header */
:root {
  /* Use the existing primary brand color */
  --primary-color: {{ primary_brand_color }};
  --secondary-color: {{ secondary_brand_color }};
  
  /* Define a consistent design system */
  --background: #ffffff;
  --text-primary: #222222;
  --text-secondary: #6e6e6e;
  --light-bg: #f7f7f7;
  --border-color: rgba(0, 0, 0, 0.08);
  --success-color: #4CAF50;
  --warning-color: #FFC107;
  --danger-color: #F44336;
  
  /* Elevation/shadows */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 6px 16px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 12px 24px rgba(0, 0, 0, 0.15);
  
  /* Spacing scale */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  
  /* Border radius */
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-pill: 9999px;
}

/* Reset and base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  color: var(--text-primary);
  background-color: var(--light-bg);
  -webkit-tap-highlight-color: transparent;
  overflow-x: hidden;
}

/* ======== Header Component ======== */
.aliexpress-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: {{ primary_brand_color }};
  padding: var(--space-md) var(--space-md);
  box-shadow: var(--shadow-md);
  position: relative;
  z-index: 19;
  
}

/* Group the hamburger menu and brand info on the left */
.header-left {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.filter-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 42px;
  height: 42px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.1));
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15), 
              inset 0 1px 1px rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

/* Hover effect */
.filter-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 
              inset 0 1px 1px rgba(255, 255, 255, 0.3);
}

/* Active/click state */
.filter-button:active {
  transform: translateY(1px) scale(0.96);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1),
              inset 0 1px 1px rgba(255, 255, 255, 0.1);
}

/* Icon styling */
.filter-button i {
  font-size: 18px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  transition: transform 0.2s ease;
}

/* Brand styling */
.brand-info {
  display: flex;
  flex-direction: column;
}

.logo {
  font-size: 24px;
  font-weight: bold;
  color: #fff;
  line-height: 1.1;
  letter-spacing: -0.5px;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.restaurant-name-container {
  display: flex;
  align-items: center;
  margin-top: var(--space-xs);
  background-color: rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-pill);
  padding: 4px 12px;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.location-icon {
  font-size: 10px;
  color: #fff;
  margin-right: var(--space-xs);
}

.restaurant-name {
  font-size: 12px;
  color: white;
  margin: 0;
  font-weight: 500;
}

/* Right side: container for the restaurant logo */
.header-icons {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.action-button {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.1);
  width: 38px;
  height: 38px;
  border-radius: 12px;
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:active {
  transform: scale(0.95);
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
}

.restaurant-logo {
  width: 46px;
  height: 46px;
  border-radius: 14px;
  object-fit: cover;
  border: 2px solid rgba(255, 255, 255, 0.8);
  box-shadow: var(--shadow-md);
}

/* ======== Search Section ======== */
.search-header {
  width: 100%;
  background-color: var(--background);
  padding: var(--space-md);
  margin-top: 0px;
  position: relative;
  z-index: 19;
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  box-shadow: var(--shadow-sm);
}

.search-container {
  width: 100%;
  background-color: var(--light-bg);
  border-radius: var(--radius-pill);
  display: flex;
  align-items: center;
  padding: 12px 20px;
  position: relative;
  border: 1px solid rgba(0, 0, 0, 0.05);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.search-icon {
  font-size: 18px;
  color: var(--text-secondary);
  margin-right: var(--space-sm);
}

.search-input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 16px;
  padding: 0;
  color: var(--text-primary);
}

.search-input::placeholder {
  color: var(--text-secondary);
}

.search-results-dropdown {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  background: var(--background);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  z-index: 999;
  box-shadow: var(--shadow-lg);
  overflow: hidden;
}

/* PROMO BANNER - Modern, App-like */
.promo-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    min-height: 80px;
    margin: 32px auto;
    padding: 16px 20px;
    position: relative;
    background: #f5f5f5;
    color: #fff;
    border-radius: 0px;
    overflow: hidden;
}

/* Promo Text Content */
.promo-content {
    max-width: 55%;
}

.promo-content h2 {
    font-size: 1.5rem;
    margin-bottom: 8px;
    font-weight: 700;
    line-height: 1.2;
}

.promo-content p {
    font-size: 1rem;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1.4;
}

/* Call-to-Action Button */
.promo-cta {
    background: rgba(255, 255, 255, 0.2);
    color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s ease, background 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.promo-cta:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.3);
}

.promo-cta:active {
    transform: translateY(0);
    opacity: 0.9;
}

/* SVG Container with Placeholder SVG */
.promo-svg-container {
    flex-shrink: 0;
    max-width: 35%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.promo-svg-container svg {
    width: 60px;
    height: auto;
    stroke: #fff;
}

/* Media Queries for Responsive Design */
@media (max-width: 768px) {
    .app-header {
        padding: 12px;
    }
    
    .header-content h1 {
        font-size: 20px;
    }
    
    .icon-button {
        width: 38px;
        height: 38px;
        border-radius: 10px;
    }

    .promo-banner {
        margin: 24px auto;
        flex-direction: column;
        text-align: center;
        padding: 12px;
        min-height: 60px;
    }
    
    .promo-content {
        max-width: 100%;
    }
    
    .promo-content h2 {
        font-size: 1.25rem;
    }
    
    .promo-content p {
        font-size: 0.875rem;
    }
    
    .promo-svg-container {
        max-width: 50%;
        margin-top: 8px;
    }
}


/* Search Header */
.search-header {
    padding: 16px;
    background-color: white;
    display: flex;
    justify-content: center;
}

.search-wrapper {
    display: flex;
    align-items: center;
    width: 90%;
    max-width: 600px;
}

.search-container {
    display: flex;
    align-items: center;
    background: #f5f5f5;
    border-radius: 100px;  /* Increased border radius for pill shape */
    padding: 12px 20px;
    flex-grow: 1;
    box-shadow: none;
}

.search-icon {
    color: #9ca3af;
    margin-right: 12px;
    font-size: 20px;
}

.search-input {
    border: none;
    background: transparent;
    outline: none;
    width: 100%;
    font-size: 16px;
    color: #333;
    font-weight: 400;
}

.search-input::placeholder {
    color: #9ca3af;
    font-weight: 400;
}

/* Search component styles */
.search-header {
  position: relative;
  z-index: 1002;
}

.search-wrapper {
  position: relative;
  width: 100%;
  z-index: 1002;
}

.search-container {
  position: relative;
  width: 100%;
}

.search-results-dropdown {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 350px; /* or any width you prefer */
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-height: 300px;
  overflow-y: auto;
  z-index: 1002;
  margin-top: 4px;
}

.search-results-content {
  padding: 5px 0;
}

.search-result-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.search-result-item:hover {
  background-color: #f5f5f5;
}

.search-result-image {
  width: 48px;
  height: 48px;
  border-radius: 6px;
  object-fit: contain;
  margin-right: 12px;
  padding: 4px; /* Adds some padding inside the image container */
  background-color: #f5f5f5;
}

.search-result-info {
  flex: 1;
}

.search-result-name {
  font-weight: 500;
  margin-bottom: 4px;
}

.search-result-category {
  font-size: 0.85em;
  color: #666;
}

.no-results-message {
  padding: 16px;
  text-align: center;
  color: #666;
}

/* Category Navigation */
.category-nav {
  position: relative;
  z-index: 1;
}

/* Header */
.app-header {
  position: relative;
  z-index: 1;
}

/* Menu Container */
.menu-app-container {
  position: relative;
}

/* Category Navigation */
/* ======== Category Navigation ======== */
/* ======== Category Navigation ======== */
.category-nav {
  position: sticky;
  top: 0;
  z-index: 18;
  padding: 6px 0; /* Significantly reduced padding top and bottom */
  background: var(--background);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  width: 100%;
  border-bottom: 1px solid var(--border-color);
}
.category-scroll {
  display: flex;
  overflow-x: auto;
  gap: 10px; /* Reduced gap */
  padding: 2px 16px; /* Reduced vertical padding */
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  scrollbar-width: none;
  mask-image: linear-gradient(to right, transparent, black 4%, black 96%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, black 4%, black 96%, transparent);
}
.category-scroll::-webkit-scrollbar {
  display: none;
}
/* Category buttons */
/* Category buttons */
.category-btn {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 12px; /* Slightly smaller font */
  font-weight: 600;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 4px 10px; /* Reduced padding */
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
  position: relative;
  min-width: 70px; /* Smaller min-width */
  max-width: 90px; /* Smaller max-width */
  outline: none;
  flex: 0 0 auto;
  touch-action: manipulation;
}

.category-btn:hover {
  color: var(--secondary-color);
}

.category-btn:active {
  transform: scale(0.95);
}

/* Icon styling */
.category-icon {
  font-size: 20px; /* Smaller icons */
  margin-bottom: 3px; /* Minimal margin */
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 40px; /* Significantly smaller height */
  width: 40px; /* Significantly smaller width */
  border-radius: 12px;
  background-color: var(--light-bg);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}

/* Active state */
.category-btn.active {
  color: var(--secondary-color) !important; /* Added !important to ensure it applies on all screen sizes */
  font-weight: 700;
}

.category-btn.active .category-icon {
  background: linear-gradient(135deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 80%, white));
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-4px);
}

/* Fixed active indicator */
.category-btn::after {
  content: "";
  display: block;
  width: 0;
  height: 3px; /* Thinner indicator */
  background: var(--secondary-color);
  border-radius: 4px;
  margin-top: 3px; /* Less margin */
  opacity: 0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.category-btn.active::after {
  width: 50%;
  opacity: 1;
}

/* Media query fix for mobile/smaller screens */
@media (max-width: 768px) {
  .category-btn.active {
    color: var(--secondary-color);
  }
  
  .category-btn.active::after {
    background: var(--secondary-color);
  }
}

/* Additional responsive fixes */
@media (max-width: 480px) {
  .category-btn.active {
    color: var(--secondary-color);
  }
  
  .category-nav {
    padding: 4px 0;
  }
  
  .category-scroll {
    gap: 8px;
  }
}

/* Force icon background to use the secondary color on all devices */
.category-btn.active .category-icon {
  background: linear-gradient(135deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 80%, white)) !important;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15) !important;
  transform: translateY(-4px) !important;
}

/* Mobile-specific overrides with higher specificity */
@media screen and (max-width: 767px) {
  .category-nav .category-scroll .category-btn.active .category-icon {
    background: linear-gradient(135deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 80%, white)) !important;
    background-color: var(--secondary-color) !important; /* Fallback */
  }
  
  /* Increased specificity for the icons */
  body .category-nav .category-scroll .category-btn.active .category-icon {
    background: linear-gradient(135deg, var(--secondary-color), color-mix(in srgb, var(--secondary-color) 80%, white)) !important;
    background-color: var(--secondary-color) !important; /* Fallback */
  }
  
  /* Alternative background for browsers that don't support color-mix */
  @supports not (background: color-mix(in srgb, var(--secondary-color) 80%, white)) {
    .category-nav .category-scroll .category-btn.active .category-icon {
      background: var(--secondary-color) !important;
    }
  }
}

/* Additional fixes for different devices/platforms */
@media screen and (max-width: 480px) {
  /* iOS-specific styles */
  @supports (-webkit-touch-callout: none) {
    .category-btn.active .category-icon {
      background-color: var(--secondary-color) !important;
      background-image: none !important;
    }
  }
  
  /* Fallback for older browsers */
  .category-btn.active .category-icon {
    background-color: var(--secondary-color) !important;
  }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

/* ======== Featured Items Section ======== */
.featured-section {
  padding: var(--space-md) var(--space-md) var(--space-lg);
  background-color: var(--background);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  margin-top: -8px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
}

.section-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
}

.view-all {
  font-size: 14px;
  color: var(--secondary-color);
  background: none;
  border: none;
  font-weight: 600;
  cursor: pointer;
  padding: 6px 12px;
  border-radius: var(--radius-pill);
  transition: all 0.2s ease;
}

.view-all:hover {
  background-color: rgba(var(--secondary-color-rgb), 0.1);
}

.items-carousel {
  display: flex;
  gap: var(--space-md);
  overflow-x: auto;
  padding-bottom: var(--space-md);
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  padding-left: 4px;
  padding-right: 4px;
  margin-left: -4px;
  margin-right: -4px;
}

.items-carousel::-webkit-scrollbar {
  display: none;
}

.food-item {
  flex: 0 0 auto;
  width: 180px;
  background-color: var(--background);
  border-radius: var(--radius-lg);
  overflow: hidden;
  
  
  transition: all 0.3s ease;
  transform: translateZ(0);
  will-change: transform;
}

.food-item:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.food-item:active {
  transform: scale(0.98);
}

.food-image-container {
  position: relative;
  height: 140px;
  overflow: hidden;
}

.food-image {
  width: 100%;
  height: 100%;
  background-color: var(--light-bg);
  transition: transform 0.3s ease;
}

.food-image img {
  transition: transform 0.5s ease;
}

.food-item:hover .food-image img {
  transform: scale(1.05);
}

.discount-badge {
  position: absolute;
  top: var(--space-sm);
  left: var(--space-sm);
  background-color: var(--danger-color);
  color: white;
  font-size: 11px;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: var(--radius-pill);
  z-index: 2;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.food-details {
  padding: var(--space-md);
}

.food-details h3 {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: var(--space-sm);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-primary);
}

.rating {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: var(--space-sm);
  font-size: 13px;
}

.rating i {
  color: var(--warning-color);
}

.review-count {
  color: var(--text-secondary);
}

.price-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.price {
  font-weight: 700;
  color: var(--text-primary);
  font-size: 16px;
}

.add-to-cart {
  width: 32px;
  height: 32px;
  border-radius: 10px;
  background-color: transparent;
  color: #000000;
  border: none;
  display: none;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.25s ease;
}

.add-to-cart:hover {
  transform: translateY(-2px);
  color: #555555;
}

.add-to-cart:active {
  transform: scale(0.9);
}

.add-to-cart i {
  font-size: 18px;
}


/* ======== View All Grid Section ======== */
.product-grid-container {
  padding: var(--space-md) var(--space-md) var(--space-lg);
  background-color: var(--background);
  display: none; /* Hidden by default, shown when View All is clicked */
  animation: fadeIn 0.3s ease-in;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-lg);
  width: 100%;
}

.grid-item {
  background-color: var(--background);
  border-radius: var(--radius-lg);
  overflow: hidden;
  
  transition: all 0.3s ease;
}


.grid-item:active {
  transform: scale(0.98);
}

.grid-image-container {
  position: relative;
  height: 160px;
  overflow: hidden;
}

.grid-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.grid-item:hover .grid-image {
  transform: scale(1.05);
}

.grid-details {
  padding: var(--space-md);
}

.grid-details h3 {
  font-size: 16px;
  font-weight: 700;
  margin-bottom: var(--space-xs);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  min-height: 42px;
  line-height: 1.4;
}

.grid-details .description {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: var(--space-sm);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  min-height: 36px;
  line-height: 1.4;
}

.grid-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: var(--space-sm);
}

.back-to-carousel {
  display: inline-flex;
  font-size: 14px;
  color: var(--secondary-color);
  background: none;
  border: none;
  font-weight: 600;
  cursor: pointer;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border-radius: var(--radius-pill);
  transition: all 0.2s ease;
}

.back-to-carousel:hover {
  background-color: rgba(var(--secondary-color-rgb), 0.1);
}

.back-to-carousel i {
  font-size: 12px;
}

.category-badge {
  display: inline-block;
  background-color: var(--light-bg);
  color: var(--text-secondary);
  font-size: 11px;
  padding: 4px 10px;
  border-radius: var(--radius-pill);
  margin-bottom: var(--space-xs);
  font-weight: 500;
}

/* Animation for view transitions */
.fade-in {
  animation: fadeIn 0.3s ease-in;
}

.fade-out {
  animation: fadeOut 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(10px); }
}

/* Add to cart animation */
.add-to-cart.added {
  background-color: var(--success-color);
  animation: addedPulse 0.5s ease;
}

@keyframes addedPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --background: #121212;
    --text-primary: #f0f0f0;
    --text-secondary: #a0a0a0;
    --light-bg: #202020;
    --border-color: rgba(255, 255, 255, 0.1);
  }
  
  .category-icon {
    background-color: rgba(255, 255, 255, 0.08);
  }
  
  .food-image {
    background-image: linear-gradient(45deg, var(--light-bg), #2a2a2a);
  }
  
  .search-container {
    border-color: rgba(255, 255, 255, 0.05);
  }
  
  .grid-image {
    background-image: linear-gradient(45deg, var(--light-bg), #2a2a2a);
  }
  
  .category-badge {
    background-color: rgba(255, 255, 255, 0.08);
  }
  
  .food-item, .grid-item {
    border: 1px solid rgba(255, 255, 255, 0.08);
  }
}

/* Add CSS variables for RGB values of secondary color */
:root {
  --secondary-color-rgb: 0, 120, 212; /* Default fallback - replace with actual color in JS */
}

/* Responsive adjustments */
@media (max-width: 480px) {
  .product-grid {
    gap: var(--space-md);
  }
  
  .grid-image-container {
    height: 130px;
  }
  
  .grid-details {
    padding: var(--space-sm);
  }
  
  .grid-details h3 {
    font-size: 15px;
    min-height: 36px;
  }
  
  .food-item {
    width: 160px;
  }
  
  .food-image-container {
    height: 120px;
  }
  
  .category-icon {
    height: 46px;
    width: 46px;
  }
  .aliexpress-header {
    padding: var(--space-sm) var(--space-md);
  }
  
  .restaurant-logo {
    width: 44px;
    height: 44px;
  }
  
  .logo {
    font-size: 22px;
  }
  
  .search-container {
    padding: 10px 16px;
  }
  
  .section-header h2 {
    font-size: 16px;
  }
}

/* Add floating cart button */
/* Persistent floating cart button styling */
.floating-cart-button {
  position: fixed;
  bottom: 80px; /* Default position if not yet dragged */
  right: 16px; /* Default position if not yet dragged */
  height: 40px; /* Smaller button height */
  padding: 0 14px; /* Reduced padding */
  border-radius: 20px; /* Adjusted for smaller size */
  background-color: {{ primary_brand_color }}; /* Use backend color */
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  border: none;
  cursor: grab;
  z-index: 9999;
  transition: all 0.3s ease;
  gap: 6px;
  user-select: none;
  touch-action: none;
  pointer-events: auto;
}

/* Tooltip to inform users they can drag */
.floating-cart-button::after {
  content: "Drag me";
  position: absolute;
  top: -30px; /* Position above the button */
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  opacity: 0; /* Initially hidden */
  transition: opacity 0.3s ease;
  pointer-events: none;
  white-space: nowrap;
}

/* Show tooltip when .show-tooltip is added */
.floating-cart-button.show-tooltip::after {
  opacity: 1;
}

/* Optional: also show tooltip on hover if desired */
.floating-cart-button:hover::after {
  opacity: 1;
}

.floating-cart-button i {
  font-size: 10px;
}

.cart-count {
  font-size: 12px;
  font-weight: 500;
}

/* Explicitly set cursor when dragging */
.floating-cart-button.dragging {
  cursor: grabbing;
  z-index: 10000;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}

/* Bounce animation when adding items */
@keyframes bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.cart-bounce {
  animation: bounce 0.3s ease;
}



/* Animation when the icon stops */
@keyframes cartStop {
  0% { transform: rotate(0deg); }
  20% { transform: rotate(15deg); }
  40% { transform: rotate(-8deg); }
  60% { transform: rotate(4deg); }
  80% { transform: rotate(-2deg); }
  100% { transform: rotate(0deg); }
}

.cart-stop {
  animation: cartStop 0.6s ease;
}



/* Add some additional animations */
@keyframes slideInUp {
  from {
    transform: translateY(40px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.food-item, .grid-item {
  animation: slideInUp 0.5s ease-out;
  animation-fill-mode: both;
}

/* Stagger animation for items */
.food-item:nth-child(1), .grid-item:nth-child(1) { animation-delay: 0.1s; }
.food-item:nth-child(2), .grid-item:nth-child(2) { animation-delay: 0.15s; }
.food-item:nth-child(3), .grid-item:nth-child(3) { animation-delay: 0.2s; }
.food-item:nth-child(4), .grid-item:nth-child(4) { animation-delay: 0.25s; }
.food-item:nth-child(5), .grid-item:nth-child(5) { animation-delay: 0.3s; }
.food-item:nth-child(6), .grid-item:nth-child(6) { animation-delay: 0.35s; }
.food-item:nth-child(7), .grid-item:nth-child(7) { animation-delay: 0.4s; }
.food-item:nth-child(8), .grid-item:nth-child(8) { animation-delay: 0.45s; }

/* Loading shimmer effect for images */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.food-image.loading, .grid-image.loading {
  background: linear-gradient(90deg, var(--light-bg) 25%, var(--border-color) 50%, var(--light-bg) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Add some depth to the overall design */
.main-content {
  position: relative;
  z-index: 1;
}

.shared-view {
  position: relative;
}

.shared-view::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 100px;
  background: linear-gradient(to bottom, var(--background), transparent);
  pointer-events: none;
  z-index: -1;
}

.shared-view::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100px;
  background: linear-gradient(to top, var(--background), transparent);
  pointer-events: none;
  z-index: -1;
}

/* Add a subtle shadow to create depth between sections */
.category-nav {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
}



/* Reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    background-color: #f0f2f5;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    color: #1a1a1a;
}

/* Main Content & Grid Layout */
.main-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 16px;
    background-color: transparent;
}

.dish-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    padding: 8px;
    background-color: transparent;
}

/* Card Styles */

.dish-card:active {
    transform: scale(0.97);
}

/* Image Container */
.dish-image {
    position: relative;
    width: 100%;
    height: 120px;
    background: #f8f9fa;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dish-image img {
    width: 100px;
    height: 100px;
    object-fit: contain;
    border-radius: 50%;
    border: 3px solid {{ third_brand_color  }};
    transition: transform 0.3s ease, border-color 0.3s ease;
    background-color: #fff;
    padding: 5px;
}

.dish-image img:hover {
    transform: scale(1.05);
    border-color: {{ third_brand_color  }};
}

/* Favorite Button */
.favorite-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(255, 255, 255, 0.9);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    border: none;
    backdrop-filter: blur(4px);
    transition: all 0.2s ease;
}

.heart-icon {
    width: 16px;
    height: 16px;
    color: #666;
}

/* Product Information */
.dish-info {
    padding: 12px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.dish-name {
    font-size: 20px;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.3;
}

.dish-weight {
    color: #666;
    font-size: 12px;
    margin-bottom: 6px;
}

/* Rating System */
.rating {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 6px;
}

.star {
    color: #FFB800;
    font-size: 14px;
}

.rating-number {
    font-weight: 600;
    color: #1a1a1a;
    font-size: 13px;
}

/* Price Controls */
/* Price Controls - Updated */
.dish-price-action {
    margin-top: auto;
    padding-top: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.price-container {
    display: flex;
    align-items: center;
}

.current-price {
    font-weight: 600;
    font-size: 400px; /* increse the price */
}

.previous-price {
    text-decoration: line-through;
    color: #999;
    font-size: 12px;
    margin-left: 4px;
}

/* Add to Cart Button - Updated */
.add-to-cart-btn {
    
    background: {{ primary_brand_color }};
    color: white;
    border-radius: 12px;
    padding: 6px 10px;
    font-weight: 600;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    white-space: nowrap;

    display: flex !important; /* Use flex to ensure visibility */
   
    
}

/* Removing unnecessary price controls that were used before */
.price-controls {
    display: none; /* Hide the old price controls */
}

/* Media query adjustments */
@media (max-width: 360px) {
    .dish-price-action {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .add-to-cart-btn {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .dish-grid {
        gap: 10px;
        padding: 6px;
    }
}

@media (max-width: 360px) {
    .dish-card {
        height: 240px;
    }

    .dish-image {
        height: 110px;
    }

    .dish-image img {
        width: 90px;
        height: 90px;
        padding: 4px;
    }

    .dish-name {
        font-size: 20px;
    }

    .dish-weight {
        font-size: 11px;
    }

    .current-price {
        font-size: 35px;
    }

    .add-to-cart-btn {
        padding: 7px;
        font-size: 12px;
    }
}

/* Loading Skeleton */
.skeleton {
    background: linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.08) 37%, rgba(0,0,0,0.06) 63%);
    background-size: 400% 100%;
    animation: skeleton-loading 1.4s ease infinite;
}

@keyframes skeleton-loading {
    0% { background-position: 100% 50%; }
    100% { background-position: 0 50%; }
}

/* Bottom Navigation */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--background);
    z-index: 1000;
}



.fixed-bottom-icons.hidden {
    transform: translateY(100%);
}

.nav-container {
    height: 100%;
    padding: 0 20px;
    max-width: 600px;
    margin: 0 auto;
}

.nav-item-wrapper {
    position: relative;
    padding: 0 4px;
}

.text-inherit {
    color: #333;
    text-decoration: none;
    transition: var(--transition);
    padding: 8px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.icon-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;  /* Reduced from 40px */
    height: 32px; /* Reduced from 40px */
}

/* Keep icons gray by default, but the cart icon (3rd item) is black with a white icon */
.fas {
    font-size: 16px !important; /* Reduced from 22px */
    color: #666;
    transition: var(--transition);
}

#cartIconCount {
    position: absolute;
    top: -2px;
    right: -2px;
    background: red;
    color: #fff;
    border-radius: 50%;
    min-width: 16px;    /* Reduced from 18px */
    height: 16px;       /* Reduced from 18px */
    font-size: 10px;    /* Reduced from 11px */
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
}

.text-inherit.active {
    color: #000;
}

.text-inherit.active .fas {
    color: #000;
}

/* Specifically style the 3rd nav item (cart) as in the screenshot */
.nav-item-wrapper:nth-child(3) .icon-wrapper {
    background: #000;
    border-radius: 50%;
    width: 38px;  /* Reduced from 45px */
    height: 38px; /* Reduced from 45px */
}

.nav-item-wrapper:nth-child(3) .fas {
    color: #fff; /* white icon */
}

.nav-label {
    font-size: 10px; /* Reduced from 12px */
    color: #666;
    margin: 0;
    line-height: 1;
    text-align: center;
    display: block;
}


@media (hover: hover) {
    .text-inherit:hover {
        background-color: rgba(7, 94, 84, 0.05);
        border-radius: 8px;
    }
}

/* Table Bar */
.table-bar {
    background: #1a1a1a;
    color: #fff;
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.table-info {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
}

.help-button {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: var(--transition);
}

.help-button:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Enhanced Header */
.brand-section {
    display: flex;
    flex-direction: column;
}

.brand-section h1 {
    font-size: 24px;
    margin-bottom: 2px;
}

.restaurant-name {
    font-size: 14px;
    color: var(--text-primary);
}

/* Cart Button */
.cart-button {
    background: var(--brand);
    border: none;
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: pointer;
    color: #fff;
}

.cart-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #1a1a1a;
    color: #fff;
    font-size: 12px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

/* Enhanced Category Icons */
.category-icon-wrap {
    background: #f0f2f0;
    width: 52px;
    height: 52px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
    transition: var(--transition);
}

.category-btn {
    padding: 14px;
}

.category-btn.active .category-icon-wrap {
    background: {{ secondary_brand_color }};
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(247, 192, 40, 0.2);
}

/* Cart Styles */
.offcanvas {
    border-radius: var(--border-radius) 0 0 var(--border-radius);
    max-width: 90%;
}

.cart-items {
    flex: 1;
    overflow-y: auto;
}

.cart-item {
    display: flex;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.cart-item-image {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    object-fit: cover;
    margin-right: 1rem;
}

.cart-item-details {
    flex: 1;
}

.cart-item-name {
    font-weight: 500;
    margin-bottom: 0.25rem;
}

.cart-item-price {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.quantity-btn {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1px solid var(--brand);
    background: none;
    color: var(--brand);
    display: flex;
    align-items: center;
    justify-content: center;
}

.cart-footer {
    padding: 1rem;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.checkout-button {
    width: 100%;
    padding: 1rem;
    background: {{ primary_brand_color }};
    color: #fff;
    border: none;
    border-radius: var(--border-radius);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 500;
}

:root {
    --brand: #f7c028; /* New brand color */
    --background: #ffffff; /* New background color */
    --primary-color: var(--brand); /* Changed to use --brand */
    --primary-dark: #e6b024;
    --primary-light: #ffd24d;
    --background-color: var(--background); /* Changed to use --background */
    --surface-color: var(--background); /* Changed to use --background */
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --border-color: #e2e8f0;
    --success-color: #22c55e;
    --error-color: #ef4444;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;
    --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
}



html {
    -webkit-text-size-adjust: 100%;
}

.chat-container {
    max-width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--surface-color);
    position: relative;
}

.modal-header {
    padding: 1rem;
    background: var(--surface-color);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: var(--shadow-sm);
    position: relative;
    z-index: 10;
}

.header-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.restaurant-icon {
    width: 2.75rem;
    height: 2.75rem;
    border-radius: var(--radius-lg);
    background: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    box-shadow: var(--shadow-sm);
}

.table-info h5 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0;
    color: var(--text-primary);
}

.status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-xl);
    font-size: 0.875rem;
    font-weight: 500;
    gap: 0.375rem;
}

.status-badge.preparing {
    background: var(--primary-light);
    color: var(--text-primary);
}

.status-badge.completed {
    background: var(--success-color);
    color: #fff;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    background: var(--background-color);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    scroll-behavior: smooth;
}

.message {
    max-width: 70%;
    min-width: 100px;
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-xl);
    position: relative;
    animation: slideIn 0.3s ease;
    word-break: break-word;
    font-size: 1rem;
    line-height: 1.2;
}

.restaurant-message {
    align-self: flex-start;
}
.restaurant-message .message-content {
    background: var(--surface-color);
    color: var(--text-primary);
    border-bottom-left-radius: var(--radius-sm);
    box-shadow: var(--shadow-md);
    text-align: left;
}

.customer-message {
    align-self: flex-end;
}
.customer-message .message-content {
    background: var(--primary-color);
    color: white;
    border-bottom-right-radius: var(--radius-sm);
    text-align: left;
}

.message-content {
    display: block;
}

.message-content p {
    margin: 0;
}

.system-message {
    align-self: center;
    background: #e0e7ff;
    color: #3730a3;
    border: 1px solid #c7d2fe;
    padding: 0.75rem 1rem;
    border-radius: 1.25rem;
    font-size: 0.875rem;
    text-align: center;
}

.order-summary {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    padding: 0.75rem;
    margin-bottom: 0.75rem;
    max-width: 90%;
}

.order-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 1rem;
    color: var(--text-secondary);
}

.order-header i {
    color: var(--primary-color);
    font-size: 1.25rem;
}

.order-items {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.order-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: var(--text-primary);
    padding: 0.25rem 0;
}

.order-item.order-total {
    font-weight: 600;
    border-top: 1px solid var(--border-color);
    padding-top: 0.5rem;
}

.chat-input-area {
    padding: 1rem;
    padding-bottom: calc(1rem + var(--safe-bottom));
    background: var(--surface-color);
    
    position: relative;
    z-index: 10;
}

.input-group {
    display: flex;
    gap: 0.75rem;
    align-items: flex-end;
    max-width: 48rem;
    margin: 0 auto;
    position: relative;
}

.message-input {
    flex: 1;
    padding: 0.875rem 1rem;
    
    border-radius: var(--radius-xl);
    font-size: 1rem;
    background: var(--background-color);
    transition: var(--transition);
    resize: none;
    max-height: 120px;
    min-height: 48px;
}

.message-input:focus {
    outline: none;
    
    background: var(--surface-color);
}

.send-button {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    border: none;
    background: var(--primary-color);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    margin-left: 0.5rem;
}

.send-button:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
}        


@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (min-width: 768px) {
    .chat-container {
        max-width: 48rem;
        margin: 1rem auto;
        height: calc(100vh - 2rem);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-lg);
    }
    .modal-header {
        border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    }
}

@media (max-width: 768px) {
    .chat-messages {
        padding: 1rem;
    }
    .message {
        max-width: 85%;
    }
    .modal-header,
    .chat-input-area {
        padding: 1rem;
    }
    .message-input {
        font-size: 1rem;
    }
}

/* Profile Section */
.profile-wrapper {
    padding: 16px;
}

.profile-card {
    background: var(--background);
    border-radius: var(--radius-lg);
    padding: 24px;
    box-shadow: var(--shadow-sm);
}

.profile-header-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.profile-avatar {
    position: relative;
    margin-bottom: 16px;
}

.avatar-img {
    width: 88px;
    height: 88px;
    border-radius: 50%;
    border: 2px solid var(--brand);
    background: var(--surface);
    object-fit: cover;
}

.avatar-edit {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 28px;
    height: 28px;
    background: var(--brand);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 12px;
    border: 2px solid var(--background);
    cursor: pointer;
}

.profile-name {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.profile-tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
}

.profile-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: var(--brand-light);
    color: var(--brand);
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-weight: 500;
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    padding: 16px;
}

.stat-item {
    background: var(--background);
    border-radius: var(--radius-md);
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: var(--shadow-sm);
}

.stat-item i {
    width: 40px;
    height: 40px;
    background: var(--brand-light);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--brand);
    font-size: 16px;
}

.stat-info {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.stat-label {
    font-size: 13px;
    color: var(--text-secondary);
}

/* Profile Menu */
.profile-menu {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.menu-link {
    background: var(--background);
    border-radius: var(--radius-md);
    padding: 16px;
    display: flex;
    align-items: center;
    text-decoration: none;
    color: var(--text-primary);
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease;
    cursor: pointer;
}

.menu-link:hover {
    transform: translateX(4px);
}

.menu-link i:first-child {
    width: 24px;
    margin-right: 12px;
    color: var(--brand);
}

.menu-link span {
    flex: 1;
    font-weight: 500;
}

.menu-link i.fa-chevron-right {
    color: var(--text-secondary);
    font-size: 14px;
}

.menu-link-logout {
    margin-top: 8px;
}

.menu-link-logout i:first-child {
    color: var(--brand);
}

/* Responsive Adjustments for Profile Section */
@media (min-width: 768px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        max-width: 600px;
        margin: 0 auto;
    }
    .profile-menu {
        max-width: 600px;
        margin: 0 auto;
    }
}

@media (max-width: 380px) {
    .profile-wrapper {
        padding: 12px;
    }
    .profile-menu {
        padding: 12px;
        width: 100%;
        margin: 0;
    }
    .menu-link {
        padding: 14px;
        width: 100%;
    }
    .stats-grid {
        gap: 12px;
        padding: 12px;
    }
    .stat-item {
        padding: 12px;
    }
    .stat-value {
        font-size: 16px;
    }
}

.nav-item-wrapper a.active {
    color: var(--brand);
}

.nav-item-wrapper a.active .nav-label {
    color: var(--brand);
}

/* Keep the icon color white on the add-to-cart button */
.add-to-cart-btn i {
  color: #fff;
  margin-right: 5px;
}
/* 1) Make all nav items turn brand color on active */
.text-inherit.active {
  color: var(--brand) !important;
}
.text-inherit.active .fas {
  color: var(--brand) !important;
}

/* 2) Exclude the 3rd nav item (cart) from changing color */
.nav-item-wrapper:nth-child(3) .text-inherit.active {
  color: #fff !important;
}
.nav-item-wrapper:nth-child(3) .text-inherit.active .fas {
  color: #fff !important;
}

/* OFFCANVAS WRAPPER */
.offcanvas {
  width: 100%;
  max-width: 380px;
  background: var(--background);
  box-shadow: var(--shadow);
  position: fixed;
  top: 0;
  right: 0;
  height: 100%;
  transform: translateX(100%);
  transition: transform 0.3s ease;
  z-index: 1050;
  display: flex;
  flex-direction: column;
}

.offcanvas.show {
  transform: translateX(0);
}

.offcanvas-header {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid #eee;
}

.offcanvas-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.offcanvas-title span {
  background: black;
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  font-size: 0.875rem;
  margin-left: 0.5rem;
}

.btn-close {
  background: none;
  border: none;
  padding: 0.5rem;
  cursor: pointer;
}

.offcanvas-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
}

/* CART TOP SECTION (Co-delivery, Time, Address, Chat) */
.cart-info {
  background: white; /* or var(--background) if you prefer */
  padding: 0 1rem 1rem;
  margin-bottom: 1rem;
}

.cart-info-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.5rem;
}

.cart-info-switch {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Toggle Switch */
.switch {
  position: relative;
  display: inline-block;
  width: 34px;
  height: 20px;
}
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  transition: 0.4s;
  border-radius: 20px;
}
.slider:before {
  position: absolute;
  content: "";
  height: 14px;
  width: 14px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.4s;
  border-radius: 50%;
}
input:checked + .slider {
  background-color: var(--brand, #f59e0b); /* Adjust brand color */
}
input:checked + .slider:before {
  transform: translateX(14px);
}

/* Time & Address Rows */
.cart-info-time,
.cart-info-address {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.875rem;
  color: var(--text-secondary, #555);
}

/* Chat Button */
.cart-info-chat {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-secondary, #555);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* "Order" Heading Above Cart Items */
.cart-order-heading {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 1rem 0.75rem;
  color: var(--text-primary, #222);
}

/* CART ITEMS */
.cart-items {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  padding-bottom: 1rem;
}

.cart-item {
  display: flex;
  align-items: center;
  padding: 0.75rem;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 0.75rem;
}

.cart-item-image {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  object-fit: contain;  /* Changed from cover to contain */
  margin-right: 0.75rem;
}

.cart-item-details {
  flex: 1;
}

.cart-item-name {
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.25rem;
}

.cart-item-price {
  font-size: 1rem;
  font-weight: 600;
  color: black;
  margin-bottom: 0.5rem;
}

.quantity-controls {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background: white;
  padding: 0.25rem;
  border-radius: 6px;
  width: fit-content;
}

.quantity-btn {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  border: none;
  background: {{ primary_brand_color  }};
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.quantity-controls span {
  font-weight: 500;
  min-width: 20px;
  text-align: center;
}

.remove-item {
  background: none;
  border: none;
  width: 28px;
  height: 28px;
  border-radius: 6px;
  color: #dc2626;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

/* CART SUMMARY */
.cart-summary {
  flex-shrink: 0;
  background: #f8f9fa;
  padding: 1rem;
  border-top: 1px solid #eee;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.summary-row:last-child {
  margin-bottom: 0;
  padding-top: 0.5rem;
  border-top: 1px dashed #eee;
}

/* Example "Delivery" row */
.summary-row.delivery-fee {
  margin-top: 0.5rem;
}

#cartTotal {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-primary);
}

/* CART FOOTER */
.cart-footer {
  flex-shrink: 0;
  padding: 1rem;
  background: white;
  border-top: 1px solid #eee;
}

/* "Pay" BUTTON */
.checkout-button {
  width: 100%;
  padding: 0.75rem;
  background: {{ primary_brand_color }};
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.checkout-button:hover {
  background: #f7c028; /* Slightly darker on hover */
}

.checkout-button:active {
  opacity: 0.9;
}

/* OFFCANVAS BACKDROP */
.offcanvas-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.3);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1040;
}

.offcanvas-backdrop.show {
  opacity: 1;
}

/* MOBILE OPTIMIZATIONS */
@media (max-width: 768px) {
  .offcanvas {
    max-width: 100%;
    height: 100%;
  }
  .cart-items {
    -webkit-overflow-scrolling: touch;
  }
  .cart-summary,
  .cart-footer {
    position: sticky;
    bottom: 0;
    background: white;
    z-index: 1;
  }
  .cart-footer {
    padding-bottom: max(1rem, env(safe-area-inset-bottom, 1rem));
  }
  .checkout-button {
    padding: 1rem;
  }
}

/* SCROLLBAR STYLING */
.cart-items::-webkit-scrollbar {
  width: 4px;
}

.cart-items::-webkit-scrollbar-track {
  background: #f1f1f1;
}

.cart-items::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 2px;
}
</style>



<style>
    /* Helper class to hide inactive sections */
    .hidden {
      display: none !important;
    }
    /* (Your existing styling can remain here) */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    /* Optional: Ensure each section has enough bottom padding so the fixed nav does not cover content */

    .nav-item-wrapper a {
      text-decoration: none;
      color: inherit;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* Active state styling */
    .active {
      color: red; /* Adjust to your design */
    }
  </style>



<style>
.btn-check:checked + .btn {
    background-color: #f7c028; !important;
    color: white !important;
}

.btn:hover {
    background-color: #f7c028; !important;
    color: white !important;
}
</style>

<style>
  /* Splash screen covers the whole viewport */
  .splash-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #fff; /* Black background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 0.5s ease-out;
  }
  .splash-screen.fade-out {
    opacity: 0;
  }

  /* Center and animate the logo content */
  .splash-content {
    text-align: center;
    transform: translateY(-10%);
    color: #fff;
  }

  /* Wrapper for your logo image */
  .logo-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    animation: logoAnimation 1.5s ease-in-out;
  }

  /* Actual logo image; adjust size as needed */
  .logo-image {
    width: 180px; 
    height: auto;
    opacity: 0;                 /* Start invisible */
    animation: fadeIn 0.8s ease-out 0.5s forwards; 
    /* The 0.5s delay gives the scale animation time to play first, 
       if you want to match the original “pop” effect. */
  }

  .tagline {
    font-size: 16px;
    color: #ccc; /* Slightly gray */
    margin-top: 0.7px;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUpIn 0.5s ease-out 1s forwards;
    font-weight: 500;
    letter-spacing: 0.5px;
  }

  .loading-dots {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-top: 25px;
  }
  .dot {
    width: 6px;
    height: 6px;
    background-color: #FFE135; /* Yellow color */
    border-radius: 50%;
    animation: dotPulse 1s infinite;
  }
  .dot:nth-child(2) {
    animation-delay: 0.2s;
  }
  .dot:nth-child(3) {
    animation-delay: 0.4s;
  }

  /* Animations */
  @keyframes logoAnimation {
    0%   { transform: scale(0.8); }
    50%  { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  @keyframes fadeUpIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes dotPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.5);
      opacity: 0.5;
    }
  }
</style>
 
<style>
.notification-banner {
  display: flex;
  justify-content: center;
  align-items: center;
   background-color: #f0f8f0;  /* Light green background */
  color: #333;  /* Dark text for better readability */
  padding: 10px 20px;
  width: 100%;
  position: relative;
}

.notification-icon {
  background-color: #4CD964;  /* Green circle */
  border-radius: 50%;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 10px;
  flex-shrink: 0;
}

.notification-message {
  flex: 1;
  text-align: center;
  font-weight: 500;
}

.notification-button {
  display: inline-block;
  background-color: #222;
  color: white;
  padding: 6px 16px;
  border-radius: 4px;
  margin-left: 16px;
  text-decoration: none;
  font-weight: bold;
}

.notification-close {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 18px;
  padding: 0 10px;
}
</style>
 




</head>
   <body>

    <!-- Navbar -->

    <!-- Offcanvas Cart Structure -->
    <!-- Offcanvas Cart Structure (IDs & structure remain unchanged) -->
  <!-- (A) OFFCANVAS CART STRUCTURE -->
<!-- (A) OFFCANVAS CART STRUCTURE -->
<div class="offcanvas offcanvas-end" id="offcanvasRight" tabindex="-1">
  <!-- Offcanvas Header -->
  <div class="offcanvas-header">
    <!-- Example: keep the "Cart #", or rename as desired -->
    <h5 class="offcanvas-title">
      Cart <span id="cartCount">0</span>
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
      <!-- Close icon -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <!-- Offcanvas Body -->
  <div class="offcanvas-body">
    
    <!-- TOP SECTION: co-delivery, time, address, chat icon -->
    <div class="cart-info">
      <!-- First row: co-delivery toggle & time -->
      <div class="cart-info-row">
        <div class="cart-info-switch">
          
          <span></span>
        </div>
        <div class="cart-info-time">
          <!-- Example time icon (optional) -->
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 6v6l4 2"></path>
          </svg>
          <span>15 min</span>
        </div>
      </div>

      <!-- Second row: address & chat icon -->
      <div class="cart-info-row">
        <div class="cart-info-address">
          <!-- Example location icon -->
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          <span>{{ restaurant.restaurant_name }}</span>
        </div>
        <button class="cart-info-chat" aria-label="Chat">
          <!-- Example chat icon -->
          <!-- <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg> -->
        </button>
      </div>
    </div>

    <!-- "Order" heading, as shown in screenshot -->
    <h6 class="cart-order-heading">Order</h6>

    <!-- Cart Items (unchanged logic) -->
    <div id="cartItems" class="cart-items">
      <!-- Cart items will be inserted here by your JS -->
      <template id="cartItemTemplate">
        <div class="cart-item">
          <img src="${productImage}" alt="${productName}" class="cart-item-image">
          <div class="cart-item-details">
            <div class="cart-item-name">${productName}</div>
            <div class="cart-item-price">$${productPrice.toFixed(2)}</div>
            <div class="quantity-controls">
              <button class="quantity-btn decrement" data-product-id="${itemId}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
              <span>${quantity}</span>
              <button class="quantity-btn increment" data-product-id="${itemId}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
            </div>
          </div>
          <button class="remove-item" data-product-id="${itemId}" aria-label="Remove item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18"></path>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
            </svg>
          </button>
        </div>
      </template>
    </div>

    <!-- Cart Summary (with "Delivery" line) -->
    <div class="cart-summary">
      <div class="summary-row">
        <span>Order</span>
        <span id="cartTotal">$0.00</span>
      </div>
      <!-- Example line: "Delivery: Free from $5" -->
      <div class="summary-row delivery-fee">
        
        <span></span>
      </div>
    </div>

    <!-- Footer with "Pay" button -->
    <div class="cart-footer">
      <button id="checkoutButton" class="checkout-button" data-restaurant-id="{{ restaurant.id }}">
        <!-- Example pay icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7"></path>
          <path d="M21 5.618a1 1 0 00-1.447-.894L15 7v13l5.447-2.724A1 1 0 0021 16.382V5.618z"></path>
          <path d="M9 7v13"></path>
        </svg>
        Checkout
      </button>
    </div>
  </div>

  <!-- Loading Overlay (unchanged) -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="loading-content">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 6v6l4 2"></path>
      </svg>
      <p>Processing...</p>
    </div>
  </div>
</div>



    

    <!-- Toast Notification -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="guestToast" class="toast align-items-center text-bg-warning border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    You are currently viewing the site as a guest.
                </div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

      
  <!-- ===============================
       Orders Modal (Fullscreen Chat Orders)
       (This modal remains separate and unaffected)
  ================================ -->
  <div class="modal fade" id="ordersFullscreen" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content chat-container">
        <!-- Header -->
        <div class="modal-header border-bottom sticky-top bg-white">
          <div class="header-info">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
            <div class="restaurant-icon">
              <i class="fas fa-utensils"></i>
            </div>
            <div class="table-info">
              <h5>Table #1</h5>
              <div>
                <small class="text-muted">Order #12345</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Messages -->
        <div class="chat-messages" id="chatMessages">
          <div class="message system-message">
            <i class="fas fa-info-circle me-2"></i>
            Order Received
            <span class="message-time">2 mins ago</span>
          </div>
          <div class="message restaurant-message">
            <div class="message-content">
              <div class="order-summary">
                <div class="order-header">
                  <i class="fas fa-receipt"></i>
                  <h6 style="margin: 0; font-weight: 600;">Order Summary</h6>
                </div>
                <div class="order-items">
                  <div class="order-item">
                    <span>2× Classic Burger</span>
                    <span>$19.98</span>
                  </div>
                  <div class="order-item">
                    <span>1× Large Fries</span>
                    <span>$3.50</span>
                  </div>
                  <div class="order-item order-total">
                    <span>Total</span>
                    <span>$23.48</span>
                  </div>
                </div>
              </div>
              <span class="message-time">1 min ago</span>
            </div>
          </div>
          <!-- <div class="message customer-message">
            <div class="message-content">
              <p style="margin: 0">Please add extra ketchup</p>
              <span class="message-time">Just now</span>
            </div>
          </div> -->
        </div>

        <!-- Input -->
        <div class="chat-input-area">
          
            <input type="text"  class="message-input" placeholder="Type a message..." id="messageInput" aria-label="Message input">
            <button class="send-button" type="button" id="sendButton">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
    </div>
  </div>

  <!-- ===============================
       MENU SECTION
       (Default visible on page load)
  ================================ -->



  <section id="menuSection" class="menu-app-container">
       
  <!-- App Header -->

{% if notification %}
<div class="notification-banner" id="notification-banner">
  <div class="notification-message">
    
    <div class="notification-description">{{ notification.message }}</div>
  </div>
  <button class="notification-close" onclick="closeNotification()">
    <i class="fas fa-times"></i>
  </button>
</div>
{% endif %}


<!-- Header -->
<div class="aliexpress-header">
  <!-- Left side: hamburger menu + brand info -->
  <div class="header-left">
    <button class="filter-button">
      <i class="fas fa-sliders-h"></i>
    </button>
    <div class="brand-info">
      <div class="logo">Delvrr</div>
      <div class="restaurant-name-container">
        <i class="fas fa-map-marker-alt location-icon"></i>
        <p class="restaurant-name">{{ restaurant.restaurant_name }}</p>
      </div>
    </div>
  </div>
  <!-- Right side: restaurant logo and actions -->
  <div class="header-icons">
    
    <img
      src="{{ restaurant.logo_pic.url }}"
      alt="Restaurant Logo"
      class="restaurant-logo"
    />
  </div>
</div>

<!-- Search Section -->
<div class="search-header">
  <div class="search-container">
    <i class="fas fa-search search-icon"></i>
    <input
      type="text"
      class="search-input"
      placeholder="Search for menu items"
    />
    <div class="search-results-dropdown" style="display: none;">
      <div class="search-results-content"></div>
    </div>
  </div>
</div>

<!-- Category Navigation (Sticky) -->
<div class="category-nav">
  <div class="category-scroll">
    <!-- Default category button for "All" food -->
    {% if not hide_all_category %}
    <button class="category-btn active" data-category="featured">
      <div class="category-icon">
        🍱
      </div>
      <span>All</span>
    </button>
    {% endif %}
    {% for category in categories %}
      <button class="category-btn {% if hide_all_category and forloop.first %}active{% endif %} {% if category.is_new %}new{% endif %}" data-category="{{ category.name }}">
        <div class="category-icon">
          {{ category.emoji|default:"" }}
        </div>
        <span>{{ category.name }}</span>
      </button>
    {% endfor %}
  </div>
</div>

<!-- 
<div class="promo-banner">
  <div class="promo-content">
    <h2>Get 32% Promo</h2>
    <button class="buy-button">Order Now</button>
  </div>
  <div class="promo-image">
    You can replace this with your shrimp/food image
    <svg viewBox="0 0 100 100" width="60" height="60">
      <path d="M20,50 Q50,20 80,50" fill="none" stroke="#fff" stroke-width="4"/>
      <path d="M20,60 Q50,30 80,60" fill="none" stroke="#fff" stroke-width="4"/>
    </svg>
  </div>
</div> -->

<!-- Featured Items Section (Sample) -->
<!-- Main Content -->
<!-- Main Content -->
<div class="main-content" id="menuContent">
  <!-- Featured Section with Carousel View -->
  <div class="featured-section shared-view">
    <div class="section-header">
      <h2>Popular</h2>
      <button class="view-all">See all</button>
    </div>
    <div class="items-carousel">
      {% for category_products in allProds %}
        {% for product in category_products %}
          <div class="food-item"
               data-category="{{ product.category.name|lower }}"
               data-product-id="{{ product.id }}"
               data-name="{{ product.name }}"
               data-description="{{ product.description }}"
               data-price="{{ product.price }}"
               data-previous-price="{{ product.previous_price|default:'' }}"
               data-image="{{ product.product_image.url }}">
            <div class="food-image-container">
              {% if product.status == 'Sale' %}
                <span class="discount-badge">Sale</span>
              {% endif %}
              <div class="food-image">
                <img src="{{ product.product_image.url }}" alt="{{ product.name }}" class="product-image-trigger" style="width: 100%; height: 100%; object-fit: cover;">
              </div>
            </div>
            <div class="food-details">
              <h3>{{ product.name }}</h3>
              <div class="rating">
                <i class="fas fa-star"></i>
                <span>4.9</span>
                <span class="review-count">(203)</span>
              </div>
              <div class="price-row">
                <div class="price">
                  <span>${{ product.price }}</span>
                  {% if product.previous_price %}
                    <span class="previous-price" style="text-decoration: line-through; font-size: 12px; color: var(--text-secondary); margin-left: 4px;">${{ product.previous_price }}</span>
                  {% endif %}
                </div>
                {% if product.status != 'Unavailable' %}
                  <button class="add-to-cart"
                        data-product-id="{{ product.id }}"
                        data-name="{{ product.name }}"
                        data-price="{{ product.price }}"
                        data-image="{{ product.product_image.url }}">
                    <i class="fas fa-shopping-cart"></i>
                </button>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>

  </div>
  
  <!-- Grid View for "View All" -->
  <div class="product-grid-container shared-view" id="productGridContainer">
    <div class="section-header">
      <h2>All Menu</h2>
      <button class="back-to-carousel"><i class="fas fa-chevron-left"></i> Back</button>
    </div>
    <div class="product-grid" id="productGrid">
      <!-- Grid items will be dynamically populated here -->

    </div>
  </div>
</div>

 <button class="floating-cart-button" 
      data-bs-toggle="offcanvas" 
      data-bs-target="#offcanvasRight" 
      aria-controls="offcanvasRight">
  <i class="fas fa-shopping-bag"></i>
  <span class="cart-count" id="cartIconCount">0 Items</span>
</button>





    
    

  </section>

  <!-- ===============================
       PROFILE SECTION
       (Starts hidden by default)
  ================================ -->
  <div id="userSection" class="menu-app-container hidden">
    <!-- Profile Header -->
    <div class="app-header">
      <div class="header-content">
        <h1>Profile</h1>
        <div class="header-actions">
          <button class="icon-button">
            <i class="fas fa-bell"></i>
          </button>
          <button class="icon-button search-button">
            <i class="fas fa-gear"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Profile Card -->
    <div class="profile-wrapper">
      <div class="profile-card">
        <div class="profile-header-content">
          <div class="profile-avatar">
            <img src="" alt="Profile Image" class="avatar-img">
            <span class="avatar-edit">
              <i class="fas fa-camera"></i>
            </span>
          </div>
          <h2 class="profile-name">{{ request.user.first_name }}</h2>
          <div class="profile-tags">
            <span class="profile-tag">
              <i class="fas fa-star"></i>
              Level {{ request.user.customer.loyalty_level }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-item">
        <i class="fas fa-wallet"></i>
        <div class="stat-info">
          <span class="stat-value">{{ request.user.customer.wallet_balance }}</span>
          <span class="stat-label">Credits</span>
        </div>
      </div>
      <div class="stat-item">
        <i class="fas fa-gift"></i>
        <div class="stat-info">
          <span class="stat-value">{{ request.user.customer.reward_points }}</span>
          <span class="stat-label">Points</span>
        </div>
      </div>
    </div>

    <!-- Profile Menu -->
    <div class="profile-menu">
      <a href="#" class="menu-link">
        <i class="fas fa-clock-rotate-left"></i>
        <span>Order History</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="#" class="menu-link">
        <i class="fas fa-heart"></i>
        <span>Favorites</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="#" class="menu-link">
        <i class="fas fa-star"></i>
        <span>Reviews</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="#" class="menu-link">
        <i class="fas fa-gift"></i>
        <span>Rewards</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="{% url 'customer_signout' %}" class="menu-link menu-link-logout">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
        <i class="fas fa-chevron-right"></i>
      </a>
    </div>
  </div>

  <!-- ===============================
       BOTTOM NAVIGATION
       (Always visible)
  ================================ -->
<!--   <nav class="bottom-nav">
    <div class="fixed-bottom-icons">
      <div class="nav-container">
        <div class="d-flex justify-content-between align-items-center h-100">
          Menu Icon
          <div class="nav-item-wrapper">
            <a href="#" id="ourDishIcon" class="text-inherit d-flex flex-column align-items-center" data-target="menuSection">
              <div class="icon-wrapper">
                <i class="fas fa-home"></i>
              </div>
              <span class="nav-label">Menu</span>
            </a>
          </div>
          Orders Icon
          <div class="nav-item-wrapper">
            <a href="#" id="ordersIcon" class="text-inherit d-flex flex-column align-items-center" data-target="ordersSection">
              <div class="icon-wrapper">
                <i class="fas fa-concierge-bell"></i>
              </div>
              <span class="nav-label">Orders</span>
            </a>
          </div>
          Cart Icon
          <div class="nav-item-wrapper">
            <a data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" href="#" role="button" aria-controls="offcanvasRight" class="text-inherit d-flex flex-column align-items-center">
              <div class="icon-wrapper">
                <i class="fas fa-shopping-cart"></i>
                <span id="cartIconCount"></span>
              </div>
              <span class="nav-label">Cart</span>
            </a>
          </div>
          Profile Icon
          <div class="nav-item-wrapper">
            <a href="#" id="userIcon" class="text-inherit d-flex flex-column align-items-center" data-target="userSection">
              <div class="icon-wrapper">
                <i class="fas fa-user"></i>
              </div>
              <span class="nav-label">Profile</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav> -->
  </section>

    <!-- Product Detail Modal -->
    <!-- Product Detail Modal -->
<div class="modal fade" id="productDetailModal" tabindex="-1" aria-labelledby="productDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="max-width: 400px; margin: auto; border-radius: 32px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: none; background-color: #FFF8F0;">
      <!-- Main Content Wrapper -->
      <div class="position-relative">
        <!-- Back Button (Left Arrow) -->
        <button type="button" class="btn-back position-absolute top-4 start-4 z-3" 
                data-bs-dismiss="modal" aria-label="Back"
                style="background: white; border: none; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
          <i class="fas fa-chevron-left" style="color: #000;"></i>
        </button>
        
        <!-- Favorite Button (Heart) -->
        <button type="button" class="btn-favorite position-absolute top-4 end-4 z-3" 
                aria-label="Favorite"
                style="background: white; border: none; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
          <i class="fas fa-heart" style="color: #FF6B6B;"></i>
        </button>
                
        <!-- Image Section -->
        <div class="position-relative" style="height: 300px; background-color: white; display: flex; align-items: center; justify-content: center; padding: 20px;">
          <img id="detailProductImage" src="/api/placeholder/400/400" 
               class="w-75 h-auto object-fit-contain" alt="Product Image"
               style="transition: transform 0.3s ease; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1)); transform: scale(1.1);">
        </div>

        <!-- Size Selection -->
        <div class="d-flex justify-content-center" style="margin-top: -30px; position: relative; z-index: 10;">
          <div class="d-flex gap-4">
            <button class="size-btn" style="width: 45px; height: 45px; border-radius: 50%; background: white; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; font-weight: 500; transition: all 0.2s ease;">S</button>
            <button class="size-btn active" style="width: 45px; height: 45px; border-radius: 50%; background: white; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; font-weight: 500; transition: all 0.2s ease;">M</button>
            <button class="size-btn" style="width: 45px; height: 45px; border-radius: 50%; background: white; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; font-weight: 500; transition: all 0.2s ease;">L</button>
          </div>
        </div>

        <!-- Product Info -->
        <div class="px-5 py-4">
          <div class="d-flex justify-content-between align-items-start mb-1">
            <h2 id="detailProductName" class="h3 mb-0 fw-bold">5 Pepper</h2>
            <div class="d-flex align-items-center px-3 py-1" style="background: #FFF3D0; border-radius: 12px;">
              <i class="fas fa-star me-1" style="color: #FFB800; font-size: 0.9rem;"></i>
              <span style="font-weight: 600; color: #333;">4.5</span>
            </div>
          </div>
          
          
          <!-- Pricing and Quantity -->
          <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
              <h3 id="detailProductPrice" class="h2 mb-0 fw-bold">$129</h3>
              <span id="detailProductOldPrice" class="text-muted text-decoration-line-through">$169</span>
            </div>
            
            <div class="d-flex align-items-center" style="background: white; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
              <button class="quantity-btn btn px-3 py-2" style="font-size: 1.2rem; font-weight: bold; transition: all 0.2s ease;">−</button>
              <span class="px-3 py-2" style="font-weight: 600; font-size: 1.1rem;">2</span>
              <button class="quantity-btn btn px-3 py-2" style="font-size: 1.2rem; font-weight: bold; transition: all 0.2s ease;">+</button>
            </div>
          </div>
        </div>
        
        
      </div>
    </div>
  </div>
</div>




    <!-- Table Reservation Modal -->
    

<!-- Add this right after the opening <body> tag -->
  <!-- Right after <body> tag -->
<!-- Right after <body> tag -->
<div id="splashScreen" class="splash-screen">
  <div class="splash-content">
    <div class="logo-container">
      <div class="logo-wrapper">
        <!-- Replace the SVG with your image -->
        <img 
          src="../../../static/menu_dashboard/delvrr.JPG" 
          alt="Delvrr Logo" 
          class="logo-image" 
        />
      </div>
    </div>
    <div class="tagline">Developers © Rimsle</div>
    <div class="loading-dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>
</div>












<!-- Beverages Section -->



    <!-- Add an audio element for the click sound -->
    <audio id="clickSound" src="../../../static/menu_dashboard/sounds/click-sound.mp3" preload="auto"></audio>

         

      <!-- Javascript-->
      <!-- Add jQuery library -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <!-- Libs JS -->
      <script src="../../../static/menu_dashboard/libs/jquery/dist/jquery.min.js"></script>
      <script src="../../../static/menu_dashboard/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
      <script src="../../../static/menu_dashboard/libs/simplebar/dist/simplebar.min.js"></script>

      <!-- Theme JS -->
      <script src="../../../static/menu_dashboard/js/theme.min.js"></script>

      <script src="../../../static/menu_dashboard/js/vendors/jquery.min.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/countdown.js"></script>
      <script src="../../../static/menu_dashboard/libs/slick-carousel/slick/slick.min.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/slick-slider.js"></script>
      <script src="../../../static/menu_dashboard/libs/tiny-slider/dist/min/tiny-slider.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/tns-slider.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/zoom.js"></script>
      <script src="../../../static/menu_dashboard/js/sections.js"></script>
      <script src="../../../static/menu_dashboard/js/dinerCount.js"></script>


      <!-- Include other HTML content -->
      <!-- Include jQuery and Bootstrap JS -->
    <!-- Include jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

 <!-- JavaScript for handling cart and shake animation with sound -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  document.body.dataset.userEmail = "{{ request.user.email|default:'' }}";
</script>
<script>
  document.body.dataset.userEmail = "{{ request.user.email|default:'' }}";
</script>
<script type="text/javascript">
  $(document).ready(function () {
    // Initialize the cart object
    let cart = {};

    // Get current user info from the page
    const currentUser = document.body.dataset.userEmail || null;

    // Create toast container if it doesn't exist (bottom left)
    if (!$('#toastContainer').length) {
      $('body').append('<div id="toastContainer" style="position: fixed; bottom: 24px; left: 24px; z-index: 1000;"></div>');
    }

    // Function to get cart with user validation
    function getStoredCart() {
      const storedCart = localStorage.getItem('cart');
      const storedCartUser = localStorage.getItem('cartUser');
      
      if (storedCart && storedCartUser === currentUser) {
        return JSON.parse(storedCart);
      }
      return {};
    }

    // Function to save cart with user association
    function saveCart(cartData) {
      localStorage.setItem('cart', JSON.stringify(cartData));
      localStorage.setItem('cartUser', currentUser);
    }

    // Function to clear cart
    function clearCart() {
      localStorage.removeItem('cart');
      localStorage.removeItem('cartUser');
      cart = {};
      updateCart(cart);
    }

    // Check for logout signal
    if (document.cookie.includes('clear_cart=true')) {
      clearCart();
      // Clear the cookie
      document.cookie = 'clear_cart=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    }

    // Initialize cart from storage with user validation
    cart = getStoredCart();
    updateCart(cart);

    // Function to show product toast
    function showProductToast(product, type = 'success') {
      const toastId = 'toast-' + Date.now();
      const config = {
        success: {
          message: 'Added',
          icon: 'fa-check',
          color: '#f7c028',
          borderColor: '#e9ecef',
          bgColor: '#FFFFFF'
        },
        error: {
          message: 'Removed',
          icon: 'fa-times',
          color: '#f44336',
          borderColor: '#e9ecef',
          bgColor: '#FFFFFF'
        },
        warning: {
          message: 'Updated',
          icon: 'fa-exclamation',
          color: '#ff9800',
          borderColor: '#e9ecef',
          bgColor: '#FFFFFF'
        }
      };

      const toastConfig = config[type];

      // Insert keyframes if not already added
      if (!document.querySelector('#toastKeyframes')) {
        const keyframes = `
          @keyframes slideInLeft {
            0% { transform: translateX(-100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
          }
          @keyframes fadeOutLeft {
            0% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(-100%); opacity: 0; }
          }
          @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            40% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
          }
        `;
        const style = document.createElement('style');
        style.id = 'toastKeyframes';
        style.innerHTML = keyframes;
        document.head.appendChild(style);
      }

      const toast = $(`
        <div id="${toastId}" style="
          width: 180px;
          margin-top: 6px;
          background-color: ${toastConfig.bgColor};
          color: #1F2937;
          padding: 8px;
          border-radius: 6px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          opacity: 0;
          transform: translateX(-100%);
          animation: slideInLeft 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
          border: 1px solid ${toastConfig.borderColor};
          overflow: hidden;
          font-size: 0.8rem;
          display: flex;
          align-items: center;
          gap: 8px;
        ">
          <div style="
            width: 36px;
            height: 36px;
            border-radius: 4px;
            overflow: hidden;
            flex-shrink: 0;
          ">
            ${product.image ? 
              `<img src="${product.image}" style="width: 100%; height: 100%; object-fit: cover;" alt="${product.name}">` : 
              `<div style="width: 100%; height: 100%; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-utensils" style="color: #6c757d;"></i>
              </div>`
            }
          </div>
          
          <div style="flex-grow: 1; display: flex; flex-direction: column;">
            <div style="font-weight: 600; font-size: 0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${product.name}</div>
            <div style="display: flex; align-items: center; gap: 4px;">
              <span style="color: ${toastConfig.color}; font-weight: 600; font-size: 0.75rem; display: flex; align-items: center; gap: 2px;">
                <i class="fas ${toastConfig.icon}" style="font-size: 0.7rem;"></i>
                ${toastConfig.message}
              </span>
            </div>
          </div>
        </div>
      `);

      $('#toastContainer').append(toast);

      // Automatically dismiss after 1.5 seconds
      setTimeout(() => {
        dismissProductToast(toastId);
      }, 1500);
    }

    function dismissProductToast(toastId) {
      const toast = $(`#${toastId}`);
      toast.css({
        'animation': 'fadeOutLeft 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards'
      });
      setTimeout(() => {
        toast.remove();
      }, 200);
    }

    // Function to update the cart content
    function updateCart(cart) {
      let totalItems = 0;
      let subtotal = 0.0;
      let cartItemsHtml = '';

      if (Object.keys(cart).length === 0) {
        $('#cartItems').html(`
          <div class="empty-state">
            <i class="fas fa-shopping-cart fa-2x" style="color: white !important; margin-bottom: 0.75rem;"></i>
            <p style="color: #4B5563; font-size: 0.875rem;">Your cart is empty</p>
          </div>
        `);
        // Update both elements with the number only
        $('[id="cartIconCount"]').text('0').addClass('d-none');
        $('#cartTotal').text('$0.00');
        $('#checkoutButton').addClass('d-none');
        saveCart(cart);
        return;
      }

      for (let itemId in cart) {
        let [quantity, productName, productPrice, productImage] = cart[itemId];
        totalItems += quantity;
        subtotal += quantity * productPrice;

        cartItemsHtml += `
          <div class="cart-item" data-item-id="${itemId}">
            <img src="${productImage}" alt="${productName}" class="cart-item-image">
            <div class="cart-item-details">
              <div class="cart-item-name">${productName}</div>
              <div class="cart-item-price">$${productPrice.toFixed(2)}</div>
              <div class="quantity-controls">
                <button class="quantity-btn decrement" data-product-id="${itemId}" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                </button>
                <span class="quantity-value">${quantity}</span>
                <button class="quantity-btn increment" data-product-id="${itemId}" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                </button>
              </div>
            </div>
            <button class="remove-item" data-product-id="${itemId}" aria-label="Remove item" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18"></path>
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
              </svg>
            </button>
          </div>`;
      }

      $('#cartItems').html(cartItemsHtml);
      // Update both cart display elements with the number only
      $('[id="cartIconCount"]').text(totalItems).removeClass('d-none');
      $('#cartTotal').text(`$${subtotal.toFixed(2)}`);
      $('#checkoutButton').removeClass('d-none');
      saveCart(cart);
      
      // Re-bind event handlers after updating the DOM
      bindCartEvents();
    }
    
    // Function to bind cart event handlers
    function bindCartEvents() {
      // Handle increment button clicks
      $('.increment').off('click').on('click', function() {
        const productId = $(this).data('product-id');
        if (!cart[productId]) return;
        
        const productName = cart[productId][1];
        const productPrice = cart[productId][2];
        const productImage = cart[productId][3];
        
        cart[productId][0]++;
        
        showProductToast({
          name: productName,
          image: productImage,
          price: '$' + productPrice.toFixed(2)
        }, 'success');
        
        updateCart(cart);
      });
      
      // Handle decrement button clicks
      $('.decrement').off('click').on('click', function() {
        const productId = $(this).data('product-id');
        if (!cart[productId]) return;
        
        const productName = cart[productId][1];
        const productPrice = cart[productId][2];
        const productImage = cart[productId][3];
        
        const productObject = {
          name: productName,
          image: productImage,
          price: '$' + productPrice.toFixed(2)
        };
        
        if (cart[productId][0] > 1) {
          cart[productId][0]--;
          showProductToast(productObject, 'warning');
        } else {
          delete cart[productId];
          showProductToast(productObject, 'error');
        }
        
        updateCart(cart);
      });
      
      // Handle remove item button clicks
      $('.remove-item').off('click').on('click', function() {
        const productId = $(this).data('product-id');
        if (!cart[productId]) return;
        
        const productName = cart[productId][1];
        const productPrice = cart[productId][2];
        const productImage = cart[productId][3];
        
        showProductToast({
          name: productName,
          image: productImage,
          price: '$' + productPrice.toFixed(2)
        }, 'error');
        
        delete cart[productId];
        updateCart(cart);
      });
    }

    // Handle add-to-cart button clicks from product cards
    $(document).on('click', '.add-to-cart-btn, .add-to-cart', function (e) {
      e.preventDefault();
      
      // Find the closest product container (dish-card or food-item)
      const productCard = $(this).closest('.dish-card, .food-item');
      const productId = productCard.data('product-id');
      const productName = productCard.data('name');
      const productPrice = parseFloat(productCard.data('price'));
      const productImage = productCard.data('image');

      // Check if we got all the required data
      if (!productId || !productName || isNaN(productPrice) || !productImage) {
        console.error('Missing product data:', { productId, productName, productPrice, productImage });
        return;
      }

      const productObject = {
        id: productId,
        name: productName,
        price: '$' + productPrice.toFixed(2),
        image: productImage
      };

      showProductToast(productObject, 'success');

      if (!cart[productId]) {
        cart[productId] = [1, productName, productPrice, productImage];
      } else {
        cart[productId][0]++;
      }

      updateCart(cart);
    });

    // Handle checkout button click
    $('#checkoutButton').off('click').on('click', function () {
      if (!currentUser) {
        window.location.href = '/customer-signin/';
        return;
      }

      if (Object.keys(cart).length === 0) {
        showProductToast({
          name: 'Your cart is empty!',
          image: null
        }, 'error');
        return;
      }

      // Get restaurant name slug and hashed slug from the current URL
      const pathParts = window.location.pathname.split('/').filter(Boolean);
      if (pathParts.length >= 2) {
        const restaurantNameSlug = pathParts[pathParts.length - 2];
        const hashedSlug = pathParts[pathParts.length - 1];
        
        saveCart(cart);
        window.location.href = `/${restaurantNameSlug}/${hashedSlug}/checkout/`;
      } else {
        console.error('Unable to determine restaurant slugs from URL');
        showProductToast({
          name: 'Error: Unable to checkout',
          image: null
        }, 'error');
      }
    });
    
    // Initial binding of event handlers
    bindCartEvents();
  });
</script>









<!-- <script>
// Enhanced Navigation Behavior
document.addEventListener('DOMContentLoaded', function() {
    // Navigation setup
    const navItems = document.querySelectorAll('.text-inherit');
    const highlight = document.querySelector('.nav-pill-highlight');

    navItems.forEach((item, index) => {
        item.addEventListener('click', (e) => {
            // Skip if it's the cart icon (to maintain offcanvas functionality)
            if (!item.hasAttribute('data-bs-toggle')) {
                e.preventDefault();
                
                // Remove active class from all items
                navItems.forEach(i => i.classList.remove('active'));
                
                // Add active class to clicked item
                item.classList.add('active');
                
                // Move highlight pill
                highlight.style.transform = `translateX(${index * 100}%)`;
            }
        });
    });

    // Scroll behavior
    let lastScrollY = window.scrollY;
    let scrollTimer = null;
    
    const handleScroll = () => {
        const currentScrollY = window.scrollY;
        const bottomNav = document.querySelector('.fixed-bottom-icons');
        
        // Clear existing timer
        if (scrollTimer !== null) {
            clearTimeout(scrollTimer);
        }

        // Show/hide based on scroll direction
        if (currentScrollY > lastScrollY && currentScrollY > 50) {
            bottomNav.classList.add('hidden');
        } else {
            bottomNav.classList.remove('hidden');
        }

        // Set timer to show elements after scrolling stops
        scrollTimer = setTimeout(() => {
            bottomNav.classList.remove('hidden');
        }, 1000);

        lastScrollY = currentScrollY;
    };

    // Throttle scroll event
    let ticking = false;
    window.addEventListener('scroll', () => {
        if (!ticking) {
            window.requestAnimationFrame(() => {
                handleScroll();
                ticking = false;
            });
            ticking = true;
        }
    });

    // Set initial active state
    if (!document.querySelector('.text-inherit.active')) {
        navItems[0].classList.add('active');
    }
});
</script> -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Cache DOM elements
    const ordersIcon = document.getElementById('ordersIcon');
    const ordersModal = document.getElementById('ordersFullscreen');
    const chatMessages = document.querySelector('.chat-messages');
    const messageInput = document.querySelector('#messageInput');
    const sendButton = document.querySelector('#sendButton');

    // Set up modal triggers
    ordersIcon.setAttribute('data-bs-toggle', 'modal');
    ordersIcon.setAttribute('data-bs-target', '#ordersFullscreen');

    // Handle modal events
    ordersModal.addEventListener('hidden.bs.modal', function () {
        document.getElementById('ourDishSection').style.display = 'block';
    });

    ordersModal.addEventListener('shown.bs.modal', function () {
        document.getElementById('ourDishSection').style.display = 'none';
        scrollToBottom();
        messageInput.focus();
    });

    // Scroll to bottom function
    function scrollToBottom() {
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Create message HTML without timestamp
    function createMessageHTML(message, type = 'customer') {       
        if (type === 'customer') {
            return `
                <div class="message customer-message">
                    <div class="message-content">
                        <p>${message}</p>
                    </div>
                </div>
            `;
        }
        
        return `
            <div class="message restaurant-message">
                <div class="message-content">
                    <div class="sender-name mb-1 text-muted small">Restaurant Staff</div>
                    <p>${message}</p>
                </div>
            </div>
        `;
    }

    // Send message function
    function sendMessage() {
        const message = messageInput.value.trim();
        if (message) {
            // Add customer message
            chatMessages.insertAdjacentHTML('beforeend', createMessageHTML(message));
            messageInput.value = '';
            scrollToBottom();
            
            // Simulate restaurant response after a delay
            setTimeout(() => {
                const responses = [
                    "We've noted your request. Your order will be prepared accordingly.",
                    "Thank you for letting us know. We'll take care of that.",
                    "Got it! We'll add that to your order.",
                    "Your request has been passed to the kitchen."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                chatMessages.insertAdjacentHTML('beforeend', createMessageHTML(randomResponse, 'restaurant'));
                scrollToBottom();
            }, 1000);
        }
    }

    // Event listeners
    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
        }
    });

    // Handle message input animations
    messageInput.addEventListener('focus', function() {
        this.closest('.input-group').style.boxShadow = '0 0 0 2px rgba(255, 193, 7, 0.25)';
    });

    messageInput.addEventListener('blur', function() {
        this.closest('.input-group').style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Product detail modal handling
    const productCards = document.querySelectorAll('.food-item');
    const productDetailModal = new bootstrap.Modal(document.getElementById('productDetailModal'));
    
    // Add keyframe animations and styles
    const style = document.createElement('style');
    style.textContent = `
        @keyframes modalImageZoom {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1.1); opacity: 1; }
        }
        @keyframes modalContentSlide {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal-image-animate {
            animation: modalImageZoom 0.4s ease-out forwards;
        }
        .modal-content-animate {
            animation: modalContentSlide 0.4s ease-out forwards;
        }
        
        /* Size button active state */
        .size-btn.active {
            background: #FFD384 !important;
            color: #000;
            font-weight: 600;
            transform: scale(1.05);
        }
        
        .size-btn:hover, .quantity-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }
        
        .size-btn:active, .quantity-btn:active {
            transform: translateY(1px);
        }
    `;
    document.head.appendChild(style);

    // Size button selection
    const sizeButtons = document.querySelectorAll('.size-btn');
    sizeButtons.forEach(button => {
        button.addEventListener('click', function() {
            sizeButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Quantity control
    const minusBtn = document.querySelector('.quantity-btn:first-child');
    const plusBtn = document.querySelector('.quantity-btn:last-child');
    const quantityDisplay = document.querySelector('.quantity-btn + span');
    let quantity = 2;
    
    if (minusBtn && plusBtn && quantityDisplay) {
        minusBtn.addEventListener('click', function() {
            if (quantity > 1) {
                quantity--;
                quantityDisplay.textContent = quantity;
            }
        });
        
        plusBtn.addEventListener('click', function() {
            quantity++;
            quantityDisplay.textContent = quantity;
        });
    }

    productCards.forEach(card => {
        const imageTrigger = card.querySelector('.product-image-trigger');
        if (imageTrigger) {
            imageTrigger.addEventListener('click', function() {
                const productData = {
                    id: card.dataset.productId,
                    name: card.dataset.name || "5 Pepper",
                    description: card.dataset.description || "Mixed Pizza",
                    price: card.dataset.price ? `$${card.dataset.price}` : "$129",
                    previousPrice: card.dataset.previousPrice ? `$${card.dataset.previousPrice}` : "$169",
                    image: card.dataset.image || "/api/placeholder/400/400"
                };

                // Populate modal with animations
                const detailImage = document.getElementById('detailProductImage');
                const modalContent = document.querySelector('.modal-content');
                
                detailImage.src = productData.image;
                detailImage.classList.add('modal-image-animate');
                modalContent.classList.add('modal-content-animate');
                
                document.getElementById('detailProductName').textContent = productData.name;
                document.getElementById('detailProductPrice').textContent = productData.price;
                document.getElementById('detailProductOldPrice').textContent = productData.previousPrice;
                
                // Reset quantity
                quantity = 2;
                if (quantityDisplay) {
                    quantityDisplay.textContent = quantity;
                }
                
                // Show modal
                productDetailModal.show();
            });
        }
    });
    
    // Clean up animations when modal is hidden
    document.getElementById('productDetailModal').addEventListener('hidden.bs.modal', function () {
        document.getElementById('detailProductImage').classList.remove('modal-image-animate');
        document.querySelector('.modal-content').classList.remove('modal-content-animate');
    });
});
</script>
 

<!-- ===============================
     JAVASCRIPT TO TOGGLE SECTIONS
=============================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Select all main sections using the common class
    const sections = document.querySelectorAll('.menu-app-container');
    // Select all navigation icons from the bottom nav
    const navIcons = document.querySelectorAll('.bottom-nav .nav-item-wrapper a');

    // Function to hide all sections by adding the .hidden class
    function hideAllSections() {
      sections.forEach(section => section.classList.add('hidden'));
    }

    // Function to show a specific section by removing the .hidden class
    function showSection(sectionId) {
      hideAllSections();
      const section = document.getElementById(sectionId);
      if (section) {
        section.classList.remove('hidden');
      }
    }

    // Function to reset the active state of nav icons
    function resetActiveStates() {
      navIcons.forEach(icon => {
        icon.classList.remove('active');
        const label = icon.querySelector('.nav-label');
        if (label) {
          label.classList.remove('active');
        }
      });
    }

    // Initialize: show the menuSection by default and set the Home icon as active
    hideAllSections();
    showSection('menuSection');
    document.getElementById('ourDishIcon').classList.add('active');
    document.querySelector('#ourDishIcon .nav-label').classList.add('active');

    // Add click event handlers to the navigation icons
    navIcons.forEach(icon => {
      icon.addEventListener('click', function(e) {
        e.preventDefault(); // Prevent default anchor behavior
        const targetSection = this.getAttribute('data-target') || 'menuSection';
        resetActiveStates();
        showSection(targetSection);
        this.classList.add('active');
        const label = this.querySelector('.nav-label');
        if (label) {
          label.classList.add('active');
        }
      });
    });

    // When the Orders modal is closed (via the X button), revert back to the Home section.
    // This uses Bootstrap's "hidden.bs.modal" event.
    var ordersModalEl = document.getElementById('ordersFullscreen');
    if (ordersModalEl) {
      ordersModalEl.addEventListener('hidden.bs.modal', function() {
        resetActiveStates();
        showSection('menuSection');
        const homeIcon = document.getElementById('ourDishIcon');
        homeIcon.classList.add('active');
        const homeLabel = homeIcon.querySelector('.nav-label');
        if (homeLabel) {
          homeLabel.classList.add('active');
        }
      });
    }
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const splashScreen = document.getElementById('splashScreen');
    
    // Show splash screen for 3 seconds, then fade out
    setTimeout(() => {
      splashScreen.classList.add('fade-out');
      setTimeout(() => {
        splashScreen.remove();
      }, 500);
    }, 3000);
  });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const categoryScroll = document.querySelector('.category-scroll');
        const categoryButtons = document.querySelectorAll('.category-btn');
        
        // Handle button click
        categoryButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Scroll into view (centered)
                const scrollContainer = categoryScroll;
                const buttonLeft = this.offsetLeft;
                const buttonWidth = this.offsetWidth;
                const containerWidth = scrollContainer.clientWidth;
                
                const targetScrollLeft = buttonLeft - (containerWidth / 2) + (buttonWidth / 2);
                scrollContainer.scrollTo({ left: targetScrollLeft, behavior: 'smooth' });
                
                // Handle category change logic here
                const categoryName = this.dataset.category;
                // Your category change logic...
            });
        });
        
        // Mouse drag scrolling
        let isDown = false;
        let startX;
        let scrollLeft;
        
        categoryScroll.addEventListener('mousedown', (e) => {
            isDown = true;
            categoryScroll.classList.add('dragging');
            startX = e.pageX - categoryScroll.offsetLeft;
            scrollLeft = categoryScroll.scrollLeft;
        });
        
        categoryScroll.addEventListener('mouseleave', () => {
            isDown = false;
            categoryScroll.classList.remove('dragging');
        });
        
        categoryScroll.addEventListener('mouseup', () => {
            isDown = false;
            categoryScroll.classList.remove('dragging');
        });
        
        categoryScroll.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - categoryScroll.offsetLeft;
            const walk = (x - startX) * 1.5; // Scroll speed multiplier
            categoryScroll.scrollLeft = scrollLeft - walk;
        });
        
        // Touch drag scrolling (mobile)
        let touchStartX;
        let touchScrollLeft;
        
        categoryScroll.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].pageX - categoryScroll.offsetLeft;
            touchScrollLeft = categoryScroll.scrollLeft;
        }, { passive: true });
        
        categoryScroll.addEventListener('touchmove', (e) => {
            const x = e.touches[0].pageX - categoryScroll.offsetLeft;
            const walk = (x - touchStartX) * 1.5;
            categoryScroll.scrollLeft = touchScrollLeft - walk;
        }, { passive: true });
        
        // Auto-scroll to active button on page load
        const activeButton = document.querySelector('.category-btn.active');
        if (activeButton) {
            const scrollContainer = categoryScroll;
            const buttonLeft = activeButton.offsetLeft;
            const buttonWidth = activeButton.offsetWidth;
            const containerWidth = scrollContainer.clientWidth;
            
            // Center the active button
            const targetScrollLeft = buttonLeft - (containerWidth / 2) + (buttonWidth / 2);
            scrollContainer.scrollLeft = targetScrollLeft;
        }
    });
    </script>

<!-- Search features -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // ===== 1. Add Keyframe Animations for Modal =====
  const modalStyle = document.createElement('style');
  modalStyle.textContent = `
    @keyframes modalImageZoom {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    @keyframes modalContentSlide {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .modal-image-animate {
      animation: modalImageZoom 0.3s ease-out forwards;
    }
    .modal-content-animate {
      animation: modalContentSlide 0.3s ease-out forwards;
    }
  `;
  document.head.appendChild(modalStyle);

  // ===== 2. Utility: Show Product Detail Modal =====
  function showProductDetail(productData) {
    const productDetailModalInstance = new bootstrap.Modal(document.getElementById('productDetailModal'));
    const detailImage = document.getElementById('detailProductImage');
    const detailContent = document.querySelector('.card-body');
    
    // Populate modal elements
    detailImage.src = productData.image;
    detailImage.classList.add('modal-image-animate');
    detailContent.classList.add('modal-content-animate');
    
    document.getElementById('detailProductName').textContent = productData.name;
    document.getElementById('detailProductDescription').textContent = productData.description;
    document.getElementById('detailProductPrice').textContent = productData.price;
    
    const oldPriceElement = document.getElementById('detailProductOldPrice');
    if(productData.previousPrice) {
      oldPriceElement.textContent = productData.previousPrice;
      oldPriceElement.style.textDecoration = 'line-through';
      oldPriceElement.style.color = '#666';
    } else {
      oldPriceElement.textContent = '';
    }
    
    productDetailModalInstance.show();
    
    // Clean up animation classes when animations end
    detailImage.addEventListener('animationend', () => {
       detailImage.classList.remove('modal-image-animate');
    });
    detailContent.addEventListener('animationend', () => {
       detailContent.classList.remove('modal-content-animate');
    });
  }

  // ===== 3. Attach Product Detail Modal to Carousel Items =====
  document.querySelectorAll('.food-item').forEach(item => {
    item.addEventListener('click', function(e) {
      // Prevent modal from triggering when clicking the add-to-cart button
      if (e.target.closest('.add-to-cart')) return;
      
      const productData = {
        id: item.dataset.productId,
        name: item.dataset.name,
        description: item.dataset.description || '',
        price: `$${item.dataset.price}`,
        previousPrice: item.dataset.previousPrice ? `$${item.dataset.previousPrice}` : '',
        image: item.dataset.image
      };
      
      showProductDetail(productData);
    });
  });

  // ===== 4. View Toggle Functionality =====
  const featuredSection = document.querySelector('.featured-section');
  const productGridContainer = document.getElementById('productGridContainer');
  const productGrid = document.getElementById('productGrid');
  const viewAllButton = document.querySelector('.view-all');
  const backButton = document.querySelector('.back-to-carousel');

  // Helper: Extract products from carousel using dataset attributes
  function extractProductsFromCarousel() {
    const foodItems = document.querySelectorAll('.food-item');
    return Array.from(foodItems).map(item => {
      return {
        id: item.dataset.productId,
        name: item.dataset.name,
        description: item.dataset.description || '',
        price: item.dataset.price,
        previousPrice: item.dataset.previousPrice,
        image: item.dataset.image,
        status: item.querySelector('.discount-badge') ? 'Sale' : 'Regular',
        category: item.dataset.category  // used for filtering
      };
    });
  }

  // Helper: Create grid view items
  function createGridView(products) {
    productGrid.innerHTML = '';
    products.forEach(product => {
      const gridItem = document.createElement('div');
      gridItem.className = 'grid-item';
      gridItem.dataset.productId = product.id;
      gridItem.dataset.category = product.category;
      gridItem.dataset.name = product.name;
      gridItem.dataset.description = product.description;
      gridItem.dataset.price = product.price;
      gridItem.dataset.previousPrice = product.previousPrice;
      gridItem.dataset.image = product.image;
      
      const isOnSale = product.status === 'Sale';
      gridItem.innerHTML = `
        <div class="grid-image-container">
          ${isOnSale ? '<span class="discount-badge">Sale</span>' : ''}
          <img src="${product.image}" alt="${product.name}" class="grid-image">
        </div>
        <div class="grid-details">
          <h3>${product.name}</h3>
          <div class="rating">
            <i class="fas fa-star"></i>
            <span>4.9</span>
            <span class="review-count">(203)</span>
          </div>
          <div class="price-row">
            <div class="price">
              <span>$${product.price}</span>
              ${product.previousPrice ? `<span class="previous-price" style="text-decoration: line-through; font-size: 12px; color: var(--text-secondary); margin-left: 4px;">$${product.previousPrice}</span>` : ''}
            </div>
            <button class="add-to-cart" data-product-id="${product.id}" data-name="${product.name}" data-price="${product.price}" data-image="${product.image}">
              <i class="fas fa-shopping-cart"></i>
            </button>
          </div>
        </div>
      `;
      
      productGrid.appendChild(gridItem);

      // Attach modal detail handler to grid item
      gridItem.addEventListener('click', function(e) {
        if(e.target.closest('.add-to-cart')) return;
        const productData = {
          id: product.id,
          name: product.name,
          description: product.description,
          price: `$${product.price}`,
          previousPrice: product.previousPrice ? `$${product.previousPrice}` : '',
          image: product.image
        };
        showProductDetail(productData);
      });
    });
  }

  // Helper: Determine which view is active by checking computed style
  const getActiveItems = () => {
    if (featuredSection && window.getComputedStyle(featuredSection).display !== 'none') {
      // Carousel view: look for food items inside the featured section
      return document.querySelectorAll('.featured-section .food-item');
    } else {
      // Grid view: use grid items
      return document.querySelectorAll('.grid-item');
    }
  };

  // ===== 5. Category Filter and Search Functionality - IMPROVED =====
  const categoryButtons = document.querySelectorAll('.category-btn');
  const searchInput = document.querySelector('.search-input');
  const searchDropdown = document.querySelector('.search-results-dropdown');
  const searchResultsContent = document.querySelector('.search-results-content');

  // Special handling: Check if we're on restaurant ID 9 (no featured button)
  const featuredButton = document.querySelector('[data-category="featured"]');
  const isRestaurantId9 = !featuredButton;
  let lastSelectedCategory = 'featured';
  if (isRestaurantId9) {
    const activeButton = document.querySelector('.category-btn.active');
    if (activeButton) {
      lastSelectedCategory = activeButton.dataset.category.toLowerCase();
    }
  }

  // Filter items based on category selection
  function filterItemsByCategory(categoryName) {
    const activeItems = getActiveItems();
    activeItems.forEach(item => {
      const itemCategory = (item.dataset.category || '').toLowerCase();
      if (isRestaurantId9) {
        // For restaurant ID 9: only show exact matches
        item.style.display = (itemCategory === categoryName.toLowerCase()) ? '' : 'none';
      } else {
        // For others: if 'featured', show all; otherwise match category
        item.style.display = (categoryName === 'featured' || itemCategory === categoryName.toLowerCase()) ? '' : 'none';
      }
    });
  }

  // Category button click handler
  function handleCategoryClick(button) {
    categoryButtons.forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');
    lastSelectedCategory = button.dataset.category.toLowerCase();
    filterItemsByCategory(lastSelectedCategory);
    
    // Scroll the category button into view when selected
    button.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    
    if (searchDropdown) searchDropdown.style.display = 'none';
    
    // Update the indicator in the filter dropdown
    updateFilterDropdownIndicator(lastSelectedCategory);
  }
  
  categoryButtons.forEach(button => {
    button.addEventListener('click', () => handleCategoryClick(button));
  });

  // Function to update the indicator in the filter dropdown
  function updateFilterDropdownIndicator(selectedCategory) {
    const dropdownItems = document.querySelectorAll('.filter-dropdown li');
    dropdownItems.forEach(li => {
      const categoryNameElement = li.querySelector('.category-name');
      const categoryName = categoryNameElement ? categoryNameElement.textContent.toLowerCase() : '';
      
      // Remove existing active indicator
      const existingIndicator = li.querySelector('.active-indicator');
      if (existingIndicator) {
        existingIndicator.remove();
      }
      
      // Reset styles
      li.style.backgroundColor = '';
      li.style.fontWeight = '';
      li.style.color = '';
      
      // If this is the selected category, add the indicator and styles
      if (categoryName === selectedCategory) {
        // Add active indicator
        const activeIndicator = document.createElement('span');
        activeIndicator.className = 'active-indicator';
        activeIndicator.innerHTML = '<i class="fas fa-check"></i>';
        activeIndicator.style.cssText = `
          margin-left: auto;
          color: #4682B4;
          font-size: 12px;
        `;
        li.appendChild(activeIndicator);
        
        // Update styles
        li.style.backgroundColor = 'rgba(70, 130, 255, 0.08)';
        li.style.fontWeight = '500';
        li.style.color = '#4682B4';
        
        // Scroll this item into view in the dropdown
        li.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
      
      // Update hover effects
      li.addEventListener('mouseover', () => {
        li.style.backgroundColor = categoryName === selectedCategory ? 
          'rgba(70, 130, 255, 0.12)' : 'rgba(0, 0, 0, 0.03)';
      });
      
      li.addEventListener('mouseout', () => {
        li.style.backgroundColor = categoryName === selectedCategory ? 
          'rgba(70, 130, 255, 0.08)' : '';
      });
    });
  }

  // ===== 5.1. Filter Button Styling =====
  const filterButton = document.querySelector('.filter-button');
  // Apply enhanced filter button styling
  if (filterButton) {
    filterButton.style.cssText = `
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
    `;

    // Add active state with event listeners
    filterButton.addEventListener('mousedown', () => {
      filterButton.style.transform = 'scale(0.95)';
    });

    filterButton.addEventListener('mouseup', () => {
      filterButton.style.transform = '';
    });

    // Style the icon if it exists
    const filterIcon = filterButton.querySelector('i');
    if (filterIcon) {
      filterIcon.style.cssText = `
        font-size: 16px;
        color: #fff;
      `;
    }
  }

  // ===== 5.2. Filter Dropdown for Categories - IMPROVED =====
  // First, remove any existing dropdown to prevent duplicates
  const existingDropdown = document.querySelector('.filter-dropdown');
  if (existingDropdown) {
    existingDropdown.remove();
  }

  // Create a dropdown container for filter options
  const filterDropdown = document.createElement('div');
  filterDropdown.className = 'filter-dropdown';
  filterDropdown.style.cssText = `
    display: none;
    position: fixed;
    background-color: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.18);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
    border-radius: 16px;
    padding: 8px 0;
    z-index: 9999;
    width: 200px;
    max-height: 70vh;
    overflow-y: auto;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transform-origin: top center;
  `;

  // Create an unordered list to hold category options
  const filterList = document.createElement('ul');
  filterList.style.cssText = `
    list-style: none;
    margin: 0;
    padding: 0;
  `;

  // Add heading to the dropdown
  const filterHeading = document.createElement('div');
  filterHeading.textContent = 'Filter by Category';
  filterHeading.style.cssText = `
    padding: 12px 16px;
    font-weight: 600;
    font-size: 15px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    margin-bottom: 6px;
    color: #333;
    display: flex;
    align-items: center;
  `;

  // Add filter icon to heading
  const filterIcon = document.createElement('span');
  filterIcon.innerHTML = '<i class="fas fa-sliders-h"></i>';
  filterIcon.style.cssText = `
    margin-right: 8px;
    color: #4682B4;
    font-size: 14px;
  `;
  filterHeading.prepend(filterIcon);

  filterDropdown.appendChild(filterHeading);

  // Populate the list using your category buttons
  categoryButtons.forEach(button => {
    const li = document.createElement('li');
    const categoryName = button.dataset.category;
    const categoryEmoji = button.querySelector('.category-icon')?.textContent.trim() || '';
    const isActive = categoryName.toLowerCase() === lastSelectedCategory;
    
    li.innerHTML = `
      <span class="category-emoji">${categoryEmoji}</span>
      <span class="category-name">${categoryName}</span>
      ${isActive ? '<span class="active-indicator"><i class="fas fa-check"></i></span>' : ''}
    `;
    
    li.style.cssText = `
      padding: 12px 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      margin: 2px 6px;
      border-radius: 8px;
      ${isActive ? 'background-color: rgba(70, 130, 255, 0.08);' : ''}
      ${isActive ? 'font-weight: 500;' : ''}
      ${isActive ? 'color: #4682B4;' : ''}
    `;
    
    // Add active indicator styling if this is the selected category
    if (isActive) {
      const activeIndicator = li.querySelector('.active-indicator');
      if (activeIndicator) {
        activeIndicator.style.cssText = `
          margin-left: auto;
          color: #4682B4;
          font-size: 12px;
        `;
      }
    }
    
    li.addEventListener('click', () => {
      const targetButton = Array.from(categoryButtons).find(
        btn => btn.dataset.category === categoryName
      );
      
      if (targetButton) {
        handleCategoryClick(targetButton);
      }
      
      filterDropdown.style.display = 'none';
      filterButton.classList.remove('active');
      
      // Add ripple effect to the clicked item
      const ripple = document.createElement('span');
      ripple.style.cssText = `
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 5px;
        background: rgba(70, 130, 255, 0.3);
        opacity: 0;
        border-radius: 100%;
        transform: scale(1, 1) translate(-50%, -50%);
        transform-origin: 50% 50%;
        animation: ripple 0.6s ease-out;
      `;
      li.appendChild(ripple);
      setTimeout(() => ripple.remove(), 600);
    });
    
    li.addEventListener('mouseover', () => {
      li.style.backgroundColor = isActive ? 'rgba(70, 130, 255, 0.12)' : 'rgba(0, 0, 0, 0.03)';
    });
    
    li.addEventListener('mouseout', () => {
      li.style.backgroundColor = isActive ? 'rgba(70, 130, 255, 0.08)' : '';
    });
    
    filterList.appendChild(li);
  });
  filterDropdown.appendChild(filterList);

  // Add a ripple animation keyframe if it doesn't exist
  if (!document.querySelector('style#ripple-animation')) {
    const rippleStyle = document.createElement('style');
    rippleStyle.id = 'ripple-animation';
    rippleStyle.textContent = `
      @keyframes ripple {
        0% {
          transform: scale(0, 0);
          opacity: 0.5;
        }
        100% {
          transform: scale(40, 40);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(rippleStyle);
  }

  // Append the dropdown to the body for better positioning
  document.body.appendChild(filterDropdown);

  // Function to position the dropdown based on filter button location
  function positionDropdown() {
    if (!filterButton) return;
    
    const buttonRect = filterButton.getBoundingClientRect();
    
    // Position dropdown below the button
    filterDropdown.style.top = `${buttonRect.bottom + window.scrollY + 10}px`;
    filterDropdown.style.left = `${buttonRect.left + window.scrollX - 5}px`;
    
    // Adjust if overflowing right edge of viewport
    const dropdownWidth = 200; // Width of the dropdown
    if (buttonRect.left + dropdownWidth > window.innerWidth) {
      filterDropdown.style.left = `${buttonRect.right + window.scrollX - dropdownWidth + 5}px`;
    }
  }

  // Toggle dropdown visibility with improved animation and positioning
  if (filterButton) {
    filterButton.addEventListener('click', (e) => {
      e.stopPropagation();
      
      if (filterDropdown.style.display === 'none') {
        // Position the dropdown before showing
        positionDropdown();
        
        // Show with animation
        filterDropdown.style.display = 'block';
        filterDropdown.style.opacity = '0';
        filterDropdown.style.transform = 'translateY(-10px) scale(0.98)';
        
        setTimeout(() => {
          filterDropdown.style.transition = 'opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1), transform 0.25s cubic-bezier(0.4, 0, 0.2, 1)';
          filterDropdown.style.opacity = '1';
          filterDropdown.style.transform = 'translateY(0) scale(1)';
        }, 10);
        
        // Add active class to filter button
        filterButton.classList.add('active');
      } else {
        // Hide with animation
        filterDropdown.style.opacity = '0';
        filterDropdown.style.transform = 'translateY(-10px) scale(0.98)';
        
        setTimeout(() => {
          filterDropdown.style.display = 'none';
          filterDropdown.style.transition = '';
        }, 250);
        
        // Remove active class from filter button
        filterButton.classList.remove('active');
      }
    });
  }

  // Update dropdown position on window resize
  window.addEventListener('resize', () => {
    if (filterDropdown.style.display !== 'none') {
      positionDropdown();
    }
  });

  // Hide the filter dropdown when clicking outside of it
  document.addEventListener('click', (e) => {
    if (filterButton && !filterButton.contains(e.target) && !filterDropdown.contains(e.target)) {
      filterDropdown.style.display = 'none';
      filterDropdown.style.transition = '';
      filterButton.classList.remove('active');
    }
  });

  // ===== 5.3. Helper: Create search result item element - IMPROVED =====
  function createSearchResultItem(item) {
    const name = item.dataset.name || '';
    const category = item.dataset.category || '';
    const image = item.dataset.image || '';
    const div = document.createElement('div');
    div.className = 'search-result-item';
    div.innerHTML = `
      <img src="${image}" alt="${name}" class="search-result-image">
      <div class="search-result-info">
        <div class="search-result-name">${name}</div>
        <div class="search-result-category">${category}</div>
      </div>
    `;
    
    // When clicked, check if the product category is different from the active category.
    // If so, trigger a category switch before scrolling to and highlighting the item.
    div.addEventListener('click', () => {
      const searchCategory = category.toLowerCase();
      if (searchCategory !== lastSelectedCategory) {
        // Find the button that matches the search result's category
        const targetButton = Array.from(categoryButtons).find(
          btn => (btn.dataset.category || '').toLowerCase() === searchCategory
        );
        if (targetButton) {
          // Switch to the new category and make sure it's visible
          handleCategoryClick(targetButton);
        }
      }
      
      // Scroll to the item and highlight it
      setTimeout(() => {
        item.scrollIntoView({ behavior: 'smooth', block: 'center' });
        // Add highlighting effect
        item.style.transition = 'transform 0.3s ease';
        item.style.transform = 'scale(1.02)';
        setTimeout(() => { item.style.transform = ''; }, 300);
      }, 100);
      
      if (searchDropdown) searchDropdown.style.display = 'none';
      if (searchInput) searchInput.value = '';
    });
    
    return div;
  }

  // ===== 5.4. Search Functionality - IMPROVED =====
  if (searchInput && searchDropdown && searchResultsContent) {
    searchInput.addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase().trim();
      if (searchTerm === '') {
        searchDropdown.style.display = 'none';
        filterItemsByCategory(lastSelectedCategory);
        return;
      }
      
      searchResultsContent.innerHTML = '';
      let matches = 0;
      const activeItems = getActiveItems();
      
      activeItems.forEach(item => {
        const name = (item.dataset.name || '').toLowerCase();
        const itemCategory = (item.dataset.category || '').toLowerCase();
        if (name.includes(searchTerm) || itemCategory.includes(searchTerm)) {
          matches++;
          searchResultsContent.appendChild(createSearchResultItem(item));
        }
      });
      
      if (matches === 0) {
        searchResultsContent.innerHTML = `<div class="no-results-message">No results found for "${searchTerm}"</div>`;
      }
      
      searchDropdown.style.display = 'block';
    });
    
    // Hide the search dropdown when clicking outside
    document.addEventListener('click', function(e) {
      if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
        searchDropdown.style.display = 'none';
      }
    });
  }

  // ===== 6. Toggle from Carousel to Grid View =====
  if (viewAllButton) {
    viewAllButton.addEventListener('click', function() {
      const products = extractProductsFromCarousel();
      createGridView(products);
      
      featuredSection.classList.add('fade-out');
      
      setTimeout(() => {
        featuredSection.style.display = 'none';
        productGridContainer.style.display = 'block';
        productGridContainer.classList.add('fade-in');
        
        // Scroll to top and apply the last category filter in grid view
        window.scrollTo(0, 0);
        filterItemsByCategory(lastSelectedCategory);
        
        setTimeout(() => {
          productGridContainer.classList.remove('fade-in');
        }, 300);
      }, 300);
    });
  }
  
  // ===== 7. Toggle Back from Grid to Carousel View =====
  if (backButton) {
    backButton.addEventListener('click', function() {
      productGridContainer.classList.add('fade-out');
      
      setTimeout(() => {
        productGridContainer.style.display = 'none';
        featuredSection.style.display = 'block';
        featuredSection.classList.add('fade-in');
        
        // Update the active category button in the carousel view
        const buttonToActivate = Array.from(categoryButtons).find(
          btn => btn.dataset.category.toLowerCase() === lastSelectedCategory
        );
        if (buttonToActivate) {
          categoryButtons.forEach(btn => btn.classList.remove('active'));
          buttonToActivate.classList.add('active');
          
          // Make sure the active button is visible
          setTimeout(() => {
            buttonToActivate.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            filterItemsByCategory(lastSelectedCategory);
          }, 100);
        }
        
        setTimeout(() => {
          featuredSection.classList.remove('fade-in', 'fade-out');
          productGridContainer.classList.remove('fade-out');
        }, 300);
      }, 300);
    });
  }
  
  // ===== 8. Handle Add-to-Cart for Grid Items =====
  productGrid.addEventListener('click', function(e) {
    if (e.target.closest('.add-to-cart')) {
      const button = e.target.closest('.add-to-cart');
      const productId = button.dataset.productId;
      const productName = button.dataset.name;
      const productPrice = button.dataset.price;
      
      if (typeof addToCart === 'function') {
        addToCart(productId, productName, productPrice);
      } else {
        console.log('Adding to cart:', productName);
        button.classList.add('added');
        setTimeout(() => {
          button.classList.remove('added');
        }, 300);
      }
    }
  });

  // ===== 9. Initialization: Set Default Category Filtering - IMPROVED =====
  if (!isRestaurantId9 && featuredButton) {
    categoryButtons.forEach(btn => btn.classList.remove('active'));
    featuredButton.classList.add('active');
    lastSelectedCategory = 'featured';
  } else if (isRestaurantId9) {
    const activeButton = document.querySelector('.category-btn.active');
    if (activeButton) {
      lastSelectedCategory = activeButton.dataset.category.toLowerCase();
      filterItemsByCategory(lastSelectedCategory);
      
      // Make sure active button is visible initially
      setTimeout(() => {
        activeButton.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
      }, 100);
    }
  }
  
  // Initialize the filter dropdown indicator
  setTimeout(() => {
    updateFilterDropdownIndicator(lastSelectedCategory);
  }, 200);
});
</script>


<script>
function closeNotification() {
  document.getElementById('notification-banner').style.display = 'none';
  
  // Set a cookie to remember the user closed this notification
  document.cookie = "notification_{{ notification.id }}_closed=true; path=/; max-age=86400";
}
</script>

<script>
 document.addEventListener('DOMContentLoaded', function() {
  const cartButton = document.querySelector('.floating-cart-button');
  const cartIcon = cartButton.querySelector('i');
  let isDragging = false;
  let isClick = false;
  let offsetX, offsetY;
  let startTime;
  
  // Show the "Drag me" tooltip on page load
  cartButton.classList.add('show-tooltip');
  // Remove the tooltip after 3 seconds (adjust as needed)
  setTimeout(() => {
    cartButton.classList.remove('show-tooltip');
  }, 3000);
  
  // Check for saved position in localStorage
  const savedPosition = localStorage.getItem('cartButtonPosition');
  if (savedPosition) {
    const position = JSON.parse(savedPosition);
    cartButton.style.left = position.left;
    cartButton.style.top = position.top;
    cartButton.style.bottom = 'auto';
    cartButton.style.right = 'auto';
  }
  
  // Make button draggable
  cartButton.addEventListener('mousedown', startDrag);
  cartButton.addEventListener('touchstart', startDrag, { passive: false });
  
  document.addEventListener('mousemove', drag);
  document.addEventListener('touchmove', drag, { passive: false });
  
  document.addEventListener('mouseup', endDrag);
  document.addEventListener('touchend', endDrag);
  
  // Start dragging
  function startDrag(e) {
    startTime = new Date().getTime();
    isClick = true;
    isDragging = true;
    
    if (e.type === 'mousedown') {
      offsetX = e.clientX - cartButton.getBoundingClientRect().left;
      offsetY = e.clientY - cartButton.getBoundingClientRect().top;
      e.preventDefault();
    } else if (e.type === 'touchstart') {
      offsetX = e.touches[0].clientX - cartButton.getBoundingClientRect().left;
      offsetY = e.touches[0].clientY - cartButton.getBoundingClientRect().top;
      e.preventDefault();
    }
    
    cartButton.style.transition = 'none';
    cartButton.classList.add('dragging');
    
    // Start spinning the cart icon during drag
    cartIcon.classList.add('cart-spinning');
  }
  
  // Drag the button
  function drag(e) {
    if (!isDragging) return;
    
    // If we've moved, it's not a click
    isClick = false;
    
    let newX, newY;
    
    if (e.type === 'mousemove') {
      newX = e.clientX - offsetX;
      newY = e.clientY - offsetY;
      e.preventDefault();
    } else if (e.type === 'touchmove') {
      newX = e.touches[0].clientX - offsetX;
      newY = e.touches[0].clientY - offsetY;
      e.preventDefault();
    }
    
    // Keep button within viewport bounds
    const buttonWidth = cartButton.offsetWidth;
    const buttonHeight = cartButton.offsetHeight;
    const windowWidth = window.innerWidth;
    const windowHeight = window.innerHeight;
    
    // Restrict horizontal movement
    if (newX < 10) {
      newX = 10;
    } else if (newX + buttonWidth > windowWidth - 10) {
      newX = windowWidth - buttonWidth - 10;
    }
    
    // Restrict vertical movement
    if (newY < 10) {
      newY = 10;
    } else if (newY + buttonHeight > windowHeight - 10) {
      newY = windowHeight - buttonHeight - 10;
    }
    
    // Position the button with absolute coordinates
    cartButton.style.left = newX + 'px';
    cartButton.style.top = newY + 'px';
    cartButton.style.bottom = 'auto';
    cartButton.style.right = 'auto';
  }
  
  // End dragging
  function endDrag() {
    if (!isDragging) return;
    
    // Check if this was a short tap/click (less than 200ms) with no movement
    const endTime = new Date().getTime();
    const timeDiff = endTime - startTime;
    
    isDragging = false;
    cartButton.style.transition = 'all 0.3s ease';
    cartButton.classList.remove('dragging');
    
    // Stop the cart icon spinning and add the stop animation
    cartIcon.classList.remove('cart-spinning');
    cartIcon.classList.add('cart-stop');
    
    // Remove the stop animation after it completes
    setTimeout(() => {
      cartIcon.classList.remove('cart-stop');
    }, 600);
    
    // Save position to localStorage for persistence across page navigation
    const position = {
      left: cartButton.style.left,
      top: cartButton.style.top
    };
    localStorage.setItem('cartButtonPosition', JSON.stringify(position));
    
    // If this was a quick tap with no movement, treat it as a click
    if (isClick && timeDiff < 200) {
      console.log('Opening cart...');
      // Navigate to cart or show cart modal
    }
  }
  
  // Make button position responsive to window resizing
  window.addEventListener('resize', function() {
    const buttonRect = cartButton.getBoundingClientRect();
    const windowWidth = window.innerWidth;
    const windowHeight = window.innerHeight;
    
    let newX = buttonRect.left;
    let newY = buttonRect.top;
    const buttonWidth = buttonRect.width;
    const buttonHeight = buttonRect.height;
    
    // Keep button within viewport after resize
    if (newX < 10) {
      newX = 10;
    } else if (newX + buttonWidth > windowWidth - 10) {
      newX = windowWidth - buttonWidth - 10;
    }
    
    if (newY < 10) {
      newY = 10;
    } else if (newY + buttonHeight > windowHeight - 10) {
      newY = windowHeight - buttonHeight - 10;
    }
    
    cartButton.style.left = newX + 'px';
    cartButton.style.top = newY + 'px';
    
    // Save adjusted position
    const position = {
      left: cartButton.style.left,
      top: cartButton.style.top
    };
    localStorage.setItem('cartButtonPosition', JSON.stringify(position));
  });
  
  // For demo purposes: function to update cart count
  window.updateCartCount = function(count) {
    const cartCountElement = document.querySelector('.cart-count');
    cartCountElement.textContent = count + (count === 1 ? ' Item' : ' Items');
    
    // Add bounce animation
    cartButton.classList.add('cart-bounce');
    setTimeout(() => {
      cartButton.classList.remove('cart-bounce');
    }, 300);
  };
});


</script>



 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Script to show the modal on page load and handle form submission -->
   </body>
</html>