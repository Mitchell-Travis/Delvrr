{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Essential Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Delvrr">
    <meta name="theme-color" content="#FFC107">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Scan the QR code to access the digital menu of your favorite restaurant. Browse dishes, place orders, and enjoy a seamless dining experience with Delvrr.">
    <meta name="keywords" content="QR code menu, digital menu, restaurant ordering, contactless dining, online food menu, mobile ordering, food delivery">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Delvrr">
    <meta property="og:title" content="Delvrr - QR Code Digital Menu">
    <meta property="og:description" content="Scan and browse the restaurant's digital menu instantly. A seamless way to order your favorite dishes.">
    <meta property="og:image" content="https://delvrr.com/media/preview.jpg">
    <meta property="og:image:alt" content="Delvrr Digital Menu">
    <meta property="og:url" content="https://delvrr.com/">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@delvrrapp">
    <meta name="twitter:creator" content="@delvrrapp">
    <meta name="twitter:title" content="Delvrr - QR Code Digital Menu">
    <meta name="twitter:description" content="Scan and browse the restaurant's digital menu instantly. A seamless way to order your favorite dishes.">
    <meta name="twitter:image" content="https://delvrr.com/media/preview.jpg">
    <meta name="twitter:image:alt" content="Delvrr Digital Menu Preview">
    
    <!-- Pinterest -->
    <meta name="pinterest-rich-pin" content="true">
    
    <!-- LinkedIn -->
    <meta property="linkedin:owner" content="Delvrr">
    
    <!-- WhatsApp / SMS Preview -->
    <meta property="og:site_name" content="Delvrr">
    
    <title>Delvrr - QR Code Digital Menu | Contactless Ordering Solution</title>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://delvrr.com/menu">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="../../../static/menu_dashboard/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../static/menu_dashboard/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../static/menu_dashboard/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../static/menu_dashboard/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="../../../static/menu_dashboard/images/favicon/site.webmanifest">
    
    <!-- CSS Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/libs/bootstrap-icons/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/libs/feather-webfont/dist/feather-icons.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/libs/simplebar/dist/simplebar.min.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/css/style.css">
    <link rel="stylesheet" href="../../../static/menu_dashboard/css/theme.min.css">
    <link rel="stylesheet" href="{% static 'menu_dashboard/css/menu.css' %}">
    <style>
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(88, 88, 88, 0.7)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
        }
    </style>
    
    <!-- Preconnect to CDNs for performance -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <!-- Structured Data (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Restaurant",
      "name": "Delvrr Digital Menu",
      "description": "Scan the QR code to view the restaurant's menu and place orders easily.",
      "url": "https://delvrr.com/",
      "image": "https://delvrr.com/media/preview.jpg",
      "logo": "https://delvrr.com/media/Delvrr-logo.JPG",
      "servesCuisine": "Multiple Cuisines",
      "telephone": "0881163840",
      "hasMenu": {
        "@type": "Menu",
        "name": "Digital Menu",
        "url": "https://delvrr.com/"
      },
      "sameAs": [
        "https://web.facebook.com/profile.php?id=61566341983829",
      ]
    }
    </script>


    <style type="text/css">
:root {
    /* Color Palette */
    --brand: #f7c028;
    --brand-dark: #d6a021; /* Slightly darker than #f7c028 */
    --brand-light: rgba(247, 192, 40, 0.1);
    --background: #ffffff;
    --surface: #f8f9fa;
    --text-primary: #1a1a1a;
    --text-secondary: #6c757d;
    --border: #e9ecef;
    --primary-color: #f7c028;
    
    /* New Transition Variable for Smooth Animations */
    --transition: all 0.3s ease-out;

    /* Typography */
    --font-family: 'Poppins', sans-serif;

    /* Sizing and Spacing */
    --radius-lg: 20px;
    --radius-md: 12px;
    --radius-sm: 8px;
    --border-radius: 12px;
    
    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    /* Make the background solid white (instead of a gradient) */
    background: #ffffff;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    padding-bottom: 84px;
}

/* Modal Styles */
.modal-content {
    border-radius: var(--radius-lg);
    border: none;
    background-image: url('../../../static/menu_dashboard/images/');
    background-size: cover;
    background-position: center;
    position: relative;
    box-shadow: var(--shadow-md);
    transition: var(--transition);
}

.modal-overlay {
    background: var(--background);
    padding: 20px;
    border-radius: var(--radius-md);
    position: relative;
    z-index: 2;
}

.modal-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.modal-dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.modal-backdrop {
    background-color: rgba(0, 0, 0, 0.8);
}

/* Button Styles */
.btn-outline-secondary {
    border-radius: 20px;
}

.btn-primary {
    border-radius: 10px;
}

.btn-close-custom {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
}

.btn-close-custom:hover {
    background: #fff;
    transform: scale(1.1);
}

.btn-close-custom i {
    font-size: 14px;
    color: #666;
}

/* Typography and Branding */
.delvrr-logo {
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
    text-transform: uppercase;
    letter-spacing: 2px;
    font-family: 'Arial', sans-serif;
}

.payment-text {
    font-size: 18px;
    display: inline-block;
    width: 90px;
    text-align: center;
    letter-spacing: 0.1em;
}

/* Notification Styles */
.toast-container {
    z-index: 1055;
}

.toast.text-bg-warning {
    background-color: var(--brand);
    color: var(--background);
}

.toast .btn-close-white {
    filter: invert(1);
}

/* App Container */
.menu-app-container {
    max-width: 480px;
    margin: 0 auto;
    background: var(--background);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Modern App Header */
:root {
  /* Use the existing primary brand color */
  --primary-color: {{ primary_brand_color }};
  --secondary-color: {{ secondary_brand_color }};
  
  /* Define a consistent design system */
  --background: #ffffff;
  --text-primary: #333333;
  --text-secondary: #757575;
  --light-bg: #f5f5f5;
  --border-color: rgba(0, 0, 0, 0.08);
  --success-color: #4CAF50;
  --warning-color: #FFC107;
  --danger-color: #F44336;
  
  /* Elevation/shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  
  /* Spacing scale */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  
  /* Border radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 16px;
  --radius-pill: 9999px;
}

/* Reset and base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  color: var(--text-primary);
  background-color: var(--light-bg);
  -webkit-tap-highlight-color: transparent;
}

/* ======== Header Component ======== */
.aliexpress-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: {{ primary_brand_color }};
  padding: var(--space-md) var(--space-md);
  box-shadow: var(--shadow-md);
  position: relative;
  z-index: 20;
}

/* Group the hamburger menu and brand info on the left */
.header-left {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.hamburger-menu {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  transition: all 0.2s ease;
}

.hamburger-menu:active {
  transform: scale(0.95);
}

.hamburger-menu i {
  font-size: 16px;
  color: #fff;
}

/* Brand styling */
.brand-info {
  display: flex;
  flex-direction: column;
}

.logo {
  font-size: 22px;
  font-weight: bold;
  color: #fff;
  line-height: 1.1;
  letter-spacing: -0.5px;
}

.restaurant-name-container {
  display: flex;
  align-items: center;
  margin-top: var(--space-xs);
  background-color: rgba(255, 255, 255, 0.15);
  border-radius: var(--radius-pill);
  padding: 4px 10px;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.location-icon {
  font-size: 10px;
  color: #fff;
  margin-right: var(--space-xs);
}

.restaurant-name {
  font-size: 12px;
  color: #fff;
  margin: 0;
  font-weight: 500;
}

/* Right side: container for the restaurant logo */
.header-icons {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.action-button {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.15);
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.action-button:active {
  transform: scale(0.95);
}

.restaurant-logo {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255, 255, 255, 0.8);
  box-shadow: var(--shadow-sm);
}

/* ======== Search Section ======== */
/* ======== Search Section ======== */
.search-header {
  width: 100%;
  background-color: var(--background);
  padding: var(--space-md);
  margin-top: 0;
  position: relative;
  z-index: 19;
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  box-shadow: var(--shadow-sm);
}

.search-container {
  width: 100%;
  background-color: var(--light-bg);
  border-radius: var(--radius-pill);
  display: flex;
  align-items: center;
  /* Reduced vertical padding while keeping horizontal padding the same */
  padding: 6px 24px;
  position: relative;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.search-icon {
  font-size: 18px;
  color: var(--text-secondary);
  margin-right: var(--space-sm);
}

.search-input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 16px;
  /* Reduced vertical padding to make it less tall */
  padding: 3px 0;
  color: var(--text-primary);
}

.search-input::placeholder {
  color: var(--text-secondary);
}

.filter-button {
  background: none;
  border: none;
  /* Adjusted padding for a more compact look */
  padding: 6px;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-results-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--background);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  z-index: 999;
  margin-top: var(--space-sm);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

/* PROMO BANNER - Modern, App-like */
.promo-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    min-height: 80px;
    margin: 32px auto;
    padding: 16px 20px;
    position: relative;
    background: #f5f5f5;
    color: #fff;
    border-radius: 0px;
    overflow: hidden;
}

/* Promo Text Content */
.promo-content {
    max-width: 55%;
}

.promo-content h2 {
    font-size: 1.5rem;
    margin-bottom: 8px;
    font-weight: 700;
    line-height: 1.2;
}

.promo-content p {
    font-size: 1rem;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1.4;
}

/* Call-to-Action Button */
.promo-cta {
    background: rgba(255, 255, 255, 0.2);
    color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s ease, background 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.promo-cta:hover {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.3);
}

.promo-cta:active {
    transform: translateY(0);
    opacity: 0.9;
}

/* SVG Container with Placeholder SVG */
.promo-svg-container {
    flex-shrink: 0;
    max-width: 35%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.promo-svg-container svg {
    width: 60px;
    height: auto;
    stroke: #fff;
}

/* Media Queries for Responsive Design */
@media (max-width: 768px) {
    .app-header {
        padding: 12px;
    }
    
    .header-content h1 {
        font-size: 20px;
    }
    
    .icon-button {
        width: 38px;
        height: 38px;
        border-radius: 10px;
    }

    .promo-banner {
        margin: 24px auto;
        flex-direction: column;
        text-align: center;
        padding: 12px;
        min-height: 60px;
    }
    
    .promo-content {
        max-width: 100%;
    }
    
    .promo-content h2 {
        font-size: 1.25rem;
    }
    
    .promo-content p {
        font-size: 0.875rem;
    }
    
    .promo-svg-container {
        max-width: 50%;
        margin-top: 8px;
    }
}


/* Search Header */
.search-header {
    padding: 16px;
    background-color: white;
    display: flex;
    justify-content: center;
}

.search-wrapper {
    display: flex;
    align-items: center;
    width: 90%;
    max-width: 600px;
}

.search-container {
    display: flex;
    align-items: center;
    background: #f5f5f5;
    border-radius: 100px;  /* Increased border radius for pill shape */
    padding: 12px 20px;
    flex-grow: 1;
    box-shadow: none;
}

.search-icon {
    color: #9ca3af;
    margin-right: 12px;
    font-size: 20px;
}

.search-input {
    border: none;
    background: transparent;
    outline: none;
    width: 100%;
    font-size: 16px;
    color: #333;
    font-weight: 400;
}

.search-input::placeholder {
    color: #9ca3af;
    font-weight: 400;
}

/* Search component styles */
.search-header {
  position: relative;
  z-index: 1002;
}

.search-wrapper {
  position: relative;
  width: 100%;
  z-index: 1002;
}

.search-container {
  position: relative;
  width: 100%;
}

.search-results-dropdown {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 350px; /* or any width you prefer */
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-height: 300px;
  overflow-y: auto;
  z-index: 1002;
  margin-top: 4px;
}

.search-results-content {
  padding: 5px 0;
}

.search-result-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.search-result-item:hover {
  background-color: #f5f5f5;
}

.search-result-image {
  width: 48px;
  height: 48px;
  border-radius: 6px;
  object-fit: contain;
  margin-right: 12px;
  padding: 4px; /* Adds some padding inside the image container */
  background-color: #f5f5f5;
}

.search-result-info {
  flex: 1;
}

.search-result-name {
  font-weight: 500;
  margin-bottom: 4px;
}

.search-result-category {
  font-size: 0.85em;
  color: #666;
}

.no-results-message {
  padding: 16px;
  text-align: center;
  color: #666;
}

/* Category Navigation */
.category-nav {
  position: relative;
  z-index: 1;
}

/* Header */
.app-header {
  position: relative;
  z-index: 1;
}

/* Menu Container */
.menu-app-container {
  position: relative;
}

/* Category Navigation */
/* ======== Category Navigation ======== */
.category-nav {
  position: sticky;
  top: 0;
  z-index: 1000;
  padding: var(--space-sm) 0;
  border-bottom: 1px solid var(--border-color);
  background: var(--background);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  width: 100%;
  box-shadow: none;
}

.category-scroll {
  display: flex;
  overflow-x: auto;
  gap: 12px;
  padding: 4px 16px;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  scrollbar-width: none;
  /* Smoother scroll mask at edges */
  mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
  position: relative;
  max-width: 100%;
  flex-wrap: nowrap;
}

.category-scroll::-webkit-scrollbar {
  display: none;
}

/* Category buttons */
.category-btn {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: clamp(11px, 3.2vw, 13px);
  font-weight: 600;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: clamp(8px, 2vw, 10px) clamp(14px, 3.5vw, 18px);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  position: relative;
  min-width: clamp(70px, 20vw, 80px);
  max-width: 100px;
  outline: none;
  flex: 0 0 auto;
  touch-action: manipulation;
}

.category-btn:hover {
  color: var(--secondary-color);
}

.category-btn:active {
  transform: scale(0.97);
}

/* Icon styling */
.category-icon {
  font-size: clamp(22px, 6vw, 26px);
  margin-bottom: clamp(4px, 1.5vw, 6px);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  height: clamp(36px, 10vw, 44px);
  width: clamp(36px, 10vw, 44px);
  border-radius: clamp(12px, 4vw, 16px);
  background-color: rgba(0, 0, 0, 0.03);
  padding: clamp(5px, 1.5vw, 6px);
}

/* Active state */
.category-btn.active {
  color: var(--secondary-color);
  font-weight: 700;
}

.category-btn.active .category-icon {
  background-color: var(--secondary-color);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

/* Fixed active indicator */
.category-btn::after {
  content: "";
  display: block;
  width: 0;
  height: clamp(3px, 1vw, 4px);
  background: var(--secondary-color);
  border-radius: 4px;
  margin-top: clamp(4px, 1.5vw, 6px);
  opacity: 0;
  min-height: 4px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.category-btn.active::after {
  width: 40%;
  opacity: 1;
}

/* Badge for new categories */
.category-btn.new::before {
  content: "NEW";
  position: absolute;
  top: 0;
  right: 0;
  font-size: 8px;
  background-color: var(--danger-color);
  color: white;
  padding: 2px 4px;
  border-radius: 10px;
  border: 2px solid var(--background);
  animation: pulse 2s infinite;
  line-height: 1;
  letter-spacing: 0.5px;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

/* ======== Featured Items Section ======== */
.featured-section {
  padding: var(--space-md);
  background-color: var(--background);
}
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-md);
}
.section-header h2 {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-primary);
}
.view-all {
  font-size: 14px;
  color: var(--secondary-color);
  background: none;
  border: none;
  font-weight: 600;
  cursor: pointer;
}
.items-carousel {
  display: flex;
  gap: var(--space-md);
  overflow-x: auto;
  padding-bottom: var(--space-md);
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}
.items-carousel::-webkit-scrollbar {
  display: none;
}
.food-item {
  flex: 0 0 auto;
  width: 160px;
  background-color: var(--background);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
  transition: all 0.3s ease;
}
.food-item:active {
  transform: scale(0.98);
}
.food-image-container {
  position: relative;
  height: 120px;
  overflow: hidden;
}
.food-image {
  width: 100%;
  height: 100%;
  background-color: var(--light-bg);
  background-image: linear-gradient(45deg, var(--light-bg), #e0e0e0);
}
.discount-badge {
  position: absolute;
  top: var(--space-xs);
  left: var(--space-xs);
  background-color: var(--danger-color);
  color: white;
  font-size: 10px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: var(--radius-pill);
  z-index: 2;
}
.food-details {
  padding: var(--space-sm);
}
.food-details h3 {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: var(--space-xs);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.rating {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: var(--space-xs);
  font-size: 12px;
}
.rating i {
  color: var(--warning-color);
}
.review-count {
  color: var(--text-secondary);
}
.price-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.price {
  font-weight: 700;
  color: var(--text-primary);
}
.add-to-cart {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background-color: {{ primary_brand_color }};
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: var(--shadow-sm);
  transition: all 0.2s ease;
}
.add-to-cart:active {
  transform: scale(0.9);
}
/* Media queries for responsive design */
@media (max-width: 480px) {
  .food-item {
    width: 140px;
  }
  
  .food-image-container {
    height: 100px;
  }
}

/* ======== View All Grid Section ======== */
.product-grid-container {
  padding: var(--space-md);
  background-color: var(--background);
  display: none; /* Hidden by default, shown when View All is clicked */
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-lg);
  width: 100%;
}

.grid-item {
  background-color: var(--background);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
  transition: all 0.3s ease;
}

.grid-item:active {
  transform: scale(0.98);
}

.grid-image-container {
  position: relative;
  height: 150px;
  overflow: hidden;
}

.grid-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  background-color: var(--light-bg);
  background-image: linear-gradient(45deg, var(--light-bg), #e0e0e0);
}

.grid-details {
  padding: var(--space-md);
}

.grid-details h3 {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: var(--space-xs);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  min-height: 42px;
}

.grid-details .description {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: var(--space-sm);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  min-height: 36px;
}

.grid-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.back-to-carousel {
  display: inline-block;
  font-size: 14px;
  color: var(--secondary-color);
  background: none;
  border: none;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
}

.back-to-carousel i {
  font-size: 12px;
}

.category-badge {
  display: inline-block;
  background-color: var(--light-bg);
  color: var(--text-secondary);
  font-size: 10px;
  padding: 3px 8px;
  border-radius: var(--radius-pill);
  margin-bottom: var(--space-xs);
}

/* Animation for view transitions */
.fade-in {
  animation: fadeIn 0.3s ease-in;
}

/* Shared styles for both views */
.shared-view {
  padding: var(--space-md);
  background-color: var(--background);
}

/* Existing styling for the featured section */
.featured-section {
  /* Other specific styles can remain here */
}

/* For grid view container, keep its unique properties if any */
.product-grid-container {
  display: none; /* Hidden by default */
}


.fade-out {
  animation: fadeOut 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* Add to cart animation */
.add-to-cart.added {
  background-color: var(--success-color);
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --background: #121212;
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0a0;
    --light-bg: #1e1e1e;
    --border-color: rgba(255, 255, 255, 0.1);
  }
  
  .category-icon {
    background-color: rgba(255, 255, 255, 0.06);
  }
  
  .food-image {
    background-image: linear-gradient(45deg, var(--light-bg), #2a2a2a);
  }
  
  .search-container {
    border-color: rgba(255, 255, 255, 0.05);
  }
  
  .grid-image {
    background-image: linear-gradient(45deg, var(--light-bg), #2a2a2a);
  }
  
  .category-badge {
    background-color: rgba(255, 255, 255, 0.08);
  }
}

/* Responsive adjustments for smaller screens */
@media (max-width: 480px) {
  .product-grid {
    gap: var(--space-md);
  }
  
  .grid-image-container {
    height: 120px;
  }
  
  .grid-details {
    padding: var(--space-sm);
  }
  
  .grid-details h3 {
    font-size: 14px;
    min-height: 15px;
  }
}



/* Reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    background-color: #f0f2f5;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    color: #1a1a1a;
}

/* Main Content & Grid Layout */
.main-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 16px;
    background-color: transparent;
}

.dish-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    padding: 8px;
    background-color: transparent;
}

/* Card Styles */

.dish-card:active {
    transform: scale(0.97);
}

/* Image Container */
.dish-image {
    position: relative;
    width: 100%;
    height: 120px;
    background: #f8f9fa;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dish-image img {
    width: 100px;
    height: 100px;
    object-fit: contain;
    border-radius: 50%;
    border: 3px solid {{ third_brand_color  }};
    transition: transform 0.3s ease, border-color 0.3s ease;
    background-color: #fff;
    padding: 5px;
}

.dish-image img:hover {
    transform: scale(1.05);
    border-color: {{ third_brand_color  }};
}

/* Favorite Button */
.favorite-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(255, 255, 255, 0.9);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    border: none;
    backdrop-filter: blur(4px);
    transition: all 0.2s ease;
}

.heart-icon {
    width: 16px;
    height: 16px;
    color: #666;
}

/* Product Information */
.dish-info {
    padding: 12px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.dish-name {
    font-size: 20px;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.3;
}

.dish-weight {
    color: #666;
    font-size: 12px;
    margin-bottom: 6px;
}

/* Rating System */
.rating {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 6px;
}

.star {
    color: #FFB800;
    font-size: 14px;
}

.rating-number {
    font-weight: 600;
    color: #1a1a1a;
    font-size: 13px;
}

/* Price Controls */
/* Price Controls - Updated */
.dish-price-action {
    margin-top: auto;
    padding-top: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.price-container {
    display: flex;
    align-items: center;
}

.current-price {
    font-weight: 600;
    font-size: 20px; /* increse the price */
}

.previous-price {
    text-decoration: line-through;
    color: #999;
    font-size: 12px;
    margin-left: 4px;
}

/* Add to Cart Button - Updated */
.add-to-cart-btn {
    
    background: {{ primary_brand_color }};
    color: white;
    border-radius: 12px;
    padding: 6px 10px;
    font-weight: 600;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    white-space: nowrap;

    display: flex !important; /* Use flex to ensure visibility */
   
    
}

/* Removing unnecessary price controls that were used before */
.price-controls {
    display: none; /* Hide the old price controls */
}

/* Media query adjustments */
@media (max-width: 360px) {
    .dish-price-action {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .add-to-cart-btn {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .dish-grid {
        gap: 10px;
        padding: 6px;
    }
}

@media (max-width: 360px) {
    .dish-card {
        height: 240px;
    }

    .dish-image {
        height: 110px;
    }

    .dish-image img {
        width: 90px;
        height: 90px;
        padding: 4px;
    }

    .dish-name {
        font-size: 20px;
    }

    .dish-weight {
        font-size: 11px;
    }

    .current-price {
        font-size: 20px;
    }

    .add-to-cart-btn {
        padding: 7px;
        font-size: 12px;
    }
}

/* Loading Skeleton */
.skeleton {
    background: linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.08) 37%, rgba(0,0,0,0.06) 63%);
    background-size: 400% 100%;
    animation: skeleton-loading 1.4s ease infinite;
}

@keyframes skeleton-loading {
    0% { background-position: 100% 50%; }
    100% { background-position: 0 50%; }
}

/* Bottom Navigation */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--background);
    z-index: 1000;
}



.fixed-bottom-icons.hidden {
    transform: translateY(100%);
}

.nav-container {
    height: 100%;
    padding: 0 20px;
    max-width: 600px;
    margin: 0 auto;
}

.nav-item-wrapper {
    position: relative;
    padding: 0 4px;
}

.text-inherit {
    color: #333;
    text-decoration: none;
    transition: var(--transition);
    padding: 8px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.icon-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;  /* Reduced from 40px */
    height: 32px; /* Reduced from 40px */
}

/* Keep icons gray by default, but the cart icon (3rd item) is black with a white icon */
.fas {
    font-size: 16px !important; /* Reduced from 22px */
    color: #666;
    transition: var(--transition);
}

#cartIconCount {
    position: absolute;
    top: -2px;
    right: -2px;
    background: red;
    color: #fff;
    border-radius: 50%;
    min-width: 16px;    /* Reduced from 18px */
    height: 16px;       /* Reduced from 18px */
    font-size: 10px;    /* Reduced from 11px */
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
}

.text-inherit.active {
    color: #000;
}

.text-inherit.active .fas {
    color: #000;
}

/* Specifically style the 3rd nav item (cart) as in the screenshot */
.nav-item-wrapper:nth-child(3) .icon-wrapper {
    background: #000;
    border-radius: 50%;
    width: 38px;  /* Reduced from 45px */
    height: 38px; /* Reduced from 45px */
}

.nav-item-wrapper:nth-child(3) .fas {
    color: #fff; /* white icon */
}

.nav-label {
    font-size: 10px; /* Reduced from 12px */
    color: #666;
    margin: 0;
    line-height: 1;
    text-align: center;
    display: block;
}


@media (hover: hover) {
    .text-inherit:hover {
        background-color: rgba(7, 94, 84, 0.05);
        border-radius: 8px;
    }
}

/* Table Bar */
.table-bar {
    background: #1a1a1a;
    color: #fff;
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.table-info {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
}

.help-button {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: var(--transition);
}

.help-button:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Enhanced Header */
.brand-section {
    display: flex;
    flex-direction: column;
}

.brand-section h1 {
    font-size: 24px;
    margin-bottom: 2px;
}

.restaurant-name {
    font-size: 14px;
    color: var(--text-secondary);
}

/* Cart Button */
.cart-button {
    background: var(--brand);
    border: none;
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: pointer;
    color: #fff;
}

.cart-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #1a1a1a;
    color: #fff;
    font-size: 12px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

/* Enhanced Category Icons */
.category-icon-wrap {
    background: #f0f2f0;
    width: 52px;
    height: 52px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
    transition: var(--transition);
}

.category-btn {
    padding: 14px;
}

.category-btn.active .category-icon-wrap {
    background: {{ secondary_brand_color }};
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(247, 192, 40, 0.2);
}

/* Cart Styles */
.offcanvas {
    border-radius: var(--border-radius) 0 0 var(--border-radius);
    max-width: 90%;
}

.cart-items {
    flex: 1;
    overflow-y: auto;
}

.cart-item {
    display: flex;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.cart-item-image {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    object-fit: cover;
    margin-right: 1rem;
}

.cart-item-details {
    flex: 1;
}

.cart-item-name {
    font-weight: 500;
    margin-bottom: 0.25rem;
}

.cart-item-price {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.quantity-btn {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1px solid var(--brand);
    background: none;
    color: var(--brand);
    display: flex;
    align-items: center;
    justify-content: center;
}

.cart-footer {
    padding: 1rem;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.checkout-button {
    width: 100%;
    padding: 1rem;
    background: {{ primary_brand_color }};
    color: #fff;
    border: none;
    border-radius: var(--border-radius);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 500;
}

:root {
    --brand: #f7c028; /* New brand color */
    --background: #ffffff; /* New background color */
    --primary-color: var(--brand); /* Changed to use --brand */
    --primary-dark: #e6b024;
    --primary-light: #ffd24d;
    --background-color: var(--background); /* Changed to use --background */
    --surface-color: var(--background); /* Changed to use --background */
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --border-color: #e2e8f0;
    --success-color: #22c55e;
    --error-color: #ef4444;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;
    --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
}



html {
    -webkit-text-size-adjust: 100%;
}

.chat-container {
    max-width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--surface-color);
    position: relative;
}

.modal-header {
    padding: 1rem;
    background: var(--surface-color);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: var(--shadow-sm);
    position: relative;
    z-index: 10;
}

.header-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.restaurant-icon {
    width: 2.75rem;
    height: 2.75rem;
    border-radius: var(--radius-lg);
    background: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    box-shadow: var(--shadow-sm);
}

.table-info h5 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0;
    color: var(--text-primary);
}

.status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-xl);
    font-size: 0.875rem;
    font-weight: 500;
    gap: 0.375rem;
}

.status-badge.preparing {
    background: var(--primary-light);
    color: var(--text-primary);
}

.status-badge.completed {
    background: var(--success-color);
    color: #fff;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    background: var(--background-color);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    scroll-behavior: smooth;
}

.message {
    max-width: 70%;
    min-width: 100px;
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-xl);
    position: relative;
    animation: slideIn 0.3s ease;
    word-break: break-word;
    font-size: 1rem;
    line-height: 1.2;
}

.restaurant-message {
    align-self: flex-start;
}
.restaurant-message .message-content {
    background: var(--surface-color);
    color: var(--text-primary);
    border-bottom-left-radius: var(--radius-sm);
    box-shadow: var(--shadow-md);
    text-align: left;
}

.customer-message {
    align-self: flex-end;
}
.customer-message .message-content {
    background: var(--primary-color);
    color: white;
    border-bottom-right-radius: var(--radius-sm);
    text-align: left;
}

.message-content {
    display: block;
}

.message-content p {
    margin: 0;
}

.system-message {
    align-self: center;
    background: #e0e7ff;
    color: #3730a3;
    border: 1px solid #c7d2fe;
    padding: 0.75rem 1rem;
    border-radius: 1.25rem;
    font-size: 0.875rem;
    text-align: center;
}

.order-summary {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    padding: 0.75rem;
    margin-bottom: 0.75rem;
    max-width: 90%;
}

.order-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 1rem;
    color: var(--text-secondary);
}

.order-header i {
    color: var(--primary-color);
    font-size: 1.25rem;
}

.order-items {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.order-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: var(--text-primary);
    padding: 0.25rem 0;
}

.order-item.order-total {
    font-weight: 600;
    border-top: 1px solid var(--border-color);
    padding-top: 0.5rem;
}

.chat-input-area {
    padding: 1rem;
    padding-bottom: calc(1rem + var(--safe-bottom));
    background: var(--surface-color);
    
    position: relative;
    z-index: 10;
}

.input-group {
    display: flex;
    gap: 0.75rem;
    align-items: flex-end;
    max-width: 48rem;
    margin: 0 auto;
    position: relative;
}

.message-input {
    flex: 1;
    padding: 0.875rem 1rem;
    
    border-radius: var(--radius-xl);
    font-size: 1rem;
    background: var(--background-color);
    transition: var(--transition);
    resize: none;
    max-height: 120px;
    min-height: 48px;
}

.message-input:focus {
    outline: none;
    
    background: var(--surface-color);
}

.send-button {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    border: none;
    background: var(--primary-color);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    margin-left: 0.5rem;
}

.send-button:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
}        


@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (min-width: 768px) {
    .chat-container {
        max-width: 48rem;
        margin: 1rem auto;
        height: calc(100vh - 2rem);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-lg);
    }
    .modal-header {
        border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    }
}

@media (max-width: 768px) {
    .chat-messages {
        padding: 1rem;
    }
    .message {
        max-width: 85%;
    }
    .modal-header,
    .chat-input-area {
        padding: 1rem;
    }
    .message-input {
        font-size: 1rem;
    }
}

/* Profile Section */
.profile-wrapper {
    padding: 16px;
}

.profile-card {
    background: var(--background);
    border-radius: var(--radius-lg);
    padding: 24px;
    box-shadow: var(--shadow-sm);
}

.profile-header-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.profile-avatar {
    position: relative;
    margin-bottom: 16px;
}

.avatar-img {
    width: 88px;
    height: 88px;
    border-radius: 50%;
    border: 2px solid var(--brand);
    background: var(--surface);
    object-fit: cover;
}

.avatar-edit {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 28px;
    height: 28px;
    background: var(--brand);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 12px;
    border: 2px solid var(--background);
    cursor: pointer;
}

.profile-name {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.profile-tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
}

.profile-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: var(--brand-light);
    color: var(--brand);
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-weight: 500;
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    padding: 16px;
}

.stat-item {
    background: var(--background);
    border-radius: var(--radius-md);
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: var(--shadow-sm);
}

.stat-item i {
    width: 40px;
    height: 40px;
    background: var(--brand-light);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--brand);
    font-size: 16px;
}

.stat-info {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.stat-label {
    font-size: 13px;
    color: var(--text-secondary);
}

/* Profile Menu */
.profile-menu {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.menu-link {
    background: var(--background);
    border-radius: var(--radius-md);
    padding: 16px;
    display: flex;
    align-items: center;
    text-decoration: none;
    color: var(--text-primary);
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease;
    cursor: pointer;
}

.menu-link:hover {
    transform: translateX(4px);
}

.menu-link i:first-child {
    width: 24px;
    margin-right: 12px;
    color: var(--brand);
}

.menu-link span {
    flex: 1;
    font-weight: 500;
}

.menu-link i.fa-chevron-right {
    color: var(--text-secondary);
    font-size: 14px;
}

.menu-link-logout {
    margin-top: 8px;
}

.menu-link-logout i:first-child {
    color: var(--brand);
}

/* Responsive Adjustments for Profile Section */
@media (min-width: 768px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        max-width: 600px;
        margin: 0 auto;
    }
    .profile-menu {
        max-width: 600px;
        margin: 0 auto;
    }
}

@media (max-width: 380px) {
    .profile-wrapper {
        padding: 12px;
    }
    .profile-menu {
        padding: 12px;
        width: 100%;
        margin: 0;
    }
    .menu-link {
        padding: 14px;
        width: 100%;
    }
    .stats-grid {
        gap: 12px;
        padding: 12px;
    }
    .stat-item {
        padding: 12px;
    }
    .stat-value {
        font-size: 16px;
    }
}

.nav-item-wrapper a.active {
    color: var(--brand);
}

.nav-item-wrapper a.active .nav-label {
    color: var(--brand);
}

/* Keep the icon color white on the add-to-cart button */
.add-to-cart-btn i {
  color: #fff;
  margin-right: 5px;
}
/* 1) Make all nav items turn brand color on active */
.text-inherit.active {
  color: var(--brand) !important;
}
.text-inherit.active .fas {
  color: var(--brand) !important;
}

/* 2) Exclude the 3rd nav item (cart) from changing color */
.nav-item-wrapper:nth-child(3) .text-inherit.active {
  color: #fff !important;
}
.nav-item-wrapper:nth-child(3) .text-inherit.active .fas {
  color: #fff !important;
}

/* OFFCANVAS WRAPPER */
.offcanvas {
  width: 100%;
  max-width: 380px;
  background: var(--background);
  box-shadow: var(--shadow);
  position: fixed;
  top: 0;
  right: 0;
  height: 100%;
  transform: translateX(100%);
  transition: transform 0.3s ease;
  z-index: 1050;
  display: flex;
  flex-direction: column;
}

.offcanvas.show {
  transform: translateX(0);
}

.offcanvas-header {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid #eee;
}

.offcanvas-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.offcanvas-title span {
  background: black;
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  font-size: 0.875rem;
  margin-left: 0.5rem;
}

.btn-close {
  background: none;
  border: none;
  padding: 0.5rem;
  cursor: pointer;
}

.offcanvas-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
}

/* CART TOP SECTION (Co-delivery, Time, Address, Chat) */
.cart-info {
  background: white; /* or var(--background) if you prefer */
  padding: 0 1rem 1rem;
  margin-bottom: 1rem;
}

.cart-info-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.5rem;
}

.cart-info-switch {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Toggle Switch */
.switch {
  position: relative;
  display: inline-block;
  width: 34px;
  height: 20px;
}
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  transition: 0.4s;
  border-radius: 20px;
}
.slider:before {
  position: absolute;
  content: "";
  height: 14px;
  width: 14px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.4s;
  border-radius: 50%;
}
input:checked + .slider {
  background-color: var(--brand, #f59e0b); /* Adjust brand color */
}
input:checked + .slider:before {
  transform: translateX(14px);
}

/* Time & Address Rows */
.cart-info-time,
.cart-info-address {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.875rem;
  color: var(--text-secondary, #555);
}

/* Chat Button */
.cart-info-chat {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-secondary, #555);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* "Order" Heading Above Cart Items */
.cart-order-heading {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 1rem 0.75rem;
  color: var(--text-primary, #222);
}

/* CART ITEMS */
.cart-items {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  padding-bottom: 1rem;
}

.cart-item {
  display: flex;
  align-items: center;
  padding: 0.75rem;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 0.75rem;
}

.cart-item-image {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  object-fit: contain;  /* Changed from cover to contain */
  margin-right: 0.75rem;
}

.cart-item-details {
  flex: 1;
}

.cart-item-name {
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.25rem;
}

.cart-item-price {
  font-size: 1rem;
  font-weight: 600;
  color: black;
  margin-bottom: 0.5rem;
}

.quantity-controls {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background: white;
  padding: 0.25rem;
  border-radius: 6px;
  width: fit-content;
}

.quantity-btn {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  border: none;
  background: {{ primary_brand_color  }};
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.quantity-controls span {
  font-weight: 500;
  min-width: 20px;
  text-align: center;
}

.remove-item {
  background: none;
  border: none;
  width: 28px;
  height: 28px;
  border-radius: 6px;
  color: #dc2626;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

/* CART SUMMARY */
.cart-summary {
  flex-shrink: 0;
  background: #f8f9fa;
  padding: 1rem;
  border-top: 1px solid #eee;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.summary-row:last-child {
  margin-bottom: 0;
  padding-top: 0.5rem;
  border-top: 1px dashed #eee;
}

/* Example "Delivery" row */
.summary-row.delivery-fee {
  margin-top: 0.5rem;
}

#cartTotal {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-primary);
}

/* CART FOOTER */
.cart-footer {
  flex-shrink: 0;
  padding: 1rem;
  background: white;
  border-top: 1px solid #eee;
}

/* "Pay" BUTTON */
.checkout-button {
  width: 100%;
  padding: 0.75rem;
  background: {{ primary_brand_color }};
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.checkout-button:hover {
  background: #f7c028; /* Slightly darker on hover */
}

.checkout-button:active {
  opacity: 0.9;
}

/* OFFCANVAS BACKDROP */
.offcanvas-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.3);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1040;
}

.offcanvas-backdrop.show {
  opacity: 1;
}

/* MOBILE OPTIMIZATIONS */
@media (max-width: 768px) {
  .offcanvas {
    max-width: 100%;
    height: 100%;
  }
  .cart-items {
    -webkit-overflow-scrolling: touch;
  }
  .cart-summary,
  .cart-footer {
    position: sticky;
    bottom: 0;
    background: white;
    z-index: 1;
  }
  .cart-footer {
    padding-bottom: max(1rem, env(safe-area-inset-bottom, 1rem));
  }
  .checkout-button {
    padding: 1rem;
  }
}

/* SCROLLBAR STYLING */
.cart-items::-webkit-scrollbar {
  width: 4px;
}

.cart-items::-webkit-scrollbar-track {
  background: #f1f1f1;
}

.cart-items::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 2px;
}
</style>



<style>
    /* Helper class to hide inactive sections */
    .hidden {
      display: none !important;
    }
    /* (Your existing styling can remain here) */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    /* Optional: Ensure each section has enough bottom padding so the fixed nav does not cover content */

    .nav-item-wrapper a {
      text-decoration: none;
      color: inherit;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* Active state styling */
    .active {
      color: red; /* Adjust to your design */
    }
  </style>



<style>
.btn-check:checked + .btn {
    background-color: #f7c028; !important;
    color: white !important;
}

.btn:hover {
    background-color: #f7c028; !important;
    color: white !important;
}
</style>

<style>
  /* Splash screen covers the whole viewport */
  .splash-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #fff; /* Black background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 0.5s ease-out;
  }
  .splash-screen.fade-out {
    opacity: 0;
  }

  /* Center and animate the logo content */
  .splash-content {
    text-align: center;
    transform: translateY(-10%);
    color: #fff;
  }

  /* Wrapper for your logo image */
  .logo-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    animation: logoAnimation 1.5s ease-in-out;
  }

  /* Actual logo image; adjust size as needed */
  .logo-image {
    width: 180px; 
    height: auto;
    opacity: 0;                 /* Start invisible */
    animation: fadeIn 0.8s ease-out 0.5s forwards; 
    /* The 0.5s delay gives the scale animation time to play first, 
       if you want to match the original “pop” effect. */
  }

  .tagline {
    font-size: 16px;
    color: #ccc; /* Slightly gray */
    margin-top: 0.7px;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUpIn 0.5s ease-out 1s forwards;
    font-weight: 500;
    letter-spacing: 0.5px;
  }

  .loading-dots {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-top: 25px;
  }
  .dot {
    width: 6px;
    height: 6px;
    background-color: #FFE135; /* Yellow color */
    border-radius: 50%;
    animation: dotPulse 1s infinite;
  }
  .dot:nth-child(2) {
    animation-delay: 0.2s;
  }
  .dot:nth-child(3) {
    animation-delay: 0.4s;
  }

  /* Animations */
  @keyframes logoAnimation {
    0%   { transform: scale(0.8); }
    50%  { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  @keyframes fadeUpIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes dotPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.5);
      opacity: 0.5;
    }
  }
</style>
 





</head>
   <body>

    <!-- Navbar -->

    <!-- Offcanvas Cart Structure -->
    <!-- Offcanvas Cart Structure (IDs & structure remain unchanged) -->
  <!-- (A) OFFCANVAS CART STRUCTURE -->
<!-- (A) OFFCANVAS CART STRUCTURE -->
<div class="offcanvas offcanvas-end" id="offcanvasRight" tabindex="-1">
  <!-- Offcanvas Header -->
  <div class="offcanvas-header">
    <!-- Example: keep the "Cart #", or rename as desired -->
    <h5 class="offcanvas-title">
      Cart <span id="cartCount">0</span>
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
      <!-- Close icon -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <!-- Offcanvas Body -->
  <div class="offcanvas-body">
    
    <!-- TOP SECTION: co-delivery, time, address, chat icon -->
    <div class="cart-info">
      <!-- First row: co-delivery toggle & time -->
      <div class="cart-info-row">
        <div class="cart-info-switch">
          
          <span></span>
        </div>
        <div class="cart-info-time">
          <!-- Example time icon (optional) -->
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 6v6l4 2"></path>
          </svg>
          <span>15 min</span>
        </div>
      </div>

      <!-- Second row: address & chat icon -->
      <div class="cart-info-row">
        <div class="cart-info-address">
          <!-- Example location icon -->
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          <span>{{ restaurant.restaurant_name }}</span>
        </div>
        <button class="cart-info-chat" aria-label="Chat">
          <!-- Example chat icon -->
          <!-- <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg> -->
        </button>
      </div>
    </div>

    <!-- "Order" heading, as shown in screenshot -->
    <h6 class="cart-order-heading">Order</h6>

    <!-- Cart Items (unchanged logic) -->
    <div id="cartItems" class="cart-items">
      <!-- Cart items will be inserted here by your JS -->
      <template id="cartItemTemplate">
        <div class="cart-item">
          <img src="${productImage}" alt="${productName}" class="cart-item-image">
          <div class="cart-item-details">
            <div class="cart-item-name">${productName}</div>
            <div class="cart-item-price">$${productPrice.toFixed(2)}</div>
            <div class="quantity-controls">
              <button class="quantity-btn decrement" data-product-id="${itemId}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
              <span>${quantity}</span>
              <button class="quantity-btn increment" data-product-id="${itemId}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
            </div>
          </div>
          <button class="remove-item" data-product-id="${itemId}" aria-label="Remove item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18"></path>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
            </svg>
          </button>
        </div>
      </template>
    </div>

    <!-- Cart Summary (with "Delivery" line) -->
    <div class="cart-summary">
      <div class="summary-row">
        <span>Order</span>
        <span id="cartTotal">$0.00</span>
      </div>
      <!-- Example line: "Delivery: Free from $5" -->
      <div class="summary-row delivery-fee">
        
        <span></span>
      </div>
    </div>

    <!-- Footer with "Pay" button -->
    <div class="cart-footer">
      <button id="checkoutButton" class="checkout-button" data-restaurant-id="{{ restaurant.id }}">
        <!-- Example pay icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7"></path>
          <path d="M21 5.618a1 1 0 00-1.447-.894L15 7v13l5.447-2.724A1 1 0 0021 16.382V5.618z"></path>
          <path d="M9 7v13"></path>
        </svg>
        Checkout
      </button>
    </div>
  </div>

  <!-- Loading Overlay (unchanged) -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="loading-content">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 6v6l4 2"></path>
      </svg>
      <p>Processing...</p>
    </div>
  </div>
</div>



    

    <!-- Toast Notification -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="guestToast" class="toast align-items-center text-bg-warning border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    You are currently viewing the site as a guest.
                </div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

      
  <!-- ===============================
       Orders Modal (Fullscreen Chat Orders)
       (This modal remains separate and unaffected)
  ================================ -->
  <div class="modal fade" id="ordersFullscreen" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content chat-container">
        <!-- Header -->
        <div class="modal-header border-bottom sticky-top bg-white">
          <div class="header-info">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
            <div class="restaurant-icon">
              <i class="fas fa-utensils"></i>
            </div>
            <div class="table-info">
              <h5>Table #1</h5>
              <div>
                <small class="text-muted">Order #12345</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Messages -->
        <div class="chat-messages" id="chatMessages">
          <div class="message system-message">
            <i class="fas fa-info-circle me-2"></i>
            Order Received
            <span class="message-time">2 mins ago</span>
          </div>
          <div class="message restaurant-message">
            <div class="message-content">
              <div class="order-summary">
                <div class="order-header">
                  <i class="fas fa-receipt"></i>
                  <h6 style="margin: 0; font-weight: 600;">Order Summary</h6>
                </div>
                <div class="order-items">
                  <div class="order-item">
                    <span>2× Classic Burger</span>
                    <span>$19.98</span>
                  </div>
                  <div class="order-item">
                    <span>1× Large Fries</span>
                    <span>$3.50</span>
                  </div>
                  <div class="order-item order-total">
                    <span>Total</span>
                    <span>$23.48</span>
                  </div>
                </div>
              </div>
              <span class="message-time">1 min ago</span>
            </div>
          </div>
          <!-- <div class="message customer-message">
            <div class="message-content">
              <p style="margin: 0">Please add extra ketchup</p>
              <span class="message-time">Just now</span>
            </div>
          </div> -->
        </div>

        <!-- Input -->
        <div class="chat-input-area">
          
            <input type="text"  class="message-input" placeholder="Type a message..." id="messageInput" aria-label="Message input">
            <button class="send-button" type="button" id="sendButton">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
    </div>
  </div>

  <!-- ===============================
       MENU SECTION
       (Default visible on page load)
  ================================ -->
  <section id="menuSection" class="menu-app-container">
       
  <!-- App Header -->
<!-- Header -->
<div class="aliexpress-header">
  <!-- Left side: hamburger menu + brand info -->
  <div class="header-left">
    <div class="hamburger-menu">
      <i class="fas fa-bars"></i>
    </div>
    <div class="brand-info">
      <div class="logo">Delvrr</div>
      <div class="restaurant-name-container">
        <i class="fas fa-map-marker-alt location-icon"></i>
        <p class="restaurant-name">{{ restaurant.restaurant_name }}</p>
      </div>
    </div>
  </div>
  <!-- Right side: restaurant logo and actions -->
  <div class="header-icons">
    <button class="action-button">
      <i class="fas fa-heart"></i>
    </button>
    <img
      src="{{ restaurant.logo_pic.url }}"
      alt="Restaurant Logo"
      class="restaurant-logo"
    />
  </div>
</div>

<!-- Search Section -->
<div class="search-header">
  <div class="search-container">
    <i class="fas fa-search search-icon"></i>
    <input
      type="text"
      class="search-input"
      placeholder="Search for menu items"
    />
    <button class="filter-button">
      <i class="fas fa-sliders-h"></i>
    </button>
    <div class="search-results-dropdown" style="display: none;">
      <div class="search-results-content"></div>
    </div>
  </div>
</div>

<!-- Category Navigation (Sticky) -->
 <!-- Category Navigation (Sticky) -->
<div class="category-nav">
  <div class="category-scroll">
    <!-- Default category button for "All" food -->
    <button class="category-btn active" data-category="featured">
      <div class="category-icon">
        🍱
      </div>
      <span>All</span>
    </button>
    {% for category in categories %}
      <button class="category-btn {% if category.is_new %}new{% endif %}" data-category="{{ category.name }}">
        <div class="category-icon">
          {{ category.emoji|default:"" }}
        </div>
        <span>{{ category.name }}</span>
      </button>
    {% endfor %}
  </div>
</div>

<!-- 
<div class="promo-banner">
  <div class="promo-content">
    <h2>Get 32% Promo</h2>
    <button class="buy-button">Order Now</button>
  </div>
  <div class="promo-image">
    You can replace this with your shrimp/food image
    <svg viewBox="0 0 100 100" width="60" height="60">
      <path d="M20,50 Q50,20 80,50" fill="none" stroke="#fff" stroke-width="4"/>
      <path d="M20,60 Q50,30 80,60" fill="none" stroke="#fff" stroke-width="4"/>
    </svg>
  </div>
</div> -->

<!-- Featured Items Section (Sample) -->
<!-- Main Content -->
<!-- Main Content -->
<div class="main-content" id="menuContent">
  <!-- Featured Section with Carousel View -->
  <div class="featured-section  shared-view">
    <div class="section-header">
      <h2>Most Popular Items</h2>
      <button class="view-all">See all</button>
    </div>
    <div class="items-carousel">
      {% for category_products in allProds %}
        {% for product in category_products %}
          <div class="food-item"
               data-category="{{ product.category.name|lower }}"
               data-product-id="{{ product.id }}"
               data-name="{{ product.name }}"
               data-description="{{ product.description }}"
               data-price="{{ product.price }}"
               data-previous-price="{{ product.previous_price|default:'' }}"
               data-image="{{ product.product_image.url }}">
            <div class="food-image-container">
              {% if product.status == 'Sale' %}
                <span class="discount-badge">Sale</span>
              {% endif %}
              <div class="food-image">
                <img src="{{ product.product_image.url }}" alt="{{ product.name }}" class="product-image-trigger" style="width: 100%; height: 100%; object-fit: cover;">
              </div>
            </div>
            <div class="food-details">
              <h3>{{ product.name }}</h3>
              <div class="rating">
                <i class="fas fa-star"></i>
                <span>4.9</span>
                <span class="review-count">(203)</span>
              </div>
              <div class="price-row">
                <div class="price">
                  <span>${{ product.price }}</span>
                  {% if product.previous_price %}
                    <span class="previous-price" style="text-decoration: line-through; font-size: 12px; color: var(--text-secondary); margin-left: 4px;">${{ product.previous_price }}</span>
                  {% endif %}
                </div>
                {% if product.status != 'Unavailable' %}
                  <button class="add-to-cart"
                         data-product-id="{{ product.id }}"
                         data-name="{{ product.name }}"
                         data-price="{{ product.price }}"
                         data-image="{{ product.product_image.url }}">
                    <i class="fas fa-plus"></i>
                  </button>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>
  </div>

  <!-- Grid View for "View All" -->
  <div class="product-grid-container  shared-view" id="productGridContainer">
    <div class="section-header">
      <h2>All Menu Items</h2>
      <button class="back-to-carousel"><i class="fas fa-chevron-left"></i> Back</button>
    </div>
    <div class="product-grid" id="productGrid">
      <!-- Grid items will be dynamically populated here -->
    </div>
  </div>
</div>







    
    

  </section>

  <!-- ===============================
       PROFILE SECTION
       (Starts hidden by default)
  ================================ -->
  <div id="userSection" class="menu-app-container hidden">
    <!-- Profile Header -->
    <div class="app-header">
      <div class="header-content">
        <h1>Profile</h1>
        <div class="header-actions">
          <button class="icon-button">
            <i class="fas fa-bell"></i>
          </button>
          <button class="icon-button search-button">
            <i class="fas fa-gear"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Profile Card -->
    <div class="profile-wrapper">
      <div class="profile-card">
        <div class="profile-header-content">
          <div class="profile-avatar">
            <img src="" alt="Profile Image" class="avatar-img">
            <span class="avatar-edit">
              <i class="fas fa-camera"></i>
            </span>
          </div>
          <h2 class="profile-name">{{ request.user.first_name }}</h2>
          <div class="profile-tags">
            <span class="profile-tag">
              <i class="fas fa-star"></i>
              Level {{ request.user.customer.loyalty_level }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-item">
        <i class="fas fa-wallet"></i>
        <div class="stat-info">
          <span class="stat-value">{{ request.user.customer.wallet_balance }}</span>
          <span class="stat-label">Credits</span>
        </div>
      </div>
      <div class="stat-item">
        <i class="fas fa-gift"></i>
        <div class="stat-info">
          <span class="stat-value">{{ request.user.customer.reward_points }}</span>
          <span class="stat-label">Points</span>
        </div>
      </div>
    </div>

    <!-- Profile Menu -->
    <div class="profile-menu">
      <a href="#" class="menu-link">
        <i class="fas fa-clock-rotate-left"></i>
        <span>Order History</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="#" class="menu-link">
        <i class="fas fa-heart"></i>
        <span>Favorites</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="#" class="menu-link">
        <i class="fas fa-star"></i>
        <span>Reviews</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="#" class="menu-link">
        <i class="fas fa-gift"></i>
        <span>Rewards</span>
        <i class="fas fa-chevron-right"></i>
      </a>
      <a href="{% url 'customer_signout' %}" class="menu-link menu-link-logout">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
        <i class="fas fa-chevron-right"></i>
      </a>
    </div>
  </div>

  <!-- ===============================
       BOTTOM NAVIGATION
       (Always visible)
  ================================ -->
<!--   <nav class="bottom-nav">
    <div class="fixed-bottom-icons">
      <div class="nav-container">
        <div class="d-flex justify-content-between align-items-center h-100">
          Menu Icon
          <div class="nav-item-wrapper">
            <a href="#" id="ourDishIcon" class="text-inherit d-flex flex-column align-items-center" data-target="menuSection">
              <div class="icon-wrapper">
                <i class="fas fa-home"></i>
              </div>
              <span class="nav-label">Menu</span>
            </a>
          </div>
          Orders Icon
          <div class="nav-item-wrapper">
            <a href="#" id="ordersIcon" class="text-inherit d-flex flex-column align-items-center" data-target="ordersSection">
              <div class="icon-wrapper">
                <i class="fas fa-concierge-bell"></i>
              </div>
              <span class="nav-label">Orders</span>
            </a>
          </div>
          Cart Icon
          <div class="nav-item-wrapper">
            <a data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" href="#" role="button" aria-controls="offcanvasRight" class="text-inherit d-flex flex-column align-items-center">
              <div class="icon-wrapper">
                <i class="fas fa-shopping-cart"></i>
                <span id="cartIconCount"></span>
              </div>
              <span class="nav-label">Cart</span>
            </a>
          </div>
          Profile Icon
          <div class="nav-item-wrapper">
            <a href="#" id="userIcon" class="text-inherit d-flex flex-column align-items-center" data-target="userSection">
              <div class="icon-wrapper">
                <i class="fas fa-user"></i>
              </div>
              <span class="nav-label">Profile</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav> -->
  </section>

    <!-- Product Detail Modal -->
<div class="modal fade" id="productDetailModal" tabindex="-1" aria-labelledby="productDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="max-width: 400px; margin: auto; border-radius: 24px; overflow: hidden; box-shadow: 0 15px 40px rgba(0,0,0,0.15); border: none;">
            <!-- Main Content Wrapper -->
            <div class="position-relative">
                <!-- Close Button -->
                <button type="button" class="btn-close-custom position-absolute top-3 end-3 z-3" 
                        data-bs-dismiss="modal" aria-label="Close"
                        style="background: rgba(255, 255, 255, 0.9); border: none; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease;">
                    <i class="fas fa-times" style="color: #FF0000;"></i>
                </button>
                
                <!-- Image Section -->
                <div class="position-relative" style="height: 300px; background-color: #f0f0f0;">
                    <img id="detailProductImage" src="" 
                         class="w-100 h-100 object-fit-contain" alt="Product Image"
                         style="transition: transform 0.3s ease; max-height: 100%; max-width: 100%; object-position: center;">
                    <div class="position-absolute top-0 start-0 w-100 h-100" 
                         style="background: linear-gradient(to bottom, rgba(0,0,0,0.05), rgba(0,0,0,0.3));"></div>
                    <div class="position-absolute bottom-0 start-0 w-100 p-3">
                        <h3 class="h5 mb-2 text-white fw-bold"
                            style="text-shadow: 0 2px 4px rgba(0,0,0,0.4);"></h3>
                        <div class="d-flex align-items-center gap-2">
                            <span class="h5 mb-0 text-white"
                                  style="text-shadow: 0 2px 4px rgba(0,0,0,0.4);"></span>
                        </div>
                    </div>
                </div>

                <!-- Content Card -->
                <div class="card border-0 mx-3" 
                     style="margin-top: -40px; border-radius: 24px; background: white; box-shadow: 0 10px 30px rgba(0,0,0,0.08); position: relative; z-index: 10;">
                    <div class="card-body p-4">
                        <!-- Product Name and Price Section -->
                        <div class="mb-4">
                            <h2 id="detailProductName" class="h4 mb-2 text-dark fw-bold"></h2>
                            <div class="d-flex align-items-center gap-2">
                                <span id="detailProductPrice" class="h4 mb-0 text-dark fw-bold"></span>
                                <span id="detailProductOldPrice" class="small text-muted text-decoration-line-through"></span>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="mb-4">
                            <p id="detailProductDescription" class="text-secondary small mb-0"
                               style="line-height: 1.6;"></p>
                        </div>
                        
                        <!-- Stats -->
                        <div class="d-flex justify-content-between mb-4">
                            <div class="text-center px-3 py-2" 
                                 style="background: rgba(255,0,0,0.1); border-radius: 12px; transition: transform 0.2s ease;">
                                <i class="fas fa-clock mb-1" style="color: {{ primary_brand_color }};"></i>
                                <div class="small text-secondary">15-20 min</div>
                            </div>
                            <div class="text-center px-3 py-2" 
                                 style="background: rgba(255,0,0,0.1); border-radius: 12px; transition: transform 0.2s ease;">
                                <i class="fas fa-utensils mb-1" style="color: {{ primary_brand_color }};"></i>
                                <div class="small text-secondary">Portion: 1</div>
                            </div>
                            <div class="text-center px-3 py-2" 
                                 style="background: rgba(255,0,0,0.1); border-radius: 12px; transition: transform 0.2s ease;">
                                <i class="fas fa-star mb-1" style="color: {{ primary_brand_color }};"></i>
                                <div class="small text-secondary">4.8/5</div>
                            </div>
                        </div>
                        
                        <!-- Add to Cart Button -->
                        <button id="detailAddToCart" class="btn w-100 py-3" 
                                style="background: {{ primary_brand_color }}; 
                                       color: white; 
                                       border-radius: 12px; 
                                       font-weight: 500;
                                       border: none;
                                       transition: all 0.2s ease;
                                       box-shadow: 0 4px 12px rgba(255,0,0,0.2);">
                            <i class="fas fa-plus me-2"></i>Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



    <!-- Table Reservation Modal -->
    <div class="modal fade" id="tableInfoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
        <div class="modal-content">
            <div class="modal-body">
                <div class="welcome-icon">
                    <i class="fas fa-utensils"></i>
                </div>
                
                <h4 class="text-center welcome-text mb-4">Welcome to our restaurant!</h4>
                <p class="text-center guest-count-text mb-4">How many guests are dining today?</p>
                
                <form id="tableInfoForm">
                    <div class="row row-cols-3 g-3 mb-4 number-grid" id="dinerCountGrid">
                        <!-- Numbers will be inserted here by JavaScript -->
                    </div>
                    
                    <button style="background-color: #f7c028; border-color: #f7c028; color: white;" type="submit" class="btn btn-danger confirm-btn w-100">
                        <span class="text-white">Continue to Menu</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Add this right after the opening <body> tag -->
  <!-- Right after <body> tag -->
<!-- Right after <body> tag -->
<div id="splashScreen" class="splash-screen">
  <div class="splash-content">
    <div class="logo-container">
      <div class="logo-wrapper">
        <!-- Replace the SVG with your image -->
        <img 
          src="../../../static/menu_dashboard/delvrr.JPG" 
          alt="Delvrr Logo" 
          class="logo-image" 
        />
      </div>
    </div>
    <div class="tagline">Developers © Rimsle</div>
    <div class="loading-dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>
</div>












<!-- Beverages Section -->



    <!-- Add an audio element for the click sound -->
    <audio id="clickSound" src="../../../static/menu_dashboard/sounds/click-sound.mp3" preload="auto"></audio>

         

      <!-- Javascript-->
      <!-- Add jQuery library -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <!-- Libs JS -->
      <script src="../../../static/menu_dashboard/libs/jquery/dist/jquery.min.js"></script>
      <script src="../../../static/menu_dashboard/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
      <script src="../../../static/menu_dashboard/libs/simplebar/dist/simplebar.min.js"></script>

      <!-- Theme JS -->
      <script src="../../../static/menu_dashboard/js/theme.min.js"></script>

      <script src="../../../static/menu_dashboard/js/vendors/jquery.min.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/countdown.js"></script>
      <script src="../../../static/menu_dashboard/libs/slick-carousel/slick/slick.min.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/slick-slider.js"></script>
      <script src="../../../static/menu_dashboard/libs/tiny-slider/dist/min/tiny-slider.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/tns-slider.js"></script>
      <script src="../../../static/menu_dashboard/js/vendors/zoom.js"></script>
      <script src="../../../static/menu_dashboard/js/sections.js"></script>
      <script src="../../../static/menu_dashboard/js/dinerCount.js"></script>


      <!-- Include other HTML content -->
      <!-- Include jQuery and Bootstrap JS -->
    <!-- Include jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

 <!-- JavaScript for handling cart and shake animation with sound -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    document.body.dataset.userEmail = "{{ request.user.email|default:'' }}";
</script>
<script type="text/javascript">
  $(document).ready(function () {
  // Initialize the cart object
  let cart = {};
  
  // Get current user info from the page
  const currentUser = document.body.dataset.userEmail || null;
  
  // Create toast container if it doesn't exist (bottom left)
  if (!$('#toastContainer').length) {
    $('body').append('<div id="toastContainer" style="position: fixed; bottom: 24px; left: 24px; z-index: 1000;"></div>');
  }

  // Function to get cart with user validation
  function getStoredCart() {
    const storedCart = localStorage.getItem('cart');
    const storedCartUser = localStorage.getItem('cartUser');
    
    if (storedCart && storedCartUser === currentUser) {
      return JSON.parse(storedCart);
    }
    return {};
  }

  // Function to save cart with user association
  function saveCart(cartData) {
    localStorage.setItem('cart', JSON.stringify(cartData));
    localStorage.setItem('cartUser', currentUser);
  }

  // Function to clear cart
  function clearCart() {
    localStorage.removeItem('cart');
    localStorage.removeItem('cartUser');
    cart = {};
    updateCart(cart);
  }

  // Check for logout signal
  if (document.cookie.includes('clear_cart=true')) {
    clearCart();
    // Clear the cookie
    document.cookie = 'clear_cart=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
  }

  // Initialize cart from storage with user validation
  cart = getStoredCart();
  updateCart(cart);

  // Function to show product toast
  function showProductToast(product, type = 'success') {
    const toastId = 'toast-' + Date.now();
    const config = {
      success: {
        message: 'Added',
        icon: 'fa-check',
        color: '#f7c028',
        borderColor: '#e9ecef',
        bgColor: '#FFFFFF'
      },
      error: {
        message: 'Removed',
        icon: 'fa-times',
        color: '#f44336',
        borderColor: '#e9ecef',
        bgColor: '#FFFFFF'
      },
      warning: {
        message: 'Updated',
        icon: 'fa-exclamation',
        color: '#ff9800',
        borderColor: '#e9ecef',
        bgColor: '#FFFFFF'
      }
    };

    const toastConfig = config[type];

    // Insert keyframes if not already added
    if (!document.querySelector('#toastKeyframes')) {
      const keyframes = `
        @keyframes slideInLeft {
          0% { transform: translateX(-100%); opacity: 0; }
          100% { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOutLeft {
          0% { transform: translateX(0); opacity: 1; }
          100% { transform: translateX(-100%); opacity: 0; }
        }
        @keyframes popIn {
          0% { transform: scale(0.8); opacity: 0; }
          40% { transform: scale(1.1); opacity: 1; }
          100% { transform: scale(1); opacity: 1; }
        }
      `;
      const style = document.createElement('style');
      style.id = 'toastKeyframes';
      style.innerHTML = keyframes;
      document.head.appendChild(style);
    }

    const toast = $(`
      <div id="${toastId}" style="
        width: 180px;
        margin-top: 6px;
        background-color: ${toastConfig.bgColor};
        color: #1F2937;
        padding: 8px;
        border-radius: 6px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transform: translateX(-100%);
        animation: slideInLeft 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        border: 1px solid ${toastConfig.borderColor};
        overflow: hidden;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: 8px;
      ">
        <div style="
          width: 36px;
          height: 36px;
          border-radius: 4px;
          overflow: hidden;
          flex-shrink: 0;
        ">
          ${product.image ? 
            `<img src="${product.image}" style="width: 100%; height: 100%; object-fit: cover;" alt="${product.name}">` : 
            `<div style="width: 100%; height: 100%; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center;">
              <i class="fas fa-utensils" style="color: #6c757d;"></i>
            </div>`
          }
        </div>
        
        <div style="flex-grow: 1; display: flex; flex-direction: column;">
          <div style="font-weight: 600; font-size: 0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${product.name}</div>
          <div style="display: flex; align-items: center; gap: 4px;">
            <span style="color: ${toastConfig.color}; font-weight: 600; font-size: 0.75rem; display: flex; align-items: center; gap: 2px;">
              <i class="fas ${toastConfig.icon}" style="font-size: 0.7rem;"></i>
              ${toastConfig.message}
            </span>
          </div>
        </div>
      </div>
    `);

    $('#toastContainer').append(toast);

    // Automatically dismiss after 1.5 seconds
    setTimeout(() => {
      dismissProductToast(toastId);
    }, 1500);
  }

  function dismissProductToast(toastId) {
    const toast = $(`#${toastId}`);
    toast.css({
      'animation': 'fadeOutLeft 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards'
    });
    setTimeout(() => {
      toast.remove();
    }, 200);
  }

  // Function to update the cart content
  function updateCart(cart) {
    let totalItems = 0;
    let subtotal = 0.0;
    let cartItemsHtml = '';

    if (Object.keys(cart).length === 0) {
      $('#cartItems').html(`
        <div class="empty-state">
          <i class="fas fa-shopping-cart fa-2x" style="color: white !important; margin-bottom: 0.75rem;"></i>
          <p style="color: #4B5563; font-size: 0.875rem;">Your cart is empty</p>
        </div>
      `);
      $('#cartCount').text(totalItems).addClass('d-none');
      $('#cartIconCount').addClass('d-none');
      $('#cartTotal').text('$0.00');
      $('#checkoutButton').addClass('d-none');
      saveCart(cart);
      return;
    }

    for (let itemId in cart) {
      let [quantity, productName, productPrice, productImage] = cart[itemId];
      totalItems += quantity;
      subtotal += quantity * productPrice;

      cartItemsHtml += `
        <div class="cart-item" data-item-id="${itemId}">
          <img src="${productImage}" alt="${productName}" class="cart-item-image">
          <div class="cart-item-details">
            <div class="cart-item-name">${productName}</div>
            <div class="cart-item-price">$${productPrice.toFixed(2)}</div>
            <div class="quantity-controls">
              <button class="quantity-btn decrement" data-product-id="${itemId}" type="button">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
              <span class="quantity-value">${quantity}</span>
              <button class="quantity-btn increment" data-product-id="${itemId}" type="button">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
            </div>
          </div>
          <button class="remove-item" data-product-id="${itemId}" aria-label="Remove item" type="button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18"></path>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
            </svg>
          </button>
        </div>`;
    }

    $('#cartItems').html(cartItemsHtml);
    $('#cartCount').text(totalItems).removeClass('d-none');
    $('#cartIconCount').text(totalItems).removeClass('d-none');
    $('#cartTotal').text(`$${subtotal.toFixed(2)}`);
    $('#checkoutButton').removeClass('d-none');
    saveCart(cart);
    
    // Re-bind event handlers after updating the DOM
    bindCartEvents();
  }
  
  // Function to bind cart event handlers
  function bindCartEvents() {
    // Handle increment button clicks
    $('.increment').off('click').on('click', function() {
      const productId = $(this).data('product-id');
      if (!cart[productId]) return;
      
      const productName = cart[productId][1];
      const productPrice = cart[productId][2];
      const productImage = cart[productId][3];
      
      cart[productId][0]++;
      
      showProductToast({
        name: productName,
        image: productImage,
        price: '$' + productPrice.toFixed(2)
      }, 'success');
      
      updateCart(cart);
    });
    
    // Handle decrement button clicks
    $('.decrement').off('click').on('click', function() {
      const productId = $(this).data('product-id');
      if (!cart[productId]) return;
      
      const productName = cart[productId][1];
      const productPrice = cart[productId][2];
      const productImage = cart[productId][3];
      
      const productObject = {
        name: productName,
        image: productImage,
        price: '$' + productPrice.toFixed(2)
      };
      
      if (cart[productId][0] > 1) {
        cart[productId][0]--;
        showProductToast(productObject, 'warning');
      } else {
        delete cart[productId];
        showProductToast(productObject, 'error');
      }
      
      updateCart(cart);
    });
    
    // Handle remove item button clicks
    $('.remove-item').off('click').on('click', function() {
      const productId = $(this).data('product-id');
      if (!cart[productId]) return;
      
      const productName = cart[productId][1];
      const productPrice = cart[productId][2];
      const productImage = cart[productId][3];
      
      showProductToast({
        name: productName,
        image: productImage,
        price: '$' + productPrice.toFixed(2)
      }, 'error');
      
      delete cart[productId];
      updateCart(cart);
    });
  }

  // Handle add-to-cart button clicks
  $(document).on('click', '.add-to-cart-btn', function (e) {
    e.preventDefault();
    
    // Find the closest dish-card parent
    const productCard = $(this).closest('.dish-card');
    const productId = productCard.data('product-id');
    const productName = productCard.data('name');
    const productPrice = parseFloat(productCard.data('price'));
    const productImage = productCard.data('image');

    // Check if we got all the required data
    if (!productId || !productName || isNaN(productPrice) || !productImage) {
      console.error('Missing product data:', { productId, productName, productPrice, productImage });
      return;
    }

    const productObject = {
      id: productId,
      name: productName,
      price: '$' + productPrice.toFixed(2),
      image: productImage
    };

    showProductToast(productObject, 'success');

    if (!cart[productId]) {
      cart[productId] = [1, productName, productPrice, productImage];
    } else {
      cart[productId][0]++;
    }

    updateCart(cart);
  });

  // Handle checkout button click
  $('#checkoutButton').off('click').on('click', function () {
    if (!currentUser) {
      window.location.href = '/customer-signin/';
      return;
    }

    if (Object.keys(cart).length === 0) {
      showProductToast({
        name: 'Your cart is empty!',
        image: null
      }, 'error');
      return;
    }

    // Get restaurant name slug and hashed slug from the current URL
    const pathParts = window.location.pathname.split('/').filter(Boolean);
    if (pathParts.length >= 2) {
      const restaurantNameSlug = pathParts[pathParts.length - 2];
      const hashedSlug = pathParts[pathParts.length - 1];
      
      saveCart(cart);
      window.location.href = `/${restaurantNameSlug}/${hashedSlug}/checkout/`;
    } else {
      console.error('Unable to determine restaurant slugs from URL');
      showProductToast({
        name: 'Error: Unable to checkout',
        image: null
      }, 'error');
    }
  });
  
  // Initial binding of event handlers
  bindCartEvents();
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Cache view toggling containers
  const featuredSection = document.querySelector('.featured-section');
  const productGridContainer = document.getElementById('productGridContainer');

  // Ensure grid view is hidden on page load
  if (productGridContainer) {
    productGridContainer.style.display = 'none';
  }

  // Cache DOM elements for filtering and search
  const categoryButtons = document.querySelectorAll('.category-btn');
  const searchInput = document.querySelector('.search-input');
  const searchDropdown = document.querySelector('.search-results-dropdown');
  const searchResultsContent = document.querySelector('.search-results-content');

  // Helper: Returns active items based on which view is visible.
  // Here we check the featured (carousel) section because it's only visible in carousel mode.
  const getActiveItems = () => {
    if (featuredSection && window.getComputedStyle(featuredSection).display !== 'none') {
      return document.querySelectorAll('.food-item');
    } else {
      return document.querySelectorAll('.grid-item');
    }
  };

  // Helper: Show all active items (reset filtering)
  const showAllItems = () => {
    const activeItems = getActiveItems();
    activeItems.forEach(item => item.style.display = '');
  };

  // Initially display all items
  showAllItems();

  // --- Category Filtering ---
  const handleCategoryClick = (button) => {
    // Update active state on buttons
    categoryButtons.forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');

    const selectedCategory = button.dataset.category.toLowerCase();
    const activeItems = getActiveItems();
    
    activeItems.forEach(item => {
      const itemCategory = item.dataset.category.toLowerCase();
      // If "featured" is selected, show all; otherwise, filter by category
      item.style.display = (selectedCategory === 'featured' || itemCategory === selectedCategory) ? '' : 'none';
    });

    // Hide the search dropdown if visible
    if (searchDropdown) searchDropdown.style.display = 'none';
  };

  // Attach click events to category buttons
  categoryButtons.forEach(button => {
    button.addEventListener('click', () => handleCategoryClick(button));
  });

  // --- Search Functionality ---
  // Create a search result item that works for both views
  const createSearchResultItem = (item) => {
    let nameElem, imageElem;
    if (item.classList.contains('grid-item')) {
      nameElem = item.querySelector('.grid-details h3');
      imageElem = item.querySelector('.grid-image');
    } else {
      nameElem = item.querySelector('h3');
      imageElem = item.querySelector('.food-image img');
    }
    const name = nameElem ? nameElem.textContent : '';
    const category = item.dataset.category;
    const image = imageElem ? imageElem.src : '';

    const div = document.createElement('div');
    div.className = 'search-result-item';
    div.innerHTML = `
      <img src="${image}" alt="${name}" class="search-result-image">
      <div class="search-result-info">
        <div class="search-result-name">${name}</div>
        <div class="search-result-category">${category}</div>
      </div>
    `;

    // Clicking the result scrolls to and briefly highlights the item
    div.addEventListener('click', () => {
      item.scrollIntoView({ behavior: 'smooth', block: 'center' });
      item.style.transform = 'scale(1.02)';
      setTimeout(() => { item.style.transform = ''; }, 300);
      if (searchDropdown) searchDropdown.style.display = 'none';
      if (searchInput) searchInput.value = '';
    });
    return div;
  };

  if (searchInput && searchDropdown && searchResultsContent) {
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase().trim();
      if (searchTerm === '') {
        searchDropdown.style.display = 'none';
        showAllItems();
        return;
      }

      // Clear previous results
      searchResultsContent.innerHTML = '';
      let matches = 0;
      const activeItems = getActiveItems();

      activeItems.forEach(item => {
        let nameElem;
        if (item.classList.contains('grid-item')) {
          nameElem = item.querySelector('.grid-details h3');
        } else {
          nameElem = item.querySelector('h3');
        }
        const name = nameElem ? nameElem.textContent.toLowerCase() : '';
        const itemCategory = item.dataset.category.toLowerCase();

        if (name.includes(searchTerm) || itemCategory.includes(searchTerm)) {
          matches++;
          searchResultsContent.appendChild(createSearchResultItem(item));
        }
      });

      if (matches === 0) {
        searchResultsContent.innerHTML = `<div class="no-results-message">No results found for "${searchTerm}"</div>`;
      }
      searchDropdown.style.display = 'block';
    });

    // Hide dropdown when clicking outside
    document.addEventListener('click', (e) => {
      if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
        searchDropdown.style.display = 'none';
      }
    });
  }

  // Set "featured" category as active by default
  const featuredButton = document.querySelector('[data-category="featured"]');
  if (featuredButton) {
    featuredButton.classList.add('active');
  }
});
</script>






<!-- <script>
// Enhanced Navigation Behavior
document.addEventListener('DOMContentLoaded', function() {
    // Navigation setup
    const navItems = document.querySelectorAll('.text-inherit');
    const highlight = document.querySelector('.nav-pill-highlight');

    navItems.forEach((item, index) => {
        item.addEventListener('click', (e) => {
            // Skip if it's the cart icon (to maintain offcanvas functionality)
            if (!item.hasAttribute('data-bs-toggle')) {
                e.preventDefault();
                
                // Remove active class from all items
                navItems.forEach(i => i.classList.remove('active'));
                
                // Add active class to clicked item
                item.classList.add('active');
                
                // Move highlight pill
                highlight.style.transform = `translateX(${index * 100}%)`;
            }
        });
    });

    // Scroll behavior
    let lastScrollY = window.scrollY;
    let scrollTimer = null;
    
    const handleScroll = () => {
        const currentScrollY = window.scrollY;
        const bottomNav = document.querySelector('.fixed-bottom-icons');
        
        // Clear existing timer
        if (scrollTimer !== null) {
            clearTimeout(scrollTimer);
        }

        // Show/hide based on scroll direction
        if (currentScrollY > lastScrollY && currentScrollY > 50) {
            bottomNav.classList.add('hidden');
        } else {
            bottomNav.classList.remove('hidden');
        }

        // Set timer to show elements after scrolling stops
        scrollTimer = setTimeout(() => {
            bottomNav.classList.remove('hidden');
        }, 1000);

        lastScrollY = currentScrollY;
    };

    // Throttle scroll event
    let ticking = false;
    window.addEventListener('scroll', () => {
        if (!ticking) {
            window.requestAnimationFrame(() => {
                handleScroll();
                ticking = false;
            });
            ticking = true;
        }
    });

    // Set initial active state
    if (!document.querySelector('.text-inherit.active')) {
        navItems[0].classList.add('active');
    }
});
</script> -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Cache DOM elements
    const ordersIcon = document.getElementById('ordersIcon');
    const ordersModal = document.getElementById('ordersFullscreen');
    const chatMessages = document.querySelector('.chat-messages');
    const messageInput = document.querySelector('#messageInput');
    const sendButton = document.querySelector('#sendButton');

    // Set up modal triggers
    ordersIcon.setAttribute('data-bs-toggle', 'modal');
    ordersIcon.setAttribute('data-bs-target', '#ordersFullscreen');

    // Handle modal events
    ordersModal.addEventListener('hidden.bs.modal', function () {
        document.getElementById('ourDishSection').style.display = 'block';
    });

    ordersModal.addEventListener('shown.bs.modal', function () {
        document.getElementById('ourDishSection').style.display = 'none';
        scrollToBottom();
        messageInput.focus();
    });

    // Scroll to bottom function
    function scrollToBottom() {
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Create message HTML without timestamp
    function createMessageHTML(message, type = 'customer') {       
        if (type === 'customer') {
            return `
                <div class="message customer-message">
                    <div class="message-content">
                        <p>${message}</p>
                    </div>
                </div>
            `;
        }
        
        return `
            <div class="message restaurant-message">
                <div class="message-content">
                    <div class="sender-name mb-1 text-muted small">Restaurant Staff</div>
                    <p>${message}</p>
                </div>
            </div>
        `;
    }

    // Send message function
    function sendMessage() {
        const message = messageInput.value.trim();
        if (message) {
            // Add customer message
            chatMessages.insertAdjacentHTML('beforeend', createMessageHTML(message));
            messageInput.value = '';
            scrollToBottom();
            
            // Simulate restaurant response after a delay
            setTimeout(() => {
                const responses = [
                    "We've noted your request. Your order will be prepared accordingly.",
                    "Thank you for letting us know. We'll take care of that.",
                    "Got it! We'll add that to your order.",
                    "Your request has been passed to the kitchen."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                chatMessages.insertAdjacentHTML('beforeend', createMessageHTML(randomResponse, 'restaurant'));
                scrollToBottom();
            }, 1000);
        }
    }

    // Event listeners
    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
        }
    });

    // Handle message input animations
    messageInput.addEventListener('focus', function() {
        this.closest('.input-group').style.boxShadow = '0 0 0 2px rgba(255, 193, 7, 0.25)';
    });

    messageInput.addEventListener('blur', function() {
        this.closest('.input-group').style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';
    });
});
</script>


 <script>
document.addEventListener('DOMContentLoaded', function() {
    // Product detail modal handling
    const productCards = document.querySelectorAll('.dish-card');
    const productDetailModal = new bootstrap.Modal(document.getElementById('productDetailModal'));
    
    // Add keyframe animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes modalImageZoom {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        @keyframes modalContentSlide {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes addedAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .modal-image-animate {
            animation: modalImageZoom 0.3s ease-out forwards;
        }
        .modal-content-animate {
            animation: modalContentSlide 0.3s ease-out forwards;
        }
        .btn-added {
            background-color: #FF0000 !important;
            color: white !important;
            animation: addedAnimation 0.3s ease-out;
        }
    `;
    document.head.appendChild(style);

    productCards.forEach(card => {
        const imageTrigger = card.querySelector('.product-image-trigger');
        if (imageTrigger) {
            imageTrigger.addEventListener('click', function() {
                const productData = {
                    id: card.dataset.productId,
                    name: card.dataset.name,
                    description: card.dataset.description,
                    price: `$${card.dataset.price}`,
                    previousPrice: card.dataset.previousPrice ? `$${card.dataset.previousPrice}` : '',
                    image: card.dataset.image
                };

                // Populate modal with animations
                const detailImage = document.getElementById('detailProductImage');
                const detailContent = document.querySelector('.modal-body');
                
                detailImage.src = productData.image;
                detailImage.classList.add('modal-image-animate');
                detailContent.classList.add('modal-content-animate');
                
                document.getElementById('detailProductName').textContent = productData.name;
                document.getElementById('detailProductDescription').textContent = productData.description;
                document.getElementById('detailProductPrice').textContent = productData.price;
                
                const oldPriceElement = document.getElementById('detailProductOldPrice');
                if (productData.previousPrice) {
                    oldPriceElement.textContent = productData.previousPrice;
                    oldPriceElement.style.textDecoration = 'line-through';
                    oldPriceElement.style.color = '#666';
                } else {
                    oldPriceElement.textContent = '';
                }

                // Update add to cart button with styling
                const addToCartBtn = document.getElementById('detailAddToCart');
                addToCartBtn.dataset.productId = productData.id;
                addToCartBtn.classList.remove('added', 'btn-added');
                addToCartBtn.style.transition = 'all 0.3s ease';
                addToCartBtn.style.transform = 'translateY(0)';
                
                // Show modal
                productDetailModal.show();

                // Reset animations for next time
                detailImage.addEventListener('animationend', () => {
                    detailImage.classList.remove('modal-image-animate');
                });
                detailContent.addEventListener('animationend', () => {
                    detailContent.classList.remove('modal-content-animate');
                });
            });
        }
    });

    // Handle modal add to cart with enhanced feedback
    document.getElementById('detailAddToCart').addEventListener('click', function() {
        const productId = this.dataset.productId;
        const originalBtn = document.querySelector(`.add-to-cart-btn[data-product-id="${productId}"]`);
        
        if(originalBtn) {
            originalBtn.click();
            this.classList.add('added', 'btn-added');
            
            // Enhanced visual feedback
            const originalHtml = this.innerHTML;
            this.innerHTML = `
                <i class="fas fa-check me-2" style="transform: scale(1.2);"></i>
                <span style="font-weight: 500;">Added!</span>
            `;
            
            // Add hover effect
            this.style.transform = 'translateY(-2px)';
            
            setTimeout(() => {
                // Smooth transition out
                this.style.transform = 'translateY(0)';
                setTimeout(() => {
                    productDetailModal.hide();
                    this.innerHTML = originalHtml;
                    this.classList.remove('added', 'btn-added');
                }, 200);
            }, 800);
        }
    });

    // Clean up animations when modal is hidden
    document.getElementById('productDetailModal').addEventListener('hidden.bs.modal', function () {
        document.getElementById('detailProductImage').classList.remove('modal-image-animate');
        document.querySelector('.modal-body').classList.remove('modal-content-animate');
        const addToCartBtn = document.getElementById('detailAddToCart');
        addToCartBtn.classList.remove('added', 'btn-added');
        addToCartBtn.innerHTML = addToCartBtn.getAttribute('data-original-text') || 'Add to Cart';
    });
});
</script>

<!-- ===============================
     JAVASCRIPT TO TOGGLE SECTIONS
=============================== -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Select all main sections using the common class
    const sections = document.querySelectorAll('.menu-app-container');
    // Select all navigation icons from the bottom nav
    const navIcons = document.querySelectorAll('.bottom-nav .nav-item-wrapper a');

    // Function to hide all sections by adding the .hidden class
    function hideAllSections() {
      sections.forEach(section => section.classList.add('hidden'));
    }

    // Function to show a specific section by removing the .hidden class
    function showSection(sectionId) {
      hideAllSections();
      const section = document.getElementById(sectionId);
      if (section) {
        section.classList.remove('hidden');
      }
    }

    // Function to reset the active state of nav icons
    function resetActiveStates() {
      navIcons.forEach(icon => {
        icon.classList.remove('active');
        const label = icon.querySelector('.nav-label');
        if (label) {
          label.classList.remove('active');
        }
      });
    }

    // Initialize: show the menuSection by default and set the Home icon as active
    hideAllSections();
    showSection('menuSection');
    document.getElementById('ourDishIcon').classList.add('active');
    document.querySelector('#ourDishIcon .nav-label').classList.add('active');

    // Add click event handlers to the navigation icons
    navIcons.forEach(icon => {
      icon.addEventListener('click', function(e) {
        e.preventDefault(); // Prevent default anchor behavior
        const targetSection = this.getAttribute('data-target') || 'menuSection';
        resetActiveStates();
        showSection(targetSection);
        this.classList.add('active');
        const label = this.querySelector('.nav-label');
        if (label) {
          label.classList.add('active');
        }
      });
    });

    // When the Orders modal is closed (via the X button), revert back to the Home section.
    // This uses Bootstrap's "hidden.bs.modal" event.
    var ordersModalEl = document.getElementById('ordersFullscreen');
    if (ordersModalEl) {
      ordersModalEl.addEventListener('hidden.bs.modal', function() {
        resetActiveStates();
        showSection('menuSection');
        const homeIcon = document.getElementById('ourDishIcon');
        homeIcon.classList.add('active');
        const homeLabel = homeIcon.querySelector('.nav-label');
        if (homeLabel) {
          homeLabel.classList.add('active');
        }
      });
    }
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const splashScreen = document.getElementById('splashScreen');
    
    // Show splash screen for 3 seconds, then fade out
    setTimeout(() => {
      splashScreen.classList.add('fade-out');
      setTimeout(() => {
        splashScreen.remove();
      }, 500);
    }, 3000);
  });
</script>

<script>
        document.addEventListener('DOMContentLoaded', function() {
            const categoryScroll = document.querySelector('.category-scroll');
            const categoryButtons = document.querySelectorAll('.category-btn');
            
            // Handle button click
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Scroll into view (centered)
                    const scrollContainer = categoryScroll;
                    const buttonLeft = this.offsetLeft;
                    const buttonWidth = this.offsetWidth;
                    const containerWidth = scrollContainer.clientWidth;
                    
                    const targetScrollLeft = buttonLeft - (containerWidth / 2) + (buttonWidth / 2);
                    scrollContainer.scrollTo({ left: targetScrollLeft, behavior: 'smooth' });
                    
                    // Handle category change logic here
                    const categoryName = this.dataset.category;
                    // Your category change logic...
                });
            });
            
            // Mouse drag scrolling
            let isDown = false;
            let startX;
            let scrollLeft;
            
            categoryScroll.addEventListener('mousedown', (e) => {
                isDown = true;
                categoryScroll.classList.add('dragging');
                startX = e.pageX - categoryScroll.offsetLeft;
                scrollLeft = categoryScroll.scrollLeft;
            });
            
            categoryScroll.addEventListener('mouseleave', () => {
                isDown = false;
                categoryScroll.classList.remove('dragging');
            });
            
            categoryScroll.addEventListener('mouseup', () => {
                isDown = false;
                categoryScroll.classList.remove('dragging');
            });
            
            categoryScroll.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - categoryScroll.offsetLeft;
                const walk = (x - startX) * 1.5; // Scroll speed multiplier
                categoryScroll.scrollLeft = scrollLeft - walk;
            });
            
            // Touch drag scrolling (mobile)
            let touchStartX;
            let touchScrollLeft;
            
            categoryScroll.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].pageX - categoryScroll.offsetLeft;
                touchScrollLeft = categoryScroll.scrollLeft;
            }, { passive: true });
            
            categoryScroll.addEventListener('touchmove', (e) => {
                const x = e.touches[0].pageX - categoryScroll.offsetLeft;
                const walk = (x - touchStartX) * 1.5;
                categoryScroll.scrollLeft = touchScrollLeft - walk;
            }, { passive: true });
            
            // Auto-scroll to active button on page load
            const activeButton = document.querySelector('.category-btn.active');
            if (activeButton) {
                const scrollContainer = categoryScroll;
                const buttonLeft = activeButton.offsetLeft;
                const buttonWidth = activeButton.offsetWidth;
                const containerWidth = scrollContainer.clientWidth;
                
                // Center the active button
                const targetScrollLeft = buttonLeft - (containerWidth / 2) + (buttonWidth / 2);
                scrollContainer.scrollLeft = targetScrollLeft;
            }
        });
    </script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // ===== View Toggle Functionality =====
  const viewAllButton = document.querySelector('.view-all');
  const featuredSection = document.querySelector('.featured-section');
  const productGridContainer = document.getElementById('productGridContainer');
  const productGrid = document.getElementById('productGrid');
  const backButton = document.querySelector('.back-to-carousel');

  // Extract all products from the carousel (including category)
  function extractProductsFromCarousel() {
    const foodItems = document.querySelectorAll('.food-item');
    return Array.from(foodItems).map(item => {
      return {
        id: item.dataset.productId,
        name: item.dataset.name,
        price: item.dataset.price,
        previousPrice: item.dataset.previousPrice,
        image: item.dataset.image,
        status: item.querySelector('.discount-badge') ? 'Sale' : 'Regular',
        category: item.dataset.category  // include category for filtering
      };
    });
  }

  // Create the grid view (add data-category attribute for filtering)
  function createGridView(products) {
    productGrid.innerHTML = '';
    
    products.forEach(product => {
      const gridItem = document.createElement('div');
      gridItem.className = 'grid-item';
      gridItem.dataset.productId = product.id;
      gridItem.dataset.category = product.category;
      gridItem.dataset.name = product.name;
      gridItem.dataset.price = product.price;
      gridItem.dataset.previousPrice = product.previousPrice;
      
      const isOnSale = product.status === 'Sale';
      
      gridItem.innerHTML = `
        <div class="grid-image-container">
          ${isOnSale ? '<span class="discount-badge">Sale</span>' : ''}
          <img src="${product.image}" alt="${product.name}" class="grid-image">
        </div>
        <div class="grid-details">
          <h3>${product.name}</h3>
          <div class="rating">
            <i class="fas fa-star"></i>
            <span>4.9</span>
            <span class="review-count">(203)</span>
          </div>
          <div class="price-row">
            <div class="price">
              <span>$${product.price}</span>
              ${product.previousPrice ? `<span class="previous-price" style="text-decoration: line-through; font-size: 12px; color: var(--text-secondary); margin-left: 4px;">$${product.previousPrice}</span>` : ''}
            </div>
            <button class="add-to-cart" data-product-id="${product.id}" data-name="${product.name}" data-price="${product.price}" data-image="${product.image}">
              <i class="fas fa-plus"></i>
            </button>
          </div>
        </div>
      `;
      
      productGrid.appendChild(gridItem);
    });
  }

  // Toggle from carousel to grid view
  viewAllButton.addEventListener('click', function() {
    const products = extractProductsFromCarousel();
    createGridView(products);
    
    featuredSection.classList.add('fade-out');
    
    setTimeout(() => {
      featuredSection.style.display = 'none';
      productGridContainer.style.display = 'block';
      productGridContainer.classList.add('fade-in');
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      setTimeout(() => {
        productGridContainer.classList.remove('fade-in');
      }, 300);
    }, 300);
  });
  
  // Toggle back from grid to carousel view
  backButton.addEventListener('click', function() {
    productGridContainer.classList.add('fade-out');
    
    setTimeout(() => {
      productGridContainer.style.display = 'none';
      featuredSection.style.display = 'block';
      featuredSection.classList.add('fade-in');
      
      setTimeout(() => {
        featuredSection.classList.remove('fade-in', 'fade-out');
        productGridContainer.classList.remove('fade-out');
      }, 300);
    }, 300);
  });
  
  // Handle add-to-cart for grid items
  productGrid.addEventListener('click', function(e) {
    if (e.target.closest('.add-to-cart')) {
      const button = e.target.closest('.add-to-cart');
      const productId = button.dataset.productId;
      const productName = button.dataset.name;
      const productPrice = button.dataset.price;
      
      if (typeof addToCart === 'function') {
        addToCart(productId, productName, productPrice);
      } else {
        console.log('Adding to cart:', productName);
        button.classList.add('added');
        setTimeout(() => {
          button.classList.remove('added');
        }, 300);
      }
    }
  });
  
  // ===== Search and Category Filter Functionality =====
  const categoryButtons = document.querySelectorAll('.category-btn');
  const searchInput = document.querySelector('.search-input');
  const searchDropdown = document.querySelector('.search-results-dropdown');
  const searchResultsContent = document.querySelector('.search-results-content');

  // Helper: Return currently visible product items (grid or carousel)
  function getActiveItems() {
    if (productGridContainer.style.display !== 'none') {
      return document.querySelectorAll('.grid-item');
    } else {
      return document.querySelectorAll('.food-item');
    }
  }

  // Helper: Show all active items (reset filtering)
  function showAllItems() {
    const activeItems = getActiveItems();
    activeItems.forEach(item => item.style.display = '');
  }
  
  // Category button filtering
  categoryButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Update active state on category buttons
      categoryButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');

      const selectedCategory = button.dataset.category.toLowerCase();
      const activeItems = getActiveItems();
      
      activeItems.forEach(item => {
        const itemCategory = item.dataset.category.toLowerCase();
        item.style.display = (selectedCategory === 'featured' || itemCategory === selectedCategory) ? '' : 'none';
      });

      if (searchDropdown) searchDropdown.style.display = 'none';
    });
  });
  
  // Create a search result item element
  function createSearchResultItem(item) {
    let nameElem;
    // Different selectors for carousel vs. grid view
    if (item.classList.contains('grid-item')) {
      nameElem = item.querySelector('.grid-details h3');
    } else {
      nameElem = item.querySelector('.food-details h3');
    }
    const name = nameElem ? nameElem.textContent : '';
    const category = item.dataset.category;
    
    let imageElem;
    if (item.classList.contains('grid-item')) {
      imageElem = item.querySelector('.grid-image');
    } else {
      imageElem = item.querySelector('.food-image img');
    }
    const image = imageElem ? imageElem.src : '';

    const div = document.createElement('div');
    div.className = 'search-result-item';
    div.innerHTML = `
      <img src="${image}" alt="${name}" class="search-result-image">
      <div class="search-result-info">
        <div class="search-result-name">${name}</div>
        <div class="search-result-category">${category}</div>
      </div>
    `;
    
    // Scroll to and highlight the item when clicked
    div.addEventListener('click', function() {
      item.scrollIntoView({ behavior: 'smooth', block: 'center' });
      item.style.transform = 'scale(1.02)';
      setTimeout(() => { item.style.transform = ''; }, 300);
      if (searchDropdown) searchDropdown.style.display = 'none';
      if (searchInput) searchInput.value = '';
    });
    
    return div;
  }
  
  // Search functionality
  if (searchInput && searchDropdown && searchResultsContent) {
    searchInput.addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase().trim();
      if (searchTerm === '') {
        searchDropdown.style.display = 'none';
        showAllItems();
        return;
      }
      
      searchResultsContent.innerHTML = '';
      let matches = 0;
      const activeItems = getActiveItems();
      
      activeItems.forEach(item => {
        let nameElem;
        if (item.classList.contains('grid-item')) {
          nameElem = item.querySelector('.grid-details h3');
        } else {
          nameElem = item.querySelector('.food-details h3');
        }
        const name = nameElem ? nameElem.textContent.toLowerCase() : '';
        const itemCategory = item.dataset.category.toLowerCase();
        
        if (name.includes(searchTerm) || itemCategory.includes(searchTerm)) {
          matches++;
          searchResultsContent.appendChild(createSearchResultItem(item));
        }
      });
      
      if (matches === 0) {
        searchResultsContent.innerHTML = `<div class="no-results-message">No results found for "${searchTerm}"</div>`;
      }
      
      searchDropdown.style.display = 'block';
    });
    
    // Hide the search dropdown when clicking outside
    document.addEventListener('click', function(e) {
      if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
        searchDropdown.style.display = 'none';
      }
    });
  }
});
</script>


 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Script to show the modal on page load and handle form submission -->
   </body>
</html>